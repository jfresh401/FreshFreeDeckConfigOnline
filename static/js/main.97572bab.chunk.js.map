{"version":3,"sources":["lib/image/colorToMonoBitmap.ts","lib/file/fileToImage.ts","lib/file/handleFileSelect.ts","lib/configFile/ssd1306.ts","schemas/button.ts","schemas/display.ts","schemas/config.ts","lib/configFile/createBuffer.ts","lib/configFile/createBody.ts","lib/configFile/loadConfigFile.ts","definitions/back.png","lib/serial/fdSerialApi.ts","lib/serial/tauri-serial.ts","lib/serial/web-serial.ts","lib/configFile/createFooter.ts","lib/configFile/createHeader.ts","lib/hooks/startup/liveData.tsx","lib/misc/util.ts","lib/components/Title.tsx","generated/types-and-hooks.ts","definitions/keys.ts","states/configState.ts","lib/components/LabelValue.tsx","lib/components/TitleInput.tsx","states/appState.ts","lib/components/CtrlDuo.tsx","index.tsx","lib/localisation/keyboard.ts","lib/components/ActionPreview.tsx","lib/components/ImagePreview.tsx","containers/DisplayButton/index.tsx","definitions/iconSizes.ts","lib/components/Menu.tsx","containers/Page/Menu.tsx","containers/Page/index.tsx","containers/Collection/Menu.tsx","containers/Collection/index.tsx","containers/Collection/Collections.tsx","containers/ContentBody.tsx","lib/components/Button.tsx","containers/FirstTime.tsx","lib/components/SelectInput.tsx","lib/file/download.ts","containers/Header.tsx","containers/Page/Pages.tsx","Body.tsx","lib/serial/commands.ts","lib/hooks/startup/pageSwitcher.tsx","lib/hooks/startup/index.tsx","lib/hooks/startup/persistentConfig.tsx","lib/hooks/startup/serialCommand.tsx","lib/misc/createToast.tsx","lib/components/TabView.tsx","lib/components/Alert.tsx","lib/components/Confirm.tsx","CustomAlert.tsx","lib/components/Window.tsx","lib/components/Row.tsx","lib/components/Switch.tsx","lib/components/TextArea.tsx","containers/Collection/Settings/AutoPageSwitcher.tsx","lib/components/TextInput.tsx","containers/Collection/Settings/General.tsx","containers/Collection/Settings/Modal.tsx","containers/DeprecatedInfoModal.tsx","containers/DisplayButton/ButtonSettings/ChangePage.tsx","lib/misc/scrollToPage.tsx","lib/components/Slider.tsx","containers/DisplayButton/ButtonSettings/FreeDeckSettings.tsx","containers/DisplayButton/ButtonSettings/Hotkeys.tsx","containers/DisplayButton/ButtonSettings/LeavePage.tsx","containers/DisplayButton/ButtonSettings/SpecialKeys.tsx","containers/DisplayButton/ButtonSettings/Text.tsx","containers/DisplayButton/ButtonSettings/Action.tsx","containers/DisplayButton/ButtonSettings/index.tsx","containers/DisplayButton/DisplaySettings/DropDisplay.tsx","containers/DisplayButton/DisplaySettings/ImageSettings.tsx","containers/DisplayButton/DisplaySettings/index.tsx","lib/components/ScrollListContainer.tsx","containers/DisplayButton/LiveDataSettings/index.tsx","containers/DisplayButton/DisplayButtonSettingsModal.tsx","containers/About.tsx","containers/BackButtonLiveData.tsx","containers/DefaultBackButtonSettings.tsx","containers/DeveloperSettings.tsx","containers/Device.tsx","containers/Displays.tsx","containers/GeneralSettingsModal.tsx","lib/components/Anchor.tsx","containers/HelpModal.tsx","containers/Page/Settings/AutoPageSwitcher.tsx","containers/Page/Settings/General.tsx","containers/Page/Settings/Modal.tsx","ModalBody.tsx","App.tsx","lib/hooks/once.tsx","lib/misc/eventListeners.tsx","reportWebVitals.ts","serviceWorkerRegistration.ts","lib/configFile/consts.ts","lib/serial/index.ts","lib/configFile/parseConfig.ts","definitions/fonts.ts","definitions/defaultPage.ts","lib/image/composeImage.ts","definitions/modes.ts","definitions/defaultBackImage.ts","definitions/emptyConvertedImage.ts","lib/image/base64Encode.ts","definitions/headers.ts"],"names":["colorBitmapToMonochromeBitmap","bitmapBuffer","width","height","bitmapBody","slice","readUInt32LE","blackAndWhite","pixel","r","readUInt8","g","b","saturation","push","monochromeBody","i","offset","part","join","number","parseInt","Buffer","concat","monochrome128by64BitmapHeader","stringToImage","input","jimp","default","read","jimage","mime","getMIME","newMime","quality","scaleToFit","getBufferAsync","resizedBuffer","fileToImage","file","handleFileSelect","buffer","from","fileReader","Promise","resolve","reject","FileReader","onloadend","content","result","byteLength","readAsArrayBuffer","optimizeForSSD1306","dst_mask","optimizedImage","alloc","y","j","s","ucTemp","Array","fill","x","q","z","ButtonValuesSchema","Joi","object","EAction","changePage","string","allow","hotkeys","array","items","failover","required","settings","setting","valid","FDSettings","absolute_brightness","change_brightness","value","special_keys","text","meta","className","LeavePageSchema","enabled","boolean","pageId","ButtonSettingSchema","mode","noop","strict","values","leavePage","ButtonSchema","primary","secondary","TextWithIconSettingsSchema","iconWidthMultiplier","min","max","TextSettingsSchema","font","fontSmaller","fontSmall","fontMedium","fontLarge","position","ETextPosition","bottom","right","ImageSettingsSchema","blackThreshold","whiteThreshold","brightness","contrast","autoCrop","bool","imageMode","EImageMode","dither","normal","hybrid","invert","DisplaySchema","convertedImage","any","imageSettings","isGeneratedFromDefaultBackImage","originalImage","previewImage","getBase64Image","getEmptyConvertedImage","textSettings","textWithIconSettings","LiveModeSchema","LiveSchema","top","DefaultBackDisplaySchema","display","live","DisplayButtonSchema","button","PublishData","createdBy","forkedFrom","PageSchema","name","windowName","publishData","isInCollection","usePageNameAsWindowName","displayButtons","PagesSchema","byId","custom","valueeee","helper","validated","Object","entries","forEach","key","validate","stripUnknown","error","Error","message","sorted","CollectionsSchema","pages","useCollectionNameAsWindowName","unknown","unknownType","ConfigSchema","oledSpeed","oledDelay","preChargePeriod","clockFreq","clockDiv","saveJson","configVersion","package_json","configFileVersion","screenSaverTimeout","collections","defaultBackDisplay","createConfigBuffer","configState","createHeader","Math","length","createButtonBody","createImageBody","createFooter","writeAction","buttonRows","db","rowOffset","isSecondary","buttonAction","dataOffset","ROW_SIZE","writeUInt8","ActionValue","pageIndex","findIndex","id","writeUInt16LE","hotkey","index","buttonRowCount","page","buttonIndex","imageBuffer","bmpHeaderSize","console","log","hasLiveData","loadConfigFile","fileList","setState","parseConfig","config","window","advancedAlert","commands","FDSerialAPI","Serial","connected","connectionStatus","disconnect","portsChangedCallbacks","ports","connectedPortIndex","calls","onPortsChanged","connect","cb","waitForTurn","callId","sleep","nextCall","shift","throwError","__TAURI_IPC__","this","TauriSerialConnector","WebSerialConnector","portIndex","requestNewPort","flush","write","readAsciiLine","fwVersion","hasJson","currentPage","goTo","toString","image","screen","headerSize","_composeText","sendImageToScreen","callback","keys","progressCallback","getFirmwareVersion","split","fileSizeStr","fileSize","data","transferStartedTime","Date","received","compareVersions","minFWVersion","sent","sendAt","pow","end","TRANSMIT_BUFFER_SIZE","chunk","numberChunk","setTimeout","clockDivider","refreshFrequency","readSerialCommand","readLine","String","fromCharCode","replace","mappedData","date","encoder","TextEncoder","ascii","encode","portsChangedCallback","port","refreshPorts","then","listen","payload","showError","invoke","path","baudRate","alert","autoConnect","prePorts","catch","start","filter","command","args","map","writer","bufferWrite","abortController","reader","readLoop","devicesChanged","newPortIndex","closePort","filterPorts","navigator","serial","addEventListener","openPort","getPorts","status","requestPort","filters","usbVendorId","usbProductId","isMacOS","arrBuff","startTime","getTime","splice","readLineTimeout","find","byte","line","getInfo","info","open","bufferSize","writable","getWriter","self","AbortController","WritableStream","readable","pipeTo","signal","releaseLock","abort","close","cancel","undefined","state","slimState","cloneDeep","slimConfig","slimString","JSON","stringify","deflated","deflate","screenTimeout","numberOfPages","header","composeGraph","label","unit","half","Jimp","loadFont","round","setPixelColor","bar","composite","print","toFixed","getWidth","getHeight","color","intToRGBA","getPixelColor","hasImage","composeDualData","liveModeTop","liveModeBottom","system","composeSingleData","topImage","bottomImage","topHalf","bottomHalf","newImage","liveMode","cpuTemp","gpuTemp","composeLiveDisplay","liveData","updateLiveDisplays","appState","refData","deck","current","dontSwitchPage","serialApi","dbIndex","useLiveData","useEffect","unlistenSerialCommand","isCancelled","startListen","workerInterval","getPageName","getCollectionName","collectionId","collection","userAgent","indexOf","ms","e","a","aParts","bParts","aPart","bPart","TitleBox","children","title","center","c","defaultOptions","PageFieldsFragmentDoc","gql","MeDocument","useMeQuery","baseOptions","options","Apollo","PageDocument","EMediaKeys","saveConfigToLocalStorage","localStorage","setItem","changePageDimension","oldCount","newCount","diff","createDefaultDisplayButton","defaultConfig","createDefaultBackDisplay","configReducer","setBrightness","setScreenSaver","timeout","setOledSpeed","speed","setOledDelay","delay","setPreChargePeriod","pcp","setClockFreq","freq","setClockDiv","div","setSaveJson","save","setDimensions","addPage","createDefaultPage","previousPage","newPage","newId","v4","previousDisplay","setStartPage","pid","unshift","downloadPage","client","query","variables","response","validatedPage","generateAdditionalImagery","renamePage","changePageWindowName","setUsePageName","switchPages","pageAId","pageBId","aIndex","pId","bIndex","colId","deleteDisplayButton","deletePage","p","setPagePublished","forkedId","newState","fetchPolicy","setPageCollection","createCollection","deleteCollection","cid","setUseCollectionName","renameCollection","changeCollectionWindowName","setButtonSettings","priOrSec","buttonSettings","setLeavePage","targetPageId","setDisplaySettings","displaySettings","updateAllDefaultBackImages","setOriginalImage","deleteImage","switchButtons","buttonAIndex","buttonBIndex","tempA","copyButton","pageSrcId","pageDestId","buttonSrcIndex","buttonDestIndex","displayButton","displayIndex","makeDefaultBackButton","resetDefaultBackButton","setLive","ConfigStateContext","createContext","ConfigDispatchContext","Label","hint","Value","TitleInput","onChange","onEnter","placeholder","disabled","type","currentTarget","onKeyDown","defaultAppState","autoPageSwitcherEnabled","ctrlDown","devLog","availablePorts","isOpen","confirm","modifyTemps","appReducer","setCtrl","setDeck","setTemps","toggleAutoPageSwitcher","maybeEnabled","apsState","setDevLog","setHasJson","closeAlert","openAlert","closeConfirm","onAccept","onAbort","openConfirm","setAvailablePorts","setConnectedPortIndex","AppStateContext","AppDispatchContext","CtrlDuo","useContext","Ctrl","hid","js","Shift","Alt","Win","CtrlRight","ShiftRight","AltGr","WinRight","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","F13","F14","F15","F16","F17","F18","F19","F20","F21","F22","F23","F24","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","Enter","Esc","BackSpace","Tab","Space","Minus","Equal","Backslash","NonUSBackslash","Semicolon","Quote","Tilde","Comma","Period","Slash","Print","Pause","Insert","Home","Delete","End","MediaKeys","k","useTranslateKeyboardLayout","translatable","keyboard","useState","translatedKeys","setTranslatedKeys","displayName","getLayoutMap","layout","jsKey","localKey","get","Pill","hideChangePage","genericBackButton","pillClassName","ArrowRightCircleIcon","ExclamationCircleIcon","ActionPreview","ImagePreview","$ref","onClick","size","clickable","alt","src","ref","style","imageRendering","DisplayButton","configDispatch","appDispatch","useDrag","item","collect","monitor","isDragging","dragRef","useDrop","accept","drop","targetDisplayIndex","getItem","dropRef","TrashIcon","to","iconSize","FDMenu","includes","Button","as","Fragment","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","Items","entry","Item","active","prefix","PageMenu","nav","useNavigate","CogIcon","PlayIcon","user","ShareIcon","process","Bars3Icon","Page","isStartPage","CollectionMenu","Collection","targetCollectionId","Collections","ContentBody","props","FDButton","suffix","sizeClasses","typeClasses","FirstPage","PlusCircleIcon","startPage","FDSelect","option","ChevronUpDownIcon","Options","Option","selected","CheckIcon","download","defaultPath","writeBinaryFile","document","createElement","body","appendChild","blob","Blob","url","URL","createObjectURL","href","click","revokeObjectURL","remove","Header","isLoading","setIsLoading","progress","setProgress","loadConfigRef","useRef","deviceEntries","onSubmit","event","preventDefault","files","ArrowUpOnSquareIcon","readConfigFromSerial","rec","ArrowDownOnSquareIcon","writeConfigOverSerial","DocumentArrowUpIcon","DocumentArrowDownIcon","completeBuffer","saveConfigFile","Cog8ToothIcon","Pages","Body","isOver","QuestionMarkCircleIcon","saveCurrentPage","stateRef","abs","runCommand","keyString","pressKeys","lastWindowName","findPage","toLowerCase","windowNames","trim","findCollectionPage","col","switchToPage","getCurrentPage","currentPageIndex","setCurrentPage","switchToCollection","collectionIndex","currentPageId","pageFoundIndex","switchToPageOrCollection","useBackgroundTasks","refState","handleStartup","parsed","parse","convertCurrentConfig","converted","usePersistentConfig","running","interval","usePageSwitcher","useSerialCommand","createToast","danger","toast","t","XMarkIcon","dismiss","duration","Infinity","background","TabView","tabs","activeIndex","Group","vertical","defaultIndex","List","tab","Panels","Panel","Alert","onClose","show","Child","Overlay","Title","Description","Confirm","CustomAlert","advancedConfirm","FDWindow","visible","setClose","appear","XCircleIcon","Row","FDSwitch","TextArea","AutoPageSwitcherSettings","TextInput","CollectionGeneralSettings","CollectionSettingsModal","params","useParams","CircleStackIcon","DeprecatedInfoModal","ChangePage","setValues","ArrowLeftOnRectangleIcon","contentBodyRef","getElementById","pageRef","headerRef","scrollTo","offsetTop","clientHeight","scrollToPage","FDSlider","step","FreeDeckSettings","target","valueAsNumber","HotkeyKeys","setKeys","newKeys","Hotkeys","newValues","keyName","tabIndex","repeat","nativeEvent","code","onHotKey","LeavePage","setValue","SpecialKeys","Text","rows","onKey","Action","ButtonSettingsContainer","DropDisplay","onDrop","useDropzone","getRootProps","getInputProps","isDragActive","ArrowPathIcon","outline","ChevronDoubleDownIcon","PhotoIcon","ImageSettings","BoltIcon","SunIcon","MoonIcon","MagnifyingGlassIcon","AdjustmentsHorizontalIcon","LanguageIcon","ArrowsPointingOutIcon","DisplaySettingsContainer","contentEditable","focus","acceptedFiles","onPaste","clipboardData","ScrollListContainer","Tag","LiveDataSettingsContainer","liveSettings","setLiveCallback","useCallback","DBSettingsModal","About","packageJson","version","BackButtonLiveData","DefaultBackButtonSettings","DeveloperSettings","val","writeToScreen","FW_UNKNOWN","DisplayCountDropDown","Device","widthOptions","setWOptions","heightOptions","setHOptions","setFwVersion","registerOnPortsChanged","fw","clearOnPortsChanged","wArray","possibleWidth","hArray","possibleHeight","Displays","testOledParameters","GlobalSettings","ArrowLeftCircleIcon","ChartBarIcon","CpuChipIcon","CodeBracketIcon","InformationCircleIcon","isTauri","Anchor","newTab","rel","HelpModal","PageGeneralSettings","PageSettingsModal","ModalBody","element","App","defaultConfigState","useSimpleReducer","portsId","getHasJson","useOnce","appDispatchContext","prompt","CloudArrowDownIcon","onblur","AddEventListeners","DndProvider","backend","HTML5Backend","Provider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","main","awaitedDefaultConfigState","awaitedDefaultAppState","ApolloClient","cache","InMemoryCache","uri","credentials","ReactDOM","render","origin","fetch","headers","contentType","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration","waiting","postMessage","onbeforeunload","newDisplay","createDefaultDisplay","_composeImage","rawConfig","promises","outer","inner","all","resolved","configBuffer","displayButtonCount","readUInt16LE","imageOffset","jsonOffset","jsonConfigSlice","inflate","createDefaultButton","count","jimpImage","create","brightnessMultiplier","bitmap","fs","ditherImage","grayscale","factor","convolute","crop","BLEND_ADD","opacityDest","opacitySource","threshold","autoGreyscale","autocrop","fontSize","common","lineHeight","lines","overAllLineHeight","lineOffset","xOffset","debounce","leading","maxWait","localDefaultBackDisplay","backImage","chr1","chr2","chr3","enc1","enc2","enc3","enc4","keyStr","output","Number","NaN","isNaN","charAt","base64Encode"],"mappings":"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","file":"static/js/main.97572bab.chunk.js","sourcesContent":["import { monochrome128by64BitmapHeader } from \"../../definitions/headers\";\r\n\r\nexport const colorBitmapToMonochromeBitmap = async (\r\n  bitmapBuffer: Buffer,\r\n  width: number,\r\n  height: number\r\n) => {\r\n  // strip the 24bit color header out\r\n  const bitmapBody = bitmapBuffer.slice(bitmapBuffer.readUInt32LE(10));\r\n  const blackAndWhite = [];\r\n\r\n  // black and white through threshold\r\n  for (let pixel = 0; pixel < width * height; pixel++) {\r\n    const r = bitmapBody.readUInt8(pixel * 3);\r\n    const g = bitmapBody.readUInt8(pixel * 3 + 1);\r\n    const b = bitmapBody.readUInt8(pixel * 3 + 2);\r\n    const saturation = (r + g + b) / 3 > 128 ? 1 : 0;\r\n    blackAndWhite.push(saturation);\r\n  }\r\n\r\n  //black and white to monochrome bitmap format\r\n  const monochromeBody = [];\r\n  for (let i = 0; i < (width * height) / 8; i++) {\r\n    const offset = i * 8;\r\n    const part = blackAndWhite.slice(offset, offset + 8).join(\"\");\r\n    const number = parseInt(part, 2);\r\n    monochromeBody.push(number); // thats faster\r\n  }\r\n  //put a monochrome bitmap header above the body again\r\n  return Buffer.concat([\r\n    new Buffer(monochrome128by64BitmapHeader()),\r\n    new Buffer(monochromeBody),\r\n  ]);\r\n};\r\n","import { handleFileSelect } from \"./handleFileSelect\";\nexport const stringToImage = async (input: string) => {\n  const jimp = (await import(\"jimp\")).default;\n  const jimage = await jimp.read(input);\n  const mime = jimage.getMIME();\n  const newMime = mime === \"image/jpeg\" ? mime : \"image/gif\";\n  const resizedBuffer = await jimage\n    .quality(70)\n    .scaleToFit(256, 128, \"\")\n    .getBufferAsync(newMime);\n  return resizedBuffer;\n};\nexport const fileToImage = async (file: File) => {\n  const buffer = await handleFileSelect(file);\n  const jimp = (await import(\"jimp\")).default;\n  const jimage = await jimp.read(Buffer.from(buffer));\n  const mime = jimage.getMIME();\n  const newMime = mime === \"image/jpeg\" ? mime : \"image/gif\";\n  const resizedBuffer = await jimage\n    .quality(70)\n    .scaleToFit(256, 128, \"\")\n    .getBufferAsync(newMime);\n  return resizedBuffer;\n};\n","let fileReader: FileReader;\r\nexport const handleFileSelect = (file: File): Promise<ArrayBuffer> => {\r\n  return new Promise((resolve, reject) => {\r\n    if (!file) return;\r\n    fileReader = new FileReader();\r\n    fileReader.onloadend = () => {\r\n      const content = fileReader.result as ArrayBuffer;\r\n      if (!content?.byteLength) return;\r\n      resolve(content as ArrayBuffer);\r\n    };\r\n    fileReader.readAsArrayBuffer(file);\r\n  });\r\n};\r\n","export const optimizeForSSD1306 = (buffer: Buffer) => {\n  // let optimizedImage = new Buffer(0);\n  let optimizedImage = Buffer.alloc(0);\n  let b;\n\n  let dst_mask;\n  for (let y = 0; y < 8; y++) {\n    // 8 lines of 8 pixels\n    for (let j = 0; j < 8; j++) {\n      // 8 sections of 16 columns = 128px width\n      let s = j * 2 + y * 16 * 8; // source line j*2 because j\n      // console.log(\"s\", s);\n      const ucTemp = new Array<number>(16).fill(0); // start with all black\n      for (let x = 0; x < 16; x += 8) {\n        // block of 16x8 pixels\n        dst_mask = 1;\n        for (let q = 0; q < 8; q++) {\n          // console.log(\"b\", s + q * 16);\n          b = buffer[s + q * 16];\n          for (let z = 0; z < 8; z++) {\n            if (b & 0x80) {\n              ucTemp[x + z] |= dst_mask;\n            }\n            b <<= 1;\n          } // for z\n          dst_mask <<= 1;\n        } // for q\n        s++; // next source uint8_t\n      } // for x\n      optimizedImage = Buffer.concat([optimizedImage, Buffer.from(ucTemp)]);\n      //oledCachedWrite(ucTemp, 16);\n    } // for j\n  }\n  return Buffer.from(optimizedImage);\n};\n","import Joi from \"joi\";\n\nimport { EAction, FDSettings } from \"../definitions/modes\";\n\nexport const ButtonValuesSchema = Joi.object({\n  [EAction.changePage]: Joi.string().allow(\"\"),\n  [EAction.hotkeys]: Joi.array().items(Joi.number()).failover([]).required(),\n  [EAction.settings]: Joi.object({\n    setting: Joi.number()\n      .valid(FDSettings.absolute_brightness, FDSettings.change_brightness)\n      .failover(FDSettings.change_brightness)\n      .required(),\n    value: Joi.number().failover(128).required(),\n  }).required(),\n  [EAction.special_keys]: Joi.number().failover(0).required(),\n  [EAction.text]: Joi.string().allow(\"\").failover(\" \"),\n}).meta({\n  className: \"ButtonValues\",\n});\n\nexport const LeavePageSchema = Joi.object({\n  enabled: Joi.boolean().failover(false).required(),\n  pageId: Joi.string(),\n}).meta({ className: \"LeavePage\" });\n\nexport const ButtonSettingSchema = Joi.object({\n  mode: Joi.string()\n    .valid(\n      EAction.changePage,\n      EAction.hotkeys,\n      EAction.noop,\n      EAction.settings,\n      EAction.special_keys,\n      EAction.text\n    )\n    .failover(EAction.noop)\n    .strict()\n    .required(),\n  values: ButtonValuesSchema.required().failover(ButtonValuesSchema),\n  leavePage: LeavePageSchema.required().failover(LeavePageSchema),\n}).meta({\n  className: \"ButtonSetting\",\n});\n\nexport const ButtonSchema = Joi.object({\n  primary: ButtonSettingSchema.required().failover(ButtonSettingSchema),\n  secondary: ButtonSettingSchema.required().failover(ButtonSettingSchema),\n}).meta({ className: \"Button\" });\n","import Joi from \"joi\";\n\nimport { getEmptyConvertedImage } from \"../definitions/emptyConvertedImage\";\nimport {\n  fontLarge,\n  fontMedium,\n  fontSmall,\n  fontSmaller,\n} from \"../definitions/fonts\";\nimport { EImageMode, ETextPosition } from \"../definitions/modes\";\nimport { getBase64Image } from \"../lib/image/base64Encode\";\n\nexport const TextWithIconSettingsSchema = Joi.object({\n  iconWidthMultiplier: Joi.number().min(0).max(1).failover(0.35).required(),\n}).meta({\n  className: \"TextWithIconSettings\",\n});\n\nexport const TextSettingsSchema = Joi.object({\n  font: Joi.string()\n    .valid(fontSmaller, fontSmall, fontMedium, fontLarge)\n    .failover(fontMedium)\n    .required(),\n  text: Joi.string().allow(\"\"),\n  position: Joi.number()\n    .valid(ETextPosition.bottom, ETextPosition.right)\n    .failover(ETextPosition.bottom)\n    .required(),\n}).meta({\n  className: \"TextSettings\",\n});\n\nexport const ImageSettingsSchema = Joi.object({\n  blackThreshold: Joi.number().failover(192).required(),\n  whiteThreshold: Joi.number().failover(64).required(),\n  brightness: Joi.number().failover(0).required(),\n  contrast: Joi.number().failover(0).required(),\n  autoCrop: Joi.bool().failover(true).required(),\n  imageMode: Joi.valid(EImageMode.dither, EImageMode.normal, EImageMode.hybrid)\n    .failover(EImageMode.normal)\n    .required(),\n  invert: Joi.bool().failover(false).required(),\n}).meta({\n  className: \"ImageSettings\",\n});\n\nexport const DisplaySchema = Joi.object({\n  // @ts-ignore\n  convertedImage: Joi.any(),\n  imageSettings: ImageSettingsSchema.required().failover(ImageSettingsSchema),\n  isGeneratedFromDefaultBackImage: Joi.bool().required().failover(false),\n  // @ts-ignore\n  originalImage: Joi.any(),\n  previewImage: Joi.string()\n    .required()\n    .failover(getBase64Image(getEmptyConvertedImage())),\n  textSettings: TextSettingsSchema.required().failover(TextSettingsSchema),\n  textWithIconSettings: TextWithIconSettingsSchema.required().failover(\n    TextWithIconSettingsSchema\n  ),\n}).meta({\n  className: \"Display\",\n});\n","import Joi from \"joi\";\n\nimport package_json from \"../../package.json\";\nimport { ButtonSchema } from \"./button\";\nimport { DisplaySchema } from \"./display\";\n\nexport const LiveModeSchema = Joi.string()\n  .required()\n  .allow(\n    \"cpu_temp\",\n    \"gpu_temp\",\n    \"cpu_temp_graph\",\n    \"gpu_temp_graph\",\n    \"cpu_temp_line\",\n    \"gpu_temp_line\",\n    \"none\"\n  )\n  .failover(\"none\")\n  .meta({ className: \"LiveMode\" });\nexport const LiveSchema = Joi.object({\n  top: LiveModeSchema,\n  bottom: LiveModeSchema,\n}).meta({ className: \"Live\" });\n\nexport const DefaultBackDisplaySchema = Joi.object({\n  display: DisplaySchema.required().failover(DisplaySchema),\n  live: LiveSchema.required().failover(LiveSchema),\n}).meta({ className: \"DefaultBackDisplay\" });\n\nexport const DisplayButtonSchema = Joi.object({\n  button: ButtonSchema.required().failover(ButtonSchema),\n  display: DisplaySchema.required().failover(DisplaySchema),\n  live: LiveSchema.required().failover(LiveSchema),\n}).meta({ className: \"DisplayButton\" });\n\nexport const PublishData = Joi.object({\n  createdBy: Joi.string().required(),\n  forkedFrom: Joi.string(),\n});\n\nexport const PageSchema = Joi.object({\n  name: Joi.string().allow(\"\"),\n  windowName: Joi.string().allow(\"\"),\n  publishData: PublishData,\n  isInCollection: Joi.string(),\n  usePageNameAsWindowName: Joi.bool().failover(true).required(),\n  displayButtons: Joi.array()\n    .items(DisplayButtonSchema)\n    .required()\n    .failover([]),\n}).meta({ className: \"Page\" });\n\nexport interface PagesById {\n  // @ts-ignore\n  [x: string]: Page;\n}\n\nexport const PagesSchema = Joi.object({\n  byId: Joi.object()\n    .custom((valueeee, helper) => {\n      let validated: any = {};\n      let error: any;\n      Object.entries(valueeee).forEach(([key, value]) => {\n        const result = PageSchema.validate(value, { stripUnknown: true });\n        validated[key] = result.value;\n        if (result.error) throw new Error(result.error.message);\n      });\n      if (error) {\n      }\n      return validated;\n    })\n    .meta({ className: \"Record<string,Page>\" })\n    .required()\n    .failover({}),\n  sorted: Joi.array().items(Joi.string()).failover([]).required(),\n}).meta({ className: \"Pages\" });\n\nexport const CollectionSchema = Joi.object({\n  name: Joi.string(),\n  pages: Joi.array().items(Joi.string()).failover([]).required(),\n  windowName: Joi.string(),\n  useCollectionNameAsWindowName: Joi.bool().failover(true).required(),\n}).meta({ className: \"Collection\" });\n\nexport const CollectionsSchema = Joi.object({\n  byId: Joi.object()\n    .unknown(true)\n    .meta({ unknownType: \"Collection\" })\n    .failover({})\n    .required(),\n  sorted: Joi.array().items(Joi.string()).failover([]).required(),\n}).meta({ className: \"Collections\" });\n\nexport const ConfigSchema = Joi.object({\n  pages: PagesSchema.required(),\n  brightness: Joi.number().failover(128).required(),\n  oledSpeed: Joi.number().failover(50).required(),\n  oledDelay: Joi.number().failover(2).required(),\n  preChargePeriod: Joi.number().failover(0x11).required(),\n  clockFreq: Joi.number().failover(0xf).required(),\n  clockDiv: Joi.number().failover(0x2).required(),\n  saveJson: Joi.bool().failover(true).required(),\n  height: Joi.number().max(16).min(1).failover(2).required(),\n  width: Joi.number().max(16).min(1).failover(3).required(),\n  configVersion: Joi.string()\n    .failover(package_json.configFileVersion)\n    .required(),\n  screenSaverTimeout: Joi.number().min(0).failover(0).required(),\n  collections: CollectionsSchema.required().failover(CollectionsSchema),\n  defaultBackDisplay: DefaultBackDisplaySchema.required().failover(\n    DefaultBackDisplaySchema\n  ),\n})\n  .required()\n  .meta({ className: \"Config\" })\n  .strict(true);\n","import { Config } from \"../../generated\";\nimport { createButtonBody, createImageBody } from \"./createBody\";\nimport { createFooter } from \"./createFooter\";\nimport { createHeader } from \"./createHeader\";\nexport const createConfigBuffer = (\n  configState: Config,\n  saveJson: boolean\n): Buffer => {\n  let buffer = Buffer.concat([\n    createHeader(\n      configState.width,\n      configState.height,\n      configState.brightness,\n      configState.screenSaverTimeout,\n      configState.oledSpeed,\n      configState.oledDelay,\n      configState.preChargePeriod,\n      Math.min(15, configState.clockFreq) * 16 +\n        Math.min(15, configState.clockDiv),\n      configState.saveJson,\n      configState.pages.sorted.length\n    ),\n    createButtonBody(configState.pages),\n    createImageBody(configState.pages),\n  ]);\n  if (configState.saveJson || saveJson) {\n    buffer = Buffer.concat([buffer, createFooter(configState)]);\n  }\n  return buffer;\n};\n","import { ActionValue, EAction, FDSettings } from \"../../definitions/modes\";\nimport { DisplayButton, Pages } from \"../../generated\";\nimport { ROW_SIZE } from \"./consts\";\nimport { optimizeForSSD1306 } from \"./ssd1306\";\n\nconst writeAction = (\n  buttonRows: Buffer,\n  db: DisplayButton,\n  pages: Pages,\n  rowOffset: number,\n  isSecondary: boolean\n) => {\n  const buttonAction = isSecondary ? db.button.secondary : db.button.primary;\n  const dataOffset = rowOffset + (isSecondary ? ROW_SIZE / 2 : 0);\n  buttonRows.writeUInt8(\n    //@ts-ignore\n    ActionValue[buttonAction.mode],\n    dataOffset\n  );\n  switch (buttonAction.mode) {\n    case EAction.changePage:\n      const pageIndex = pages.sorted.findIndex(\n        (id) => id === buttonAction.values[EAction.changePage]\n      );\n      buttonRows.writeUInt16LE(pageIndex, dataOffset + 1);\n      break;\n    case EAction.hotkeys:\n      buttonAction.values[EAction.hotkeys].forEach((hotkey, index) => {\n        buttonRows.writeUInt8(hotkey, dataOffset + index + 1);\n      });\n      break;\n    case EAction.special_keys:\n      buttonRows.writeUInt8(\n        buttonAction.values[EAction.special_keys],\n        dataOffset + 1\n      );\n      break;\n    case EAction.settings:\n      buttonRows.writeUInt8(\n        buttonAction.values[EAction.settings].setting!,\n        dataOffset + 1\n      );\n      if (\n        buttonAction.values[EAction.settings].setting ===\n        FDSettings.absolute_brightness\n      )\n        buttonRows.writeUInt8(\n          buttonAction.values[EAction.settings].value!,\n          dataOffset + 2\n        );\n\n      break;\n  }\n  const pageIndex = pages.sorted.findIndex(\n    (id) =>\n      id === db.button[isSecondary ? \"secondary\" : \"primary\"].leavePage.pageId\n  );\n  buttonRows.writeUInt16LE(pageIndex + 1, dataOffset + ROW_SIZE / 2 - 2);\n\n  return buttonRows;\n};\n\nexport const createButtonBody = (pages: Pages) => {\n  const buttonRowCount =\n    pages.sorted.length * pages.byId[pages.sorted[0]].displayButtons.length;\n  let buttonRows = new Buffer(ROW_SIZE * buttonRowCount);\n  pages.sorted.forEach((pageId, pageIndex) => {\n    const page = pages.byId[pageId];\n    page.displayButtons.forEach((db, buttonIndex) => {\n      const rowOffset =\n        page.displayButtons.length * ROW_SIZE * pageIndex +\n        buttonIndex * ROW_SIZE;\n      buttonRows = writeAction(buttonRows, db, pages, rowOffset, false);\n      buttonRows = writeAction(buttonRows, db, pages, rowOffset, true);\n    });\n  });\n  return buttonRows;\n};\n\nexport const createImageBody = (pages: Pages) => {\n  let imageBuffer = new Buffer(0);\n  const bmpHeaderSize =\n    pages.byId[\n      pages.sorted[0]\n    ].displayButtons[0].display.convertedImage.readUInt32LE(10);\n  console.log(bmpHeaderSize);\n  pages.sorted.forEach((id) => {\n    const page = pages.byId[id];\n    page.displayButtons.forEach((db) => {\n      const hasLiveData = new Buffer(1);\n      hasLiveData.writeUInt8(\n        db.live.top !== \"none\" || db.live.bottom !== \"none\" ? 1 : 0,\n        0\n      );\n      imageBuffer = Buffer.concat([\n        imageBuffer,\n        hasLiveData,\n        optimizeForSSD1306(db.display.convertedImage.slice(bmpHeaderSize)),\n      ]);\n    });\n  });\n  return imageBuffer;\n};\n","import { Config } from \"../../generated\";\nimport { handleFileSelect } from \"../file/handleFileSelect\";\nimport { parseConfig } from \"./parseConfig\";\nconst isBuffer = (data: Buffer | FileList): data is Buffer => {\n  return !!(data as Buffer).byteLength;\n};\nexport const loadConfigFile = async (\n  fileList: FileList | Buffer,\n  setState: (newState: Config) => any\n) => {\n  const file = isBuffer(fileList)\n    ? fileList\n    : Buffer.from(await handleFileSelect(fileList[0]));\n\n  try {\n    const config = await parseConfig(file);\n    setState(config);\n  } catch (e: any) {\n    window.advancedAlert(\"Invalid config File\", (e as Error).message);\n  }\n};\n","export default \"data:image/png;base64,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\"","import { minFWVersion } from \"../../../package.json\";\nimport { TRANSMIT_BUFFER_SIZE } from \"../configFile/consts\";\nimport { optimizeForSSD1306 } from \"../configFile/ssd1306\";\nimport { _composeText } from \"../image/composeImage\";\nimport { compareVersions, sleep } from \"../misc/util\";\nimport { TauriSerialConnector } from \"./tauri-serial\";\nimport { WebSerialConnector } from \"./web-serial\";\nimport { PortsChangedCallback, SerialConnector, connectionStatus } from \".\";\nconst commands = {\n  init: 0x3,\n  getFirmwareVersion: 0x10,\n  readConfig: 0x20,\n  writeConfig: 0x21,\n  getHasJson: 0x22,\n  getCurrentPage: 0x30,\n  setCurrentPage: 0x31,\n  getPageCount: 0x32,\n  oledClear: 0x40,\n  oledPower: 0x41,\n  oledWriteLine: 0x42,\n  oledWriteData: 0x43,\n  oledSetParameters: 0x44,\n};\n\nexport class FDSerialAPI {\n  Serial: SerialConnector;\n  connected: connectionStatus = connectionStatus.disconnect;\n  portsChangedCallbacks: { [x: number]: PortsChangedCallback } = {};\n  ports: string[] = [];\n  connectedPortIndex: number = -1;\n  calls: Array<{ id: number; name?: string }> = [];\n\n  constructor() {\n    if ((window as any).__TAURI_IPC__)\n      this.Serial = new TauriSerialConnector(this.onPortsChanged);\n    else this.Serial = new WebSerialConnector(this.onPortsChanged);\n  }\n\n  async connect(portIndex: number) {\n    await this.Serial.connect(portIndex, true);\n    this.connected = connectionStatus.connect;\n  }\n  async disconnect() {\n    await this.Serial.disconnect();\n    this.connected = connectionStatus.disconnect;\n  }\n  async requestNewPort() {\n    await this.Serial.requestNewPort();\n  }\n\n  async getFirmwareVersion() {\n    await this.waitForTurn(\"getFirmwareVersion\");\n    if (this.connected === connectionStatus.disconnect)\n      this.throwError(\"not connected\");\n    this.Serial.flush();\n    await this.write([commands.init, commands.getFirmwareVersion]);\n    const fwVersion = await this.readAsciiLine();\n    // take care about legacy FWs\n    let result: string;\n    if (fwVersion === \"\")\n      return this.throwError(\"could not get firmware version\");\n    else result = fwVersion;\n    this.nextCall();\n    return result;\n  }\n\n  async getHasJson() {\n    await this.waitForTurn(\"getHasJson\");\n    if (this.connected === connectionStatus.disconnect)\n      this.throwError(\"not connected\");\n    this.Serial.flush();\n    await this.write([commands.init, commands.getHasJson]);\n    const hasJson = await this.readAsciiLine();\n    this.nextCall();\n    return hasJson === \"1\";\n  }\n\n  async getCurrentPage(): Promise<number> {\n    await this.waitForTurn(\"getCurrentPage\");\n    if (this.connected === connectionStatus.disconnect)\n      this.throwError(\"not connected\");\n    this.Serial.flush();\n    await this.write([commands.init, commands.getCurrentPage]);\n    const currentPage = await this.readAsciiLine();\n    const result = parseInt(currentPage);\n    this.nextCall();\n    return result;\n  }\n\n  async setCurrentPage(goTo: number) {\n    await this.waitForTurn(\"setCurrentPage\");\n    if (this.connected === connectionStatus.disconnect)\n      this.throwError(\"not connected\");\n    this.Serial.flush();\n    await this.write([commands.init, commands.setCurrentPage, goTo.toString()]);\n    this.nextCall();\n  }\n\n  async sendImageToScreen(image: Buffer, screen = 0) {\n    await this.waitForTurn(\"imageToScreen\");\n    const headerSize = image.readUInt32LE(10); // 130\n    const optimizedImage = optimizeForSSD1306(image.slice(headerSize));\n    await this.write([commands.init, commands.oledWriteData, screen]);\n    await this.Serial.write([...optimizedImage]);\n    await this.nextCall();\n  }\n\n  async writeToScreen(text: string, screen = 0, size = 1) {\n    await this.waitForTurn(\"writeToScreen\");\n    if (this.connected === connectionStatus.disconnect)\n      this.throwError(\"not connected\");\n    this.Serial.flush();\n    // await this.write([commands.init, commands.oledClear, screen]);\n    const image = await _composeText({\n      font: \"fonts/medium.fnt\",\n      text,\n      position: \"bottom\",\n    });\n    this.nextCall();\n    await this.sendImageToScreen(image, screen);\n  }\n\n  registerOnPortsChanged(callback: PortsChangedCallback): number {\n    const id = Object.keys(this.portsChangedCallbacks).length;\n    this.portsChangedCallbacks[id] = callback;\n    this.onPortsChanged(this.ports, this.connectedPortIndex);\n    return id;\n  }\n  clearOnPortsChanged(id: number) {\n    delete this.portsChangedCallbacks[id];\n  }\n  async readConfigFromSerial(\n    progressCallback?: (\n      received: number,\n      fileSize: number,\n      startedAt: Date\n    ) => void\n  ) {\n    const fwVersion = await this.getFirmwareVersion();\n    await this.waitForTurn(\"readConfigFromSerial\");\n\n    if (fwVersion.split(\".\")[0] === \"1\") {\n      this.throwError(\"unsupported 1.x firmware\");\n    } else {\n      await this.write([0x3, commands.readConfig]);\n    }\n    const fileSizeStr = await this.readAsciiLine();\n    if (fileSizeStr === \"unavailable\") this.throwError(\"no config available\");\n    if (!fileSizeStr.length) {\n      this.throwError(\"could not receive filesize\");\n    }\n    const fileSize = parseInt(fileSizeStr);\n    const data: number[] = [];\n    const transferStartedTime = new Date();\n    progressCallback?.(data.length, fileSize, transferStartedTime);\n    let i = 0;\n    while (data.length < fileSize) {\n      const received = await this.read();\n      if (!(i++ % 8)) {\n        progressCallback?.(data.length, fileSize, transferStartedTime);\n      }\n      if (received.length === 0) break;\n      data.push(...received);\n    }\n    progressCallback?.(data.length, fileSize, transferStartedTime);\n    const result = Buffer.from(data.slice(0, fileSize));\n    this.nextCall();\n    return result;\n  }\n\n  async writeConfigOverSerial(\n    config: Buffer,\n    progressCallback?: (\n      received: number,\n      fileSize: number,\n      startedAt: Date\n    ) => void\n  ) {\n    const fwVersion = await this.getFirmwareVersion();\n    await this.waitForTurn(\"writeConfigOverSerial\");\n    if (compareVersions(fwVersion, minFWVersion) === -1)\n      this.throwError(\n        `${fwVersion}: Unsupported firmware. Please update to version ${minFWVersion} or newer. Check the help page for more information.`\n      );\n    const fileSize = config.length.toString();\n\n    await this.write([0x3, commands.writeConfig]);\n    await this.write([fileSize]);\n    const transferStartedTime = new Date();\n    let sent = 0;\n    const sendAt = Math.pow(2, 13);\n    while (sent < config.length) {\n      const end = Math.min(config.length, sent + TRANSMIT_BUFFER_SIZE);\n      const chunk = config.slice(sent, end);\n      const numberChunk = [...chunk];\n      sent += numberChunk.length;\n      await this.Serial.write([...numberChunk]);\n      if (sent % sendAt === 0)\n        progressCallback?.(sent, config.length, transferStartedTime);\n    }\n    setTimeout(\n      () => progressCallback?.(sent, config.length, transferStartedTime),\n      0\n    );\n\n    this.nextCall();\n  }\n\n  async testOledParameters(\n    oledSpeed: number,\n    oledDelay: number,\n    preChargePeriod: number,\n    clockFreq: number,\n    clockDivider: number\n  ) {\n    await this.waitForTurn(\"testOledParameters\");\n    if (this.connected === connectionStatus.disconnect)\n      this.throwError(\"not connected\");\n    this.Serial.flush();\n    const refreshFrequency =\n      Math.min(15, clockFreq) * 16 + Math.min(15, clockDivider);\n    await this.write([\n      commands.init,\n      commands.oledSetParameters,\n      oledSpeed.toString(),\n      oledDelay.toString(),\n      preChargePeriod.toString(),\n      refreshFrequency.toString(),\n    ]);\n    this.nextCall();\n  }\n\n  async readSerialCommand() {\n    await this.waitForTurn(\"readSerialCommand\");\n    let result = this.Serial.readSerialCommand();\n    this.nextCall();\n    return result;\n  }\n\n  private async readAsciiLine() {\n    const result = await this.Serial.readLine(3000);\n\n    return String.fromCharCode(...result)\n      .replace(\"\\r\", \"\")\n      .replace(\"\\n\", \"\");\n  }\n  private async read(): Promise<number[]> {\n    return this.Serial.read(1000);\n  }\n\n  private async write(data: Array<number | string>) {\n    let mappedData: number[] = [];\n    data.forEach((date) => {\n      if (typeof date === \"string\") {\n        const encoder = new TextEncoder();\n        const ascii = [...encoder.encode(date)];\n        mappedData.push(...ascii);\n      } else {\n        mappedData.push(date);\n      }\n      mappedData.push(0xa);\n    });\n    // console.log(\"sending to freedeck\", mappedData);\n    await this.Serial.write(mappedData);\n  }\n\n  private onPortsChanged = async (\n    ports: string[],\n    connectedPortIndex: number\n  ) => {\n    this.ports = ports;\n    this.connectedPortIndex = connectedPortIndex;\n    if (this.connectedPortIndex === -1)\n      this.connected = connectionStatus.disconnect;\n    else this.connected = connectionStatus.connect;\n    Object.values(this.portsChangedCallbacks).forEach((cb) =>\n      cb(ports, connectedPortIndex)\n    );\n  };\n\n  private waitForTurn = async (name?: string) => {\n    let callId: number;\n    if (this.calls.length) {\n      callId = this.calls[this.calls.length - 1].id + 1;\n    } else {\n      callId = 0;\n    }\n    this.calls.push({ id: callId, name });\n    while (this.calls[0].id !== callId) {\n      await sleep(100);\n    }\n  };\n  private nextCall = () => {\n    this.calls.shift();\n  };\n  private throwError = (message: string) => {\n    this.nextCall();\n    throw new Error(message);\n  };\n}\n","import { invoke } from \"@tauri-apps/api\";\nimport { listen } from \"@tauri-apps/api/event\";\n\nimport { PortsChangedCallback, SerialConnector } from \".\";\n\nexport class TauriSerialConnector implements SerialConnector {\n  portsChangedCallback: PortsChangedCallback;\n  port = \"\";\n  ports: string[] = [];\n\n  constructor(portsChangedCallback: PortsChangedCallback) {\n    this.portsChangedCallback = portsChangedCallback;\n    this.port = \"\";\n    this.refreshPorts(true).then(() =>\n      listen<string[]>(\"ports_changed\", ({ payload }) => {\n        this.refreshPorts(true, payload);\n      })\n    );\n  }\n  async connect(portIndex: number, showError = false): Promise<void> {\n    try {\n      await invoke(\"open\", { path: this.ports[portIndex], baudRate: 4000000 });\n      this.port = this.ports[portIndex];\n      this.portsChangedCallback(this.ports, portIndex);\n    } catch (e: any) {\n      if (showError) alert(`${this.ports[portIndex]} - ${e as string}`);\n      throw e;\n    }\n  }\n  async disconnect(): Promise<void> {\n    await invoke(\"close\", { path: this.port });\n    this.port = \"\";\n    this.portsChangedCallback(this.ports, -1);\n  }\n  async refreshPorts(autoConnect: boolean, prePorts?: string[]) {\n    const ports: string[] = prePorts?.length\n      ? prePorts\n      : await invoke(\"get_ports\");\n    this.ports = ports;\n    if (this.ports.length === 0) return this.portsChangedCallback(ports, -1);\n    const portIndex = this.ports.findIndex((port) => port === this.port);\n    if (portIndex === -1 && autoConnect) {\n      let i = 0;\n      do {\n        try {\n          await this.connect(i);\n          return this.portsChangedCallback(ports, i);\n        } catch (e) {\n          i++;\n        }\n      } while (i < ports.length);\n    }\n    this.portsChangedCallback(ports, portIndex);\n  }\n  async requestNewPort(): Promise<void> {}\n\n  async write(data: number[] | Uint8Array) {\n    await invoke(\"write\", { data });\n  }\n\n  async flush() {\n    await invoke(\"flush\");\n  }\n\n  async read(timeout = 1000): Promise<number[]> {\n    let data: number[] = [];\n    do {\n      data = await invoke<number[]>(\"read\");\n    } while (data.length === 0);\n    return data;\n  }\n\n  async readLine(timeout = 1000): Promise<number[]> {\n    let data: number[] = [];\n    do {\n      data = await invoke<number[]>(\"read_line\").catch(() => []);\n    } while (data.length === 0);\n    return data;\n  }\n\n  async readSerialCommand() {\n    let start = (await this.readLine()).filter((x) => x !== 13 && x !== 10);\n    if (start[0] !== 3) {\n      console.log(start, await this.readLine());\n      throw new Error(\"wrong start byte\");\n    }\n    let command = (await this.readLine()).filter(\n      (x) => x !== 13 && x !== 10\n    )[0];\n    if (command < 16) throw new Error(\"invalid command\");\n    const data = (await this.readLine()).filter((x) => x !== 13 && x !== 10);\n    const args = String.fromCharCode(...data)\n      .split(\"\\t\")\n      .map((x) => parseInt(x));\n    return { command, args };\n  }\n}\n","import { TRANSMIT_BUFFER_SIZE } from \"../configFile/consts\";\nimport { isMacOS, sleep } from \"../misc/util\";\nimport { PortsChangedCallback, SerialConnector, connectionStatus } from \".\";\nexport class WebSerialConnector implements SerialConnector {\n  buffer: number[];\n  port?: SerialPort;\n  writer?: WritableStreamDefaultWriter;\n  bufferWrite?: WritableStream;\n  abortController?: AbortController;\n  reader?: Promise<any>;\n  portsChangedCallback: PortsChangedCallback;\n  readLoop?: number;\n  connectedPortIndex: number = -1;\n  ports: SerialPort[] = [];\n  constructor(portsChangedCallback: PortsChangedCallback) {\n    this.buffer = [];\n    this.portsChangedCallback = portsChangedCallback;\n    navigator.serial.addEventListener(\"connect\", () => this.devicesChanged());\n    navigator.serial.addEventListener(\"disconnect\", () =>\n      this.devicesChanged()\n    );\n    this.devicesChanged();\n  }\n\n  devicesChanged = async () => {\n    const newPortIndex = await (await this.refreshPorts()).connectedPortIndex;\n    if (this.ports.length > 0) {\n      this.connect(newPortIndex);\n    } else {\n      this.closePort();\n    }\n\n    this.portsChangedCallback(\n      await this.filterPorts(),\n      this.connectedPortIndex\n    );\n  };\n\n  async connect(portIndex: number) {\n    if (this.connectedPortIndex !== -1) await this.closePort();\n    await this.openPort(this.ports[portIndex]);\n    this.connectedPortIndex = portIndex;\n    this.portsChangedCallback(\n      await this.filterPorts(),\n      this.connectedPortIndex\n    );\n  }\n\n  async disconnect(): Promise<void> {\n    this.portsChangedCallback(await this.filterPorts(), -1);\n    await this.closePort();\n  }\n\n  async refreshPorts() {\n    let ports = await navigator.serial.getPorts();\n    this.ports = ports;\n    if (this.ports.length === 0)\n      return { status: connectionStatus.disconnect, connectedPortIndex: -1 };\n    else\n      return {\n        status: connectionStatus.connect,\n        connectedPortIndex: 0,\n      };\n  }\n\n  async requestNewPort(): Promise<void> {\n    await navigator.serial.requestPort({\n      filters: [\n        { usbVendorId: 0x2341, usbProductId: 0x4010 },\n      ],\n    });\n    await this.devicesChanged();\n  }\n\n  async write(data: number[]) {\n    if (!this.writer) throw new Error(\"no writer exists for this connection\");\n    if (isMacOS) {\n      if (data.length > 62) {\n        for (let i = 0; i < data.length; i += 62) {\n          await this.write(data.slice(i, i + 62));\n        }\n        return;\n      }\n\n      const arrBuff = Buffer.from([...data]);\n      await this.writer.write(arrBuff);\n      await sleep(1);\n    } else {\n      const arrBuff = new Buffer([...data]);\n      await this.writer.write(arrBuff);\n      return;\n    }\n  }\n\n  flush() {\n    this.buffer = [];\n    return;\n  }\n\n  async read(readTimeout = 1000): Promise<number[]> {\n    const startTime = new Date().getTime();\n    while (!this.buffer.length && new Date().getTime() - startTime < 10000) {\n      await sleep(10);\n    }\n    if (!this.buffer.length) return [];\n    const data = [...this.buffer.splice(0, Math.min(this.buffer.length, 2560))];\n\n    return data;\n  }\n\n  async readSerialCommand(): Promise<{ command: number; args: number[] }> {\n    throw new Error(\"not implemented\");\n  }\n\n  async readLine(readLineTimeout = 1000): Promise<number[]> {\n    const startTime = new Date().getTime();\n    while (\n      !this.buffer.find((byte) => byte === 0xa) &&\n      new Date().getTime() - startTime < readLineTimeout\n    ) {\n      await sleep(10);\n    }\n\n    if (!this.buffer.length || !this.buffer.find((byte) => byte === 0xa)) {\n      return [];\n    }\n    const index = this.buffer.findIndex((byte) => byte === 0xa);\n    const line = this.buffer.slice(0, index - 1);\n    this.buffer = this.buffer.slice(index + 1);\n\n    return line;\n  }\n\n  private async filterPorts() {\n    let ports: string[] = [];\n    let i = 0;\n    for (const port of this.ports) {\n      const info = await port.getInfo();\n      if (info.usbVendorId === 0x2341 && info.usbProductId === 0x4010) {\n        ports.push(\"Fresh-FreeDeck-Micro-\" + i);\n      } else if (info.usbVendorId === 0xf1f0 && info.usbProductId === 0x4005) {\n        ports.push(\"FreeDeck-Pico-\" + i);\n      }\n      i++;\n    }\n    return ports;\n  }\n\n  private async openPort(port: SerialPort) {\n    try {\n      await port.open({ baudRate: 4000000, bufferSize: TRANSMIT_BUFFER_SIZE });\n    } catch (e) {\n      return;\n    }\n    if (!port.writable) throw new Error(\"port is not writable\");\n    this.port = port;\n    this.writer = port.writable.getWriter();\n    this.buffer = [];\n\n    const self = this;\n\n    this.abortController = new AbortController();\n    this.bufferWrite = new WritableStream({\n      write(chunk) {\n        // console.log(String.fromCharCode.apply(null, chunk));\n        self.buffer = [...self.buffer, ...chunk];\n      },\n    });\n    if (!port.readable) throw new Error(\"port is not readable\");\n    this.reader = port.readable.pipeTo(this.bufferWrite, {\n      signal: this.abortController.signal,\n    });\n  }\n\n  private async closePort() {\n    // thx w3c for this\n    this.connectedPortIndex = -1;\n    await this.writer?.releaseLock();\n    this.abortController?.abort();\n    await this.writer?.abort().catch(() => {});\n    await this.writer?.close().catch(() => {});\n    await this.writer?.releaseLock();\n    await this.bufferWrite?.abort().catch(() => {});\n    await this.bufferWrite?.close().catch(() => {});\n    await this.port?.readable?.cancel().catch(() => {});\n    await this.bufferWrite?.abort().catch(() => {});\n    await this.bufferWrite?.close().catch(() => {});\n    await this.reader?.catch(() => {});\n    this.port?.close().catch(() => {});\n    this.buffer = [];\n    this.port = undefined;\n    this.reader = undefined;\n  }\n}\n","import { cloneDeep } from \"lodash\";\nimport { deflate } from \"pako\";\n\nimport { Config } from \"../../generated\";\n\nexport const slimConfig = (state: Config) => {\n  let slimState = cloneDeep(state);\n  for (let i = 0; i < slimState.pages.sorted.length; i++) {\n    const id = slimState.pages.sorted[i];\n    const page = slimState.pages.byId[id];\n    for (const button of page.displayButtons) {\n      delete (button.display as any).convertedImage;\n      delete (button.display as any).previewImage;\n    }\n  }\n  return slimState;\n};\n\nexport const createFooter = (state: Config): Buffer => {\n  //save this at the end of the config\n  let slimState = slimConfig(state);\n  let slimString = JSON.stringify(slimState);\n  let deflated = deflate(slimString);\n  return Buffer.from(deflated);\n};\n","import { ROW_SIZE } from \"./consts\";\n\n/**\n * @param width number of displays horizontal.\n * @param height number of displays vertical.\n * @param brightness default brightness 0-255.\n * @param numberOfPages 0-65535.\n * @example ```txt\n * The header is 16 bytes long:\n * - 0: width\n * - 1: height\n * - 2-3: image data offset (numberOfPages * width * height + 1)\n * - 4: brightness\n * - 5-6: display timeout (0=always on)\n * - 7: oled speed (used for freedeck pico)\n * - 8: oled delay (used for freedeck ino)\n * - 9: oled preChargePeriod (to adjust coil whine)\n * - 10: oled refreshFrequency (to adjust coil whine and burn in)\n * - 11: save json (is json is saved in the config file)\n * ```\n */\nexport const createHeader = (\n  width: number,\n  height: number,\n  brightness: number,\n  screenTimeout: number,\n  oledSpeed: number,\n  oledDelay: number,\n  preChargePeriod: number,\n  refreshFrequency: number,\n  saveJson: boolean,\n  numberOfPages: number\n): Buffer => {\n  // const header = new Buffer(16);\n  const header = Buffer.alloc(ROW_SIZE);\n\n  // write width and height\n  header.writeUInt8(width, 0);\n  header.writeUInt8(height, 1);\n\n  // check that we dont have more than 65535 pages\n  if (Math.pow(2, 16) - 1 < numberOfPages) {\n    alert(\"too many pages\");\n    throw new Error(\"too many pages\");\n  }\n  // write the \"row\" offset where images begin\n  // one row is 16 bytes, so we write the actual byte offset value divided by 16\n  // we add 1 for the header row\n  header.writeUInt16LE(numberOfPages * width * height + 1, 2);\n  header.writeUInt8(brightness, 4);\n  header.writeUInt16LE(screenTimeout, 5);\n  header.writeUInt8(oledSpeed, 7);\n  header.writeUInt8(oledDelay, 8);\n  header.writeUInt8(preChargePeriod, 9);\n  header.writeUInt8(refreshFrequency, 10);\n  header.writeUInt8(saveJson ? 1 : 0, 11);\n  return header;\n};\n","import { useEffect } from \"react\";\nimport * as workerInterval from \"worker-interval\";\n\nimport { StateRef } from \"../../../App\";\nimport { getEmptyConvertedImage } from \"../../../definitions/emptyConvertedImage\";\nimport { monochrome128by64BitmapHeader } from \"../../../definitions/headers\";\nimport { Config, DisplayButton, LiveMode } from \"../../../generated\";\nimport { AppState } from \"../../../states/appState\";\nimport { colorBitmapToMonochromeBitmap } from \"../../image/colorToMonoBitmap\";\nimport { _composeText } from \"../../image/composeImage\";\n\nconst composeGraph = async (\n  label: string,\n  values: number[],\n  unit: string,\n  line: boolean,\n  half = false\n) => {\n  const Jimp = (await import(\"jimp\")).default;\n  let image = new Jimp(128, half ? 32 : 64, \"#000000\");\n  const fontMedium = await Jimp.loadFont(\"fonts/medium.fnt\");\n  for (let i = 0; i < values.length; i++) {\n    const value = values[i];\n    const y = Math.round((value / 105) * (half ? 32 : 64));\n    if (line) {\n      image.setPixelColor(0xffffff, i * 2, half ? 32 - y : 64 - y);\n      image.setPixelColor(0xffffff, i * 2, half ? 32 - y - 1 : 64 - y - 1);\n      image.setPixelColor(0xffffff, i * 2 + 1, half ? 32 - y : 64 - y);\n      image.setPixelColor(0xffffff, i * 2 + 1, half ? 32 - y - 1 : 64 - y - 1);\n    } else {\n      const bar = new Jimp(2, y, \"#ffffff\");\n      image.composite(bar, i * 2, half ? 32 - y : 64 - y);\n    }\n  }\n  const text = new Jimp(128, half ? 32 : 64);\n  text.print(\n    fontMedium,\n    4,\n    half ? 10 : 40,\n    `${label}: ${values[values.length - 1].toFixed(1)}${unit}`\n  );\n  for (let x = 0; x < image.getWidth(); x++) {\n    for (let y = 0; y < image.getHeight(); y++) {\n      const color = Jimp.intToRGBA(text.getPixelColor(x, y));\n      const hasText = color.r >= 128 && color.g >= 128 && color.b >= 128;\n      if (hasText) {\n        const color = Jimp.intToRGBA(image.getPixelColor(x, y));\n        const hasImage = color.r >= 128 && color.g >= 128 && color.b >= 128;\n        image.setPixelColor(hasImage ? 0 : 0xffffff, x, y);\n      }\n    }\n  }\n  const bitmapBuffer = await image.getBufferAsync(\"image/bmp\");\n  return await colorBitmapToMonochromeBitmap(bitmapBuffer, 128, half ? 32 : 64);\n};\n\nconst composeDualData = async (\n  liveModeTop: LiveMode,\n  liveModeBottom: LiveMode,\n  system: AppState[\"system\"]\n) => {\n  let topImage = await composeSingleData(liveModeTop, system, true);\n  let bottomImage = await composeSingleData(liveModeBottom, system, true);\n  const headerSize = topImage.readUInt32LE(10); // 130\n  const topHalf = topImage.slice(headerSize);\n  const bottomHalf = bottomImage.slice(headerSize);\n  const newImage = Buffer.concat([\n    Buffer.from(monochrome128by64BitmapHeader()),\n    topHalf,\n    bottomHalf,\n  ]);\n  return newImage;\n};\n\nconst composeSingleData = async (\n  liveMode: LiveMode,\n  system: AppState[\"system\"],\n  half = false\n) => {\n  if (liveMode === \"cpu_temp\")\n    return await _composeText(\n      {\n        font: \"fonts/medium.fnt\",\n        position: \"bottom\",\n        text: `CPU: ${system.cpuTemp[system.cpuTemp.length - 1].toFixed(1)}C`,\n      },\n      128,\n      half ? 32 : 64\n    );\n  if (liveMode === \"gpu_temp\")\n    return await _composeText(\n      {\n        font: \"fonts/medium.fnt\",\n        position: \"bottom\",\n        text: `GPU: ${system.gpuTemp[system.gpuTemp.length - 1].toFixed(1)}C`,\n      },\n      128,\n      half ? 32 : 64\n    );\n  if (liveMode === \"cpu_temp_graph\") {\n    return await composeGraph(\"CPU\", system.cpuTemp, \"C\", false, half);\n  }\n  if (liveMode === \"gpu_temp_graph\") {\n    return await composeGraph(\"GPU\", system.gpuTemp, \"C\", false, half);\n  }\n  if (liveMode === \"cpu_temp_line\") {\n    return await composeGraph(\"CPU\", system.cpuTemp, \"C\", true, half);\n  }\n  if (liveMode === \"gpu_temp_line\") {\n    return await composeGraph(\"GPU\", system.gpuTemp, \"C\", true, half);\n  }\n  return getEmptyConvertedImage();\n};\n\nconst composeLiveDisplay = async (\n  db: DisplayButton,\n  system: AppState[\"system\"]\n) => {\n  if (!db.live) return;\n  if (\n    (db.live.top !== \"none\" && db.live.bottom === \"none\") ||\n    (db.live.top === \"none\" && db.live.bottom !== \"none\")\n  ) {\n    const liveData = db.live.top === \"none\" ? db.live.bottom : db.live.top;\n    return await composeSingleData(liveData, system);\n  } else if (db.live.top !== \"none\" && db.live.bottom !== \"none\") {\n    return await composeDualData(db.live.top, db.live.bottom, system);\n  }\n};\n\nconst updateLiveDisplays = async (\n  configState: Config,\n  appState: AppState,\n  refData: StateRef\n) => {\n  let deck = refData.current.deck;\n  if (deck === undefined || deck.dontSwitchPage || deck.currentPage === null)\n    return;\n  const pageId = configState.pages.sorted[deck.currentPage];\n  const page = configState.pages.byId[pageId];\n  if (!page) return;\n  if (!appState.serialApi?.connected) return;\n  let dbIndex = 0;\n  for (const db of page.displayButtons) {\n    const image = await composeLiveDisplay(db, appState.system);\n    if (image) {\n      await appState.serialApi\n        ?.sendImageToScreen(image, dbIndex)\n        .catch(() => {});\n    }\n    dbIndex++;\n  }\n};\nexport const useLiveData = (\n  configState: Config,\n  appState: AppState,\n  refData: StateRef\n) => {\n  useEffect(() => {\n    if (!(window as any).__TAURI_IPC__) return;\n\n    let isCancelled = false;\n    let unlistenSerialCommand: string | null;\n    const startListen = async () => {\n      if (isCancelled) return;\n      setTimeout(() => {\n        updateLiveDisplays(configState, appState, refData);\n      });\n      unlistenSerialCommand = workerInterval.setInterval(async () => {\n        updateLiveDisplays(configState, appState, refData);\n      }, 1000);\n    };\n\n    startListen();\n\n    return () => {\n      isCancelled = true;\n      unlistenSerialCommand &&\n        workerInterval.clearInterval(unlistenSerialCommand);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [configState, appState.serialApi, appState.deck]);\n};\n","import { Collection, Page } from \"../../generated\";\nexport const getPageName = (pageId: string, page?: Page) => {\n  return page?.name ? page.name : pageId.slice(-4);\n};\n\nexport const getCollectionName = (\n  collectionId: string,\n  collection?: Collection\n) => {\n  return collection?.name ? collection.name : collectionId.slice(-4);\n};\n\nexport const isMacOS = navigator.userAgent.indexOf(\"Mac OS X\") !== -1;\n\nexport function sleep(ms: number) {\n  return new Promise<void>((resolve) =>\n    setTimeout(() => {\n      try {\n        resolve();\n      } catch (e) {\n        console.log(e);\n      }\n    }, ms)\n  );\n}\n\nexport function compareVersions(a: string, b: string) {\n  const aParts = a.split(\".\");\n  const bParts = b.split(\".\");\n  for (let i = 0; i < Math.max(aParts.length, bParts.length); i++) {\n    const aPart = parseInt(aParts[i] || \"0\");\n    const bPart = parseInt(bParts[i] || \"0\");\n    if (aPart < bPart) return -1;\n    if (aPart > bPart) return 1;\n  }\n  return 0;\n}\n","import c from \"clsx\";\nimport React from \"react\";\n\nexport const TitleBox: React.FC<{\n  className?: string;\n  title: string;\n  center?: boolean;\n}> = ({ className, children, title, center = false }) => {\n  return (\n    <div\n      className={c(\n        \"p-6 rounded-xl bg-gradient-to-b bg-gray-800 shadow-2xl\",\n        className\n      )}\n    >\n      <div className={c(\"text-2xl\", \"mb-8\", center && \"flex justify-center\")}>\n        {title}\n      </div>\n      <div>{children}</div>\n    </div>\n  );\n};\n","import { gql } from '@apollo/client';\nimport * as Apollo from '@apollo/client';\nexport type Maybe<T> = T | null | undefined;\nexport type Exact<T extends { [key: string]: unknown }> = { [K in keyof T]: T[K] };\nexport type MakeOptional<T, K extends keyof T> = Omit<T, K> & { [SubKey in K]?: Maybe<T[SubKey]> };\nexport type MakeMaybe<T, K extends keyof T> = Omit<T, K> & { [SubKey in K]: Maybe<T[SubKey]> };\nconst defaultOptions =  {}\n/** All built-in and custom scalars, mapped to their actual values */\nexport type Scalars = {\n  ID: string;\n  String: string;\n  Boolean: boolean;\n  Int: number;\n  Float: number;\n  /** The `JSON` scalar type represents JSON values as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf). */\n  JSON: any;\n};\n\nexport type Collection = {\n  __typename?: 'Collection';\n  name: Scalars['String'];\n  tags: Array<Scalars['String']>;\n  pages: Array<Page>;\n  createdBy: User;\n  id: Scalars['String'];\n  upvotes: Scalars['String'];\n};\n\nexport type CollectionCreateInput = {\n  name: Scalars['String'];\n  tags: Array<Scalars['String']>;\n  pageIds?: Maybe<Array<Scalars['String']>>;\n};\n\nexport type CollectionUpdateInput = {\n  name?: Maybe<Scalars['String']>;\n  tags?: Maybe<Array<Scalars['String']>>;\n  pageIds?: Maybe<Array<Scalars['String']>>;\n};\n\n\nexport type Mutation = {\n  __typename?: 'Mutation';\n  collectionCreate: Scalars['String'];\n  collectionUpdate: Scalars['Boolean'];\n  collectionToggleUpvote: Scalars['Boolean'];\n  pageCreate: Scalars['String'];\n  pageUpdate: Page;\n  pageToggleUpvote: Scalars['Boolean'];\n};\n\n\nexport type MutationCollectionCreateArgs = {\n  input: CollectionCreateInput;\n};\n\n\nexport type MutationCollectionUpdateArgs = {\n  input: CollectionUpdateInput;\n  id: Scalars['String'];\n};\n\n\nexport type MutationCollectionToggleUpvoteArgs = {\n  id: Scalars['String'];\n};\n\n\nexport type MutationPageCreateArgs = {\n  input: PageCreateInput;\n};\n\n\nexport type MutationPageUpdateArgs = {\n  input: PageUpdateInput;\n};\n\n\nexport type MutationPageToggleUpvoteArgs = {\n  id: Scalars['String'];\n};\n\nexport type Page = {\n  __typename?: 'Page';\n  id: Scalars['String'];\n  tags: Array<Scalars['String']>;\n  width: Scalars['Int'];\n  height: Scalars['Int'];\n  data: Scalars['JSON'];\n  createdBy: User;\n  forkedFrom?: Maybe<Page>;\n  upvotes: Scalars['Float'];\n};\n\nexport type PageCreateInput = {\n  id: Scalars['String'];\n  tags: Array<Scalars['String']>;\n  width: Scalars['Int'];\n  height: Scalars['Int'];\n  data: Scalars['JSON'];\n  forkedFromId?: Maybe<Scalars['String']>;\n};\n\nexport type PageUpdateInput = {\n  id?: Maybe<Scalars['String']>;\n  tags?: Maybe<Array<Scalars['String']>>;\n  width?: Maybe<Scalars['Int']>;\n  height?: Maybe<Scalars['Int']>;\n  data?: Maybe<Scalars['JSON']>;\n};\n\nexport type PaginatedPages = {\n  __typename?: 'PaginatedPages';\n  hasNext: Scalars['Boolean'];\n  pages: Array<Page>;\n};\n\nexport type Pagination = {\n  after?: Maybe<Scalars['String']>;\n  before?: Maybe<Scalars['String']>;\n};\n\nexport type Query = {\n  __typename?: 'Query';\n  myCollections: Array<Collection>;\n  searchCollections: Array<Collection>;\n  collection: Collection;\n  page: Page;\n  myPages: Array<Page>;\n  searchPages: PaginatedPages;\n  user: User;\n};\n\n\nexport type QuerySearchCollectionsArgs = {\n  searchTerm: Scalars['String'];\n};\n\n\nexport type QueryCollectionArgs = {\n  id?: Maybe<Scalars['String']>;\n};\n\n\nexport type QueryPageArgs = {\n  id: Scalars['String'];\n};\n\n\nexport type QuerySearchPagesArgs = {\n  pagination?: Maybe<Pagination>;\n  searchTerm: Scalars['String'];\n};\n\n\nexport type QueryUserArgs = {\n  id?: Maybe<Scalars['String']>;\n};\n\nexport type User = {\n  __typename?: 'User';\n  displayName: Scalars['String'];\n  avatar: Scalars['String'];\n  id: Scalars['String'];\n};\n\nexport type PageFieldsFragment = (\n  { __typename?: 'Page' }\n  & Pick<Page, 'id' | 'data' | 'width' | 'height' | 'upvotes' | 'tags'>\n  & { createdBy: (\n    { __typename?: 'User' }\n    & Pick<User, 'id' | 'avatar' | 'displayName'>\n  ), forkedFrom?: Maybe<(\n    { __typename?: 'Page' }\n    & Pick<Page, 'id'>\n  )> }\n);\n\nexport type SearchPagesQueryVariables = Exact<{\n  searchTerm: Scalars['String'];\n  before?: Maybe<Scalars['String']>;\n  after?: Maybe<Scalars['String']>;\n}>;\n\n\nexport type SearchPagesQuery = (\n  { __typename?: 'Query' }\n  & { searchPages: (\n    { __typename?: 'PaginatedPages' }\n    & Pick<PaginatedPages, 'hasNext'>\n    & { pages: Array<(\n      { __typename?: 'Page' }\n      & PageFieldsFragment\n    )> }\n  ) }\n);\n\nexport type MeQueryVariables = Exact<{ [key: string]: never; }>;\n\n\nexport type MeQuery = (\n  { __typename?: 'Query' }\n  & { user: (\n    { __typename?: 'User' }\n    & Pick<User, 'id' | 'avatar' | 'displayName'>\n  ) }\n);\n\nexport type MyPagesQueryVariables = Exact<{ [key: string]: never; }>;\n\n\nexport type MyPagesQuery = (\n  { __typename?: 'Query' }\n  & { myPages: Array<(\n    { __typename?: 'Page' }\n    & PageFieldsFragment\n  )> }\n);\n\nexport type PageQueryVariables = Exact<{\n  id: Scalars['String'];\n}>;\n\n\nexport type PageQuery = (\n  { __typename?: 'Query' }\n  & { page: (\n    { __typename?: 'Page' }\n    & PageFieldsFragment\n  ) }\n);\n\nexport type PageCreateMutationVariables = Exact<{\n  input: PageCreateInput;\n}>;\n\n\nexport type PageCreateMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'pageCreate'>\n);\n\nexport type PageUpdateMutationVariables = Exact<{\n  input: PageUpdateInput;\n}>;\n\n\nexport type PageUpdateMutation = (\n  { __typename?: 'Mutation' }\n  & { pageUpdate: (\n    { __typename?: 'Page' }\n    & Pick<Page, 'id'>\n  ) }\n);\n\nexport const PageFieldsFragmentDoc = gql`\n    fragment PageFields on Page {\n  id\n  data\n  width\n  height\n  createdBy {\n    id\n    avatar\n    displayName\n  }\n  forkedFrom {\n    id\n  }\n  upvotes\n  tags\n}\n    `;\nexport const SearchPagesDocument = gql`\n    query searchPages($searchTerm: String!, $before: String, $after: String) {\n  searchPages(\n    searchTerm: $searchTerm\n    pagination: {before: $before, after: $after}\n  ) {\n    hasNext\n    pages {\n      ...PageFields\n    }\n  }\n}\n    ${PageFieldsFragmentDoc}`;\n\n/**\n * __useSearchPagesQuery__\n *\n * To run a query within a React component, call `useSearchPagesQuery` and pass it any options that fit your needs.\n * When your component renders, `useSearchPagesQuery` returns an object from Apollo Client that contains loading, error, and data properties\n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useSearchPagesQuery({\n *   variables: {\n *      searchTerm: // value for 'searchTerm'\n *      before: // value for 'before'\n *      after: // value for 'after'\n *   },\n * });\n */\nexport function useSearchPagesQuery(baseOptions: Apollo.QueryHookOptions<SearchPagesQuery, SearchPagesQueryVariables>) {\n        const options = {...defaultOptions, ...baseOptions}\n        return Apollo.useQuery<SearchPagesQuery, SearchPagesQueryVariables>(SearchPagesDocument, options);\n      }\nexport function useSearchPagesLazyQuery(baseOptions?: Apollo.LazyQueryHookOptions<SearchPagesQuery, SearchPagesQueryVariables>) {\n          const options = {...defaultOptions, ...baseOptions}\n          return Apollo.useLazyQuery<SearchPagesQuery, SearchPagesQueryVariables>(SearchPagesDocument, options);\n        }\nexport type SearchPagesQueryHookResult = ReturnType<typeof useSearchPagesQuery>;\nexport type SearchPagesLazyQueryHookResult = ReturnType<typeof useSearchPagesLazyQuery>;\nexport type SearchPagesQueryResult = Apollo.QueryResult<SearchPagesQuery, SearchPagesQueryVariables>;\nexport const MeDocument = gql`\n    query me {\n  user {\n    id\n    avatar\n    displayName\n  }\n}\n    `;\n\n/**\n * __useMeQuery__\n *\n * To run a query within a React component, call `useMeQuery` and pass it any options that fit your needs.\n * When your component renders, `useMeQuery` returns an object from Apollo Client that contains loading, error, and data properties\n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useMeQuery({\n *   variables: {\n *   },\n * });\n */\nexport function useMeQuery(baseOptions?: Apollo.QueryHookOptions<MeQuery, MeQueryVariables>) {\n        const options = {...defaultOptions, ...baseOptions}\n        return Apollo.useQuery<MeQuery, MeQueryVariables>(MeDocument, options);\n      }\nexport function useMeLazyQuery(baseOptions?: Apollo.LazyQueryHookOptions<MeQuery, MeQueryVariables>) {\n          const options = {...defaultOptions, ...baseOptions}\n          return Apollo.useLazyQuery<MeQuery, MeQueryVariables>(MeDocument, options);\n        }\nexport type MeQueryHookResult = ReturnType<typeof useMeQuery>;\nexport type MeLazyQueryHookResult = ReturnType<typeof useMeLazyQuery>;\nexport type MeQueryResult = Apollo.QueryResult<MeQuery, MeQueryVariables>;\nexport const MyPagesDocument = gql`\n    query myPages {\n  myPages {\n    ...PageFields\n  }\n}\n    ${PageFieldsFragmentDoc}`;\n\n/**\n * __useMyPagesQuery__\n *\n * To run a query within a React component, call `useMyPagesQuery` and pass it any options that fit your needs.\n * When your component renders, `useMyPagesQuery` returns an object from Apollo Client that contains loading, error, and data properties\n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useMyPagesQuery({\n *   variables: {\n *   },\n * });\n */\nexport function useMyPagesQuery(baseOptions?: Apollo.QueryHookOptions<MyPagesQuery, MyPagesQueryVariables>) {\n        const options = {...defaultOptions, ...baseOptions}\n        return Apollo.useQuery<MyPagesQuery, MyPagesQueryVariables>(MyPagesDocument, options);\n      }\nexport function useMyPagesLazyQuery(baseOptions?: Apollo.LazyQueryHookOptions<MyPagesQuery, MyPagesQueryVariables>) {\n          const options = {...defaultOptions, ...baseOptions}\n          return Apollo.useLazyQuery<MyPagesQuery, MyPagesQueryVariables>(MyPagesDocument, options);\n        }\nexport type MyPagesQueryHookResult = ReturnType<typeof useMyPagesQuery>;\nexport type MyPagesLazyQueryHookResult = ReturnType<typeof useMyPagesLazyQuery>;\nexport type MyPagesQueryResult = Apollo.QueryResult<MyPagesQuery, MyPagesQueryVariables>;\nexport const PageDocument = gql`\n    query page($id: String!) {\n  page(id: $id) {\n    ...PageFields\n  }\n}\n    ${PageFieldsFragmentDoc}`;\n\n/**\n * __usePageQuery__\n *\n * To run a query within a React component, call `usePageQuery` and pass it any options that fit your needs.\n * When your component renders, `usePageQuery` returns an object from Apollo Client that contains loading, error, and data properties\n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = usePageQuery({\n *   variables: {\n *      id: // value for 'id'\n *   },\n * });\n */\nexport function usePageQuery(baseOptions: Apollo.QueryHookOptions<PageQuery, PageQueryVariables>) {\n        const options = {...defaultOptions, ...baseOptions}\n        return Apollo.useQuery<PageQuery, PageQueryVariables>(PageDocument, options);\n      }\nexport function usePageLazyQuery(baseOptions?: Apollo.LazyQueryHookOptions<PageQuery, PageQueryVariables>) {\n          const options = {...defaultOptions, ...baseOptions}\n          return Apollo.useLazyQuery<PageQuery, PageQueryVariables>(PageDocument, options);\n        }\nexport type PageQueryHookResult = ReturnType<typeof usePageQuery>;\nexport type PageLazyQueryHookResult = ReturnType<typeof usePageLazyQuery>;\nexport type PageQueryResult = Apollo.QueryResult<PageQuery, PageQueryVariables>;\nexport const PageCreateDocument = gql`\n    mutation pageCreate($input: PageCreateInput!) {\n  pageCreate(input: $input)\n}\n    `;\nexport type PageCreateMutationFn = Apollo.MutationFunction<PageCreateMutation, PageCreateMutationVariables>;\n\n/**\n * __usePageCreateMutation__\n *\n * To run a mutation, you first call `usePageCreateMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `usePageCreateMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [pageCreateMutation, { data, loading, error }] = usePageCreateMutation({\n *   variables: {\n *      input: // value for 'input'\n *   },\n * });\n */\nexport function usePageCreateMutation(baseOptions?: Apollo.MutationHookOptions<PageCreateMutation, PageCreateMutationVariables>) {\n        const options = {...defaultOptions, ...baseOptions}\n        return Apollo.useMutation<PageCreateMutation, PageCreateMutationVariables>(PageCreateDocument, options);\n      }\nexport type PageCreateMutationHookResult = ReturnType<typeof usePageCreateMutation>;\nexport type PageCreateMutationResult = Apollo.MutationResult<PageCreateMutation>;\nexport type PageCreateMutationOptions = Apollo.BaseMutationOptions<PageCreateMutation, PageCreateMutationVariables>;\nexport const PageUpdateDocument = gql`\n    mutation pageUpdate($input: PageUpdateInput!) {\n  pageUpdate(input: $input) {\n    id\n  }\n}\n    `;\nexport type PageUpdateMutationFn = Apollo.MutationFunction<PageUpdateMutation, PageUpdateMutationVariables>;\n\n/**\n * __usePageUpdateMutation__\n *\n * To run a mutation, you first call `usePageUpdateMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `usePageUpdateMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [pageUpdateMutation, { data, loading, error }] = usePageUpdateMutation({\n *   variables: {\n *      input: // value for 'input'\n *   },\n * });\n */\nexport function usePageUpdateMutation(baseOptions?: Apollo.MutationHookOptions<PageUpdateMutation, PageUpdateMutationVariables>) {\n        const options = {...defaultOptions, ...baseOptions}\n        return Apollo.useMutation<PageUpdateMutation, PageUpdateMutationVariables>(PageUpdateDocument, options);\n      }\nexport type PageUpdateMutationHookResult = ReturnType<typeof usePageUpdateMutation>;\nexport type PageUpdateMutationResult = Apollo.MutationResult<PageUpdateMutation>;\nexport type PageUpdateMutationOptions = Apollo.BaseMutationOptions<PageUpdateMutation, PageUpdateMutationVariables>;","export interface IKeys {\r\n  [key: string]: { hid: number; js: string } | undefined;\r\n}\r\nexport const keys: IKeys = {\r\n  Ctrl: { hid: 0xe0, js: \"ControlLeft\" },\r\n  Shift: { hid: 0xe1, js: \"ShiftLeft\" },\r\n  Alt: { hid: 0xe2, js: \"AltLeft\" },\r\n  Win: { hid: 0xe3, js: \"MetaLeft\" },\r\n  CtrlRight: { hid: 0xe4, js: \"ControlRight\" },\r\n  ShiftRight: { hid: 0xe5, js: \"ShiftRight\" },\r\n  AltGr: { hid: 0xe6, js: \"AltRight\" },\r\n  WinRight: { hid: 0xe7, js: \"MetaRight\" },\r\n  \"#1\": { hid: 30, js: \"Digit1\" },\r\n  \"#2\": { hid: 31, js: \"Digit2\" },\r\n  \"#3\": { hid: 32, js: \"Digit3\" },\r\n  \"#4\": { hid: 33, js: \"Digit4\" },\r\n  \"#5\": { hid: 34, js: \"Digit5\" },\r\n  \"#6\": { hid: 35, js: \"Digit6\" },\r\n  \"#7\": { hid: 36, js: \"Digit7\" },\r\n  \"#8\": { hid: 37, js: \"Digit8\" },\r\n  \"#9\": { hid: 38, js: \"Digit9\" },\r\n  \"#0\": { hid: 39, js: \"Digit0\" },\r\n  F1: { hid: 0x3a, js: \"F1\" },\r\n  F2: { hid: 0x3b, js: \"F2\" },\r\n  F3: { hid: 0x3c, js: \"F3\" },\r\n  F4: { hid: 0x3d, js: \"F4\" },\r\n  F5: { hid: 0x3e, js: \"F5\" },\r\n  F6: { hid: 0x3f, js: \"F6\" },\r\n  F7: { hid: 0x40, js: \"F7\" },\r\n  F8: { hid: 0x41, js: \"F8\" },\r\n  F9: { hid: 0x42, js: \"F9\" },\r\n  F10: { hid: 0x43, js: \"F10\" },\r\n  F11: { hid: 0x44, js: \"F11\" },\r\n  F12: { hid: 0x45, js: \"F12\" },\r\n  F13: { hid: 0x68, js: \"F13\" }, // Tools (hid:Ubunutu, )\r\n  F14: { hid: 0x69, js: \"F14\" }, // Launch5 (hid:Ubuntu, )\r\n  F15: { hid: 0x6a, js: \"F15\" }, // Launch6 (hid:Ubuntu, )\r\n  F16: { hid: 0x6b, js: \"F16\" }, // Launch7 (hid:Ubuntu, )\r\n  F17: { hid: 0x6c, js: \"F17\" }, // Launch8 (hid:Ubuntu, )\r\n  F18: { hid: 0x6d, js: \"F18\" }, // Launch9 (hid:Ubuntu, )\r\n  F19: { hid: 0x6e, js: \"F19\" }, // Disabled (hid:Ubuntu, )\r\n  F20: { hid: 0x6f, js: \"F20\" }, // AudioMicMute (hid:Ubuntu, )\r\n  F21: { hid: 0x70, js: \"F21\" }, // Touchpad toggle (hid:Ubuntu, )\r\n  F22: { hid: 0x71, js: \"F22\" }, // TouchpadOn (hid:Ubuntu, )\r\n  F23: { hid: 0x72, js: \"F23\" }, // TouchpadOff hid:Ubuntu, )\r\n  F24: { hid: 0x73, js: \"F24\" }, // Disabled (hid:Ubuntu, )\r\n  A: { hid: 4, js: \"KeyA\" },\r\n  B: { hid: 5, js: \"KeyB\" },\r\n  C: { hid: 6, js: \"KeyC\" },\r\n  D: { hid: 7, js: \"KeyD\" },\r\n  E: { hid: 8, js: \"KeyE\" },\r\n  F: { hid: 9, js: \"KeyF\" },\r\n  G: { hid: 10, js: \"KeyG\" },\r\n  H: { hid: 11, js: \"KeyH\" },\r\n  I: { hid: 12, js: \"KeyI\" },\r\n  J: { hid: 13, js: \"KeyJ\" },\r\n  K: { hid: 14, js: \"KeyK\" },\r\n  L: { hid: 15, js: \"KeyL\" },\r\n  M: { hid: 16, js: \"KeyM\" },\r\n  N: { hid: 17, js: \"KeyN\" },\r\n  O: { hid: 18, js: \"KeyO\" },\r\n  P: { hid: 19, js: \"KeyP\" },\r\n  Q: { hid: 20, js: \"KeyQ\" },\r\n  R: { hid: 21, js: \"KeyR\" },\r\n  S: { hid: 22, js: \"KeyS\" },\r\n  T: { hid: 23, js: \"KeyT\" },\r\n  U: { hid: 24, js: \"KeyU\" },\r\n  V: { hid: 25, js: \"KeyV\" },\r\n  W: { hid: 26, js: \"KeyW\" },\r\n  X: { hid: 27, js: \"KeyX\" },\r\n  Y: { hid: 28, js: \"KeyY\" },\r\n  Z: { hid: 29, js: \"KeyZ\" },\r\n  Enter: { hid: 40, js: \"Enter\" },\r\n  Esc: { hid: 41, js: \"Escape\" },\r\n  BackSpace: { hid: 42, js: \"Backspace\" },\r\n  Tab: { hid: 43, js: \"Tab\" },\r\n  Space: { hid: 44, js: \"Space\" },\r\n  Minus: { hid: 45, js: \"Minus\" },\r\n  Equal: { hid: 46, js: \"Equal\" },\r\n  \"Left Brace\": { hid: 47, js: \"BracketLeft\" },\r\n  \"Right Brace\": { hid: 48, js: \"BracketRight\" },\r\n  Backslash: { hid: 49, js: \"Backslash\" },\r\n  NonUSBackslash: { hid: 50, js: \"IntlBackslash\" },\r\n  Semicolon: { hid: 51, js: \"Semicolon\" },\r\n  Quote: { hid: 52, js: \"Quote\" },\r\n  Tilde: { hid: 53, js: \"Backquote\" },\r\n  Comma: { hid: 54, js: \"Comma\" },\r\n  Period: { hid: 55, js: \"Period\" },\r\n  Slash: { hid: 56, js: \"Slash\" },\r\n  \"Caps Lock\": { hid: 0x39, js: \"CapsLock\" },\r\n  Print: { hid: 0x46, js: \"Print\" },\r\n  \"Scroll Lock\": { hid: 0x47, js: \"ScrollLock\" },\r\n  Pause: { hid: 0x48, js: \"Pause\" },\r\n  Insert: { hid: 0x49, js: \"Insert\" },\r\n  Home: { hid: 0x4a, js: \"Home\" },\r\n  \"Page Up\": { hid: 0x4b, js: \"PageUp\" },\r\n  Delete: { hid: 0x4c, js: \"Delete\" },\r\n  End: { hid: 0x4d, js: \"End\" },\r\n  \"Page Down\": { hid: 0x4e, js: \"PageDown\" },\r\n  \"Right Arrow\": { hid: 0x4f, js: \"ArrowRight\" },\r\n  \"Left Arrow\": { hid: 0x50, js: \"ArrowLeft\" },\r\n  \"Down Arrow\": { hid: 0x51, js: \"ArrowDown\" },\r\n  \"Up Arrow\": { hid: 0x52, js: \"ArrowUp\" },\r\n  \"Num Lock\": { hid: 0x53, js: \"NumLock\" },\r\n  \"Num Divide\": { hid: 0x54, js: \"NumpadDivide\" },\r\n  \"Num Multiply\": { hid: 0x55, js: \"NumpadMultiply\" },\r\n  \"Num Subtract\": { hid: 0x56, js: \"NumpadSubtract\" },\r\n  \"Num Add\": { hid: 0x57, js: \"NumpadAdd\" },\r\n  \"Num Enter\": { hid: 0x58, js: \"NumpadEnter\" },\r\n  \"Num 1\": { hid: 0x59, js: \"Numpad1\" },\r\n  \"Num 2\": { hid: 0x5a, js: \"Numpad2\" },\r\n  \"Num 3\": { hid: 0x5b, js: \"Numpad3\" },\r\n  \"Num 4\": { hid: 0x5c, js: \"Numpad4\" },\r\n  \"Num 5\": { hid: 0x5d, js: \"Numpad5\" },\r\n  \"Num 6\": { hid: 0x5e, js: \"Numpad6\" },\r\n  \"Num 7\": { hid: 0x5f, js: \"Numpad7\" },\r\n  \"Num 8\": { hid: 0x60, js: \"Numpad8\" },\r\n  \"Num 9\": { hid: 0x61, js: \"Numpad9\" },\r\n  \"Num 0\": { hid: 0x62, js: \"Numpad0\" },\r\n  \"Num Dot\": { hid: 0x63, js: \"NumpadDecimal\" },\r\n};\r\n\r\nexport enum EMediaKeys {\r\n  \"Power\" = 0x30,\r\n  \"Sleep\" = 0x32,\r\n  \"Record\" = 178,\r\n  \"Fast Forward\" = 0xb3,\r\n  \"Rewind\" = 0xb4,\r\n  \"Next\" = 0xb5,\r\n  \"Previous\" = 0xb6,\r\n  \"Stop\" = 0xb7,\r\n  \"Play/Pause\" = 0xcd,\r\n  \"Pause\" = 0xb0,\r\n  \"Vol. Mute\" = 0xe2,\r\n  \"Vol. Up\" = 0xe9,\r\n  \"Vol. Down\" = 0xea,\r\n}\r\n\r\nexport const MediaKeys = Object.keys(EMediaKeys).filter(\r\n  //@ts-ignore\r\n  (k) => !parseInt(k)\r\n) as string[];\r\n","import Joi from \"joi\";\nimport cloneDeep from \"lodash/cloneDeep\";\nimport { createContext } from \"react\";\nimport { v4 } from \"uuid\";\n\nimport { createDefaultBackDisplay } from \"../definitions/defaultBackImage\";\nimport {\n  createDefaultDisplayButton,\n  createDefaultPage,\n} from \"../definitions/defaultPage\";\nimport { EAction } from \"../definitions/modes\";\nimport { ButtonSetting, Config, Display, LiveMode, Page } from \"../generated\";\nimport {\n  PageDocument,\n  PageQuery,\n  PageQueryVariables,\n} from \"../generated/types-and-hooks\";\nimport { generateAdditionalImagery } from \"../lib/configFile/parseConfig\";\nimport { PageSchema } from \"../schemas/config\";\nimport { Actions, FunctionForFirstParamType } from \"./interfaces\";\nimport { client } from \"..\";\n\nconst saveConfigToLocalStorage = (state: Config) => {\n  setTimeout(() => localStorage.setItem(\"config\", JSON.stringify(state)));\n  return { ...state };\n};\n\nconst changePageDimension = async (\n  page: Page,\n  oldCount: number,\n  newCount: number\n) => {\n  if (newCount > oldCount) {\n    const diff = newCount - oldCount;\n    for (let i = 0; i < diff; i++) {\n      page.displayButtons.push(await createDefaultDisplayButton());\n    }\n  } else if (newCount < oldCount) {\n    page.displayButtons = page.displayButtons.slice(0, newCount);\n  }\n  return { ...page };\n};\n\nexport const defaultConfig = async (): Promise<Config> => ({\n  configVersion: (await import(\"../../package.json\")).configFileVersion,\n  brightness: 100,\n  screenSaverTimeout: 1 * 60 * 1000, // in milliseconds\n  oledSpeed: 50,\n  oledDelay: 2,\n  preChargePeriod: 0x11,\n  clockFreq: 0xf,\n  clockDiv: 0x2,\n  saveJson: true,\n  width: 3,\n  height: 2,\n  pages: {\n    byId: {},\n    sorted: [],\n  },\n  collections: {\n    byId: {},\n    sorted: [],\n  },\n  defaultBackDisplay: {\n    display: await createDefaultBackDisplay(),\n    live: { bottom: \"none\", top: \"none\" },\n  },\n});\n\nexport interface IConfigReducer extends Actions<Config> {\n  setBrightness(state: Config, brightness: number): Promise<Config>;\n  setScreenSaver(state: Config, timeout: number): Promise<Config>;\n  setOledSpeed(state: Config, speed: number): Promise<Config>;\n  setOledDelay(state: Config, delay: number): Promise<Config>;\n  setPreChargePeriod(state: Config, pcp: number): Promise<Config>;\n  setClockFreq(state: Config, freq: number): Promise<Config>;\n  setClockDiv(state: Config, div: number): Promise<Config>;\n  setSaveJson(state: Config, save: boolean): Promise<Config>;\n  setDimensions(\n    state: Config,\n    data: { width?: number; height?: number }\n  ): Promise<Config>;\n  addPage(\n    state: Config,\n    data: {\n      previousPage?: string;\n      previousDisplay?: number;\n      secondary?: boolean;\n      startPage?: boolean;\n    }\n  ): Promise<Config>;\n  setStartPage(state: Config, data: { pageId: string }): Promise<Config>;\n  downloadPage(\n    state: Config,\n    data: {\n      id: string;\n    }\n  ): Promise<Config>;\n  renamePage(\n    state: Config,\n    data: { pageId: string; name: string }\n  ): Promise<Config>;\n  deletePage(state: Config, pageId: string): Promise<Config>;\n  deleteDisplayButton(\n    state: Config,\n    data: { pageId: string; buttonIndex: number }\n  ): Promise<Config>;\n  setPagePublished(\n    state: Config,\n    data: { pageId: string; forkedId?: string }\n  ): Promise<Config>;\n  changePageWindowName(\n    state: Config,\n    data: { pageId: string; windowName: string }\n  ): Promise<Config>;\n  setPageCollection(\n    state: Config,\n    data: { pageId: string; collectionId: string }\n  ): Promise<Config>;\n  setUsePageName(\n    state: Config,\n    data: { pageId: string; value: boolean }\n  ): Promise<Config>;\n  renameCollection(\n    state: Config,\n    data: { collectionId: string; name: string }\n  ): Promise<Config>;\n  changeCollectionWindowName(\n    state: Config,\n    data: { collectionId: string; windowName: string }\n  ): Promise<Config>;\n  createCollection(state: Config, data: {}): Promise<Config>;\n  deleteCollection(\n    state: Config,\n    data: { collectionId: string }\n  ): Promise<Config>;\n  setUseCollectionName(\n    state: Config,\n    data: { collectionId: string; value: boolean }\n  ): Promise<Config>;\n  setButtonSettings(\n    state: Config,\n    data: {\n      buttonSettings: ButtonSetting;\n      priOrSec: \"primary\" | \"secondary\";\n      pageId: string;\n      buttonIndex: number;\n    }\n  ): Promise<Config>;\n  setLeavePage(\n    state: Config,\n    data: {\n      pageId: string;\n      buttonIndex: number;\n      targetPageId?: string;\n      enabled: boolean;\n      primary: boolean;\n    }\n  ): Promise<Config>;\n  setDisplaySettings(\n    state: Config,\n    data: {\n      displaySettings: Display;\n      pageId: string;\n      buttonIndex: number;\n    }\n  ): Promise<Config>;\n  setOriginalImage(\n    state: Config,\n    data: {\n      pageId: string;\n      buttonIndex: number;\n      originalImage: Buffer;\n    }\n  ): Promise<Config>;\n  deleteImage(\n    state: Config,\n    data: {\n      pageId: string;\n      buttonIndex: number;\n    }\n  ): Promise<Config>;\n  switchButtons(\n    state: Config,\n    data: {\n      pageAId: string;\n      buttonAIndex: number;\n      pageBId: string;\n      buttonBIndex: number;\n    }\n  ): Promise<Config>;\n  copyButton(\n    state: Config,\n    data: {\n      pageSrcId: string;\n      pageDestId: string;\n      buttonSrcIndex: number;\n      buttonDestIndex: number;\n    }\n  ): Promise<Config>;\n  switchPages(\n    state: Config,\n    data: {\n      pageAId: string;\n      pageBId: string;\n    }\n  ): Promise<Config>;\n  updateAllDefaultBackImages(state: Config): Promise<Config>;\n  makeDefaultBackButton(\n    state: Config,\n    data: { pageId: string; buttonIndex: number }\n  ): Promise<Config>;\n  resetDefaultBackButton(state: Config): Promise<Config>;\n  setLive(\n    state: Config,\n    data: {\n      pageId: string;\n      buttonIndex: number;\n      mode: LiveMode;\n      position: \"top\" | \"bottom\";\n    }\n  ): Promise<Config>;\n  setState(state: Config, newState: Config): Promise<Config>;\n}\n\nexport const configReducer: IConfigReducer = {\n  async setBrightness(state, brightness) {\n    state.brightness = brightness;\n    return saveConfigToLocalStorage(state);\n  },\n  async setScreenSaver(state, timeout) {\n    state.screenSaverTimeout = timeout;\n    return saveConfigToLocalStorage(state);\n  },\n  async setOledSpeed(state, speed) {\n    state.oledSpeed = speed;\n    return saveConfigToLocalStorage(state);\n  },\n  async setOledDelay(state, delay) {\n    state.oledDelay = delay;\n    return saveConfigToLocalStorage(state);\n  },\n  async setPreChargePeriod(state, pcp) {\n    state.preChargePeriod = pcp;\n    return saveConfigToLocalStorage(state);\n  },\n  async setClockFreq(state, freq) {\n    state.clockFreq = freq;\n    return saveConfigToLocalStorage(state);\n  },\n  async setClockDiv(state, div) {\n    state.clockDiv = div;\n    return saveConfigToLocalStorage(state);\n  },\n  async setSaveJson(state, save) {\n    state.saveJson = save;\n    return saveConfigToLocalStorage(state);\n  },\n  async setDimensions(state, data) {\n    const width = data.width ?? state.width;\n    const height = data.height ?? state.height;\n    for (let i = 0; i < state.pages.sorted.length; i++) {\n      const pageId = state.pages.sorted[i];\n      const page = state.pages.byId[pageId];\n      state.pages.byId[pageId] = await changePageDimension(\n        page,\n        state.width * state.height,\n        width * height\n      );\n    }\n\n    state.width = width;\n    state.height = height;\n    return saveConfigToLocalStorage(state);\n  },\n  async addPage(state, data) {\n    const newPage = await createDefaultPage(\n      state.width * state.height,\n      data.previousPage\n    );\n    const newId = v4();\n    state.pages.byId[newId] = newPage;\n    state.pages.sorted.push(newId);\n    const { previousPage, previousDisplay, secondary = false } = data;\n    if (\n      previousPage !== undefined &&\n      previousDisplay !== undefined &&\n      secondary !== undefined\n    ) {\n      state.pages.byId[previousPage].displayButtons[previousDisplay].button[\n        secondary ? \"secondary\" : \"primary\"\n      ].values[EAction.changePage] = newId;\n    } else if (state.pages.sorted.length === 1) {\n      state.pages.byId[newId].name = \"Start\";\n    }\n    return saveConfigToLocalStorage(state);\n  },\n  async setStartPage(state, { pageId }) {\n    state.pages.sorted = [\n      ...state.pages.sorted.filter((pid) => pid !== pageId),\n    ];\n    state.pages.sorted.unshift(pageId);\n    return saveConfigToLocalStorage(state);\n  },\n  async downloadPage(state: Config, { id }) {\n    const response = await client?.query<PageQuery>({\n      query: PageDocument,\n      variables: { id },\n    });\n    if (!response) {\n      window.advancedAlert(\"Error\", \"There was an error receiving this page\");\n      return { ...state };\n    }\n    const validatedPage: Joi.ValidationResult<Page> = PageSchema.validate(\n      response?.data.page?.data,\n      { stripUnknown: true }\n    );\n    if (validatedPage.error) {\n      window.advancedAlert(\n        \"This page is not compatible\",\n        validatedPage.error.message\n      );\n      return { ...state };\n    }\n    const page = validatedPage.value;\n    state.pages.byId[id] = await changePageDimension(\n      {\n        ...cloneDeep(page),\n        publishData: {\n          createdBy: response.data.page.createdBy.id,\n          forkedFrom: response.data.page.forkedFrom?.id,\n        },\n      },\n      page.displayButtons.length,\n      state.width * state.height\n    );\n    for (let i = 0; i < state.pages.byId[id].displayButtons.length; i++) {\n      if (\n        state.pages.byId[id].displayButtons[i].display\n          .isGeneratedFromDefaultBackImage\n      ) {\n        state.pages.byId[id].displayButtons[i].display = cloneDeep(\n          state.defaultBackDisplay.display\n        );\n      } else {\n        state.pages.byId[id].displayButtons[i].display =\n          await generateAdditionalImagery(\n            state.pages.byId[id].displayButtons[i].display\n          );\n      }\n    }\n    const alreadyDownloaded = !!state.pages.sorted.find((pid) => pid === id);\n    if (!alreadyDownloaded) state.pages.sorted.push(id);\n    return saveConfigToLocalStorage(state);\n  },\n  async renamePage(state: Config, { pageId, name }) {\n    state.pages.byId[pageId].name = name;\n    return saveConfigToLocalStorage(state);\n  },\n  async changePageWindowName(state: Config, { pageId, windowName }) {\n    state.pages.byId[pageId].windowName = windowName;\n    return saveConfigToLocalStorage(state);\n  },\n  async setUsePageName(state, { pageId, value }) {\n    state.pages.byId[pageId].usePageNameAsWindowName = value;\n    return saveConfigToLocalStorage(state);\n  },\n  async switchPages(state, data) {\n    const { pageAId, pageBId } = data;\n    const aIndex = state.pages.sorted.findIndex((pId) => pId === pageAId);\n    const bIndex = state.pages.sorted.findIndex((pId) => pId === pageBId);\n    if (\n      state.pages.byId[pageAId].isInCollection ===\n        state.pages.byId[pageBId].isInCollection &&\n      !!state.pages.byId[pageAId].isInCollection\n    ) {\n      const colId = state.pages.byId[pageAId].isInCollection!;\n      const aIndex = state.collections.byId[colId].pages.findIndex(\n        (pId) => pId === pageAId\n      );\n      const bIndex = state.collections.byId[colId].pages.findIndex(\n        (pId) => pId === pageBId\n      );\n      state.collections.byId[colId].pages[aIndex] = pageBId;\n      state.collections.byId[colId].pages[bIndex] = pageAId;\n    }\n    state.pages.sorted[aIndex] = pageBId;\n    state.pages.sorted[bIndex] = pageAId;\n    return saveConfigToLocalStorage(state);\n  },\n  async deleteDisplayButton(state, { pageId, buttonIndex }) {\n    state.pages.byId[pageId].displayButtons[buttonIndex] =\n      await createDefaultDisplayButton();\n    return saveConfigToLocalStorage(state);\n  },\n  async deletePage(state, pageId) {\n    const collectionId = state.pages.byId[pageId].isInCollection;\n\n    state.pages.sorted = [...state.pages.sorted.filter((id) => id !== pageId)];\n    delete state.pages.byId[pageId];\n\n    // remove page from collection\n    if (collectionId)\n      state.collections.byId[collectionId].pages = [\n        ...state.collections.byId[collectionId].pages.filter(\n          (p) => p !== pageId\n        ),\n      ];\n\n    Object.entries(state.pages.byId).forEach(([id, page]) => {\n      page.displayButtons.forEach((db, index) => {\n        if (db.button.primary.values[EAction.changePage] === pageId)\n          state.pages.byId[id].displayButtons[index].button.primary.values[\n            EAction.changePage\n          ] = \"\";\n        if (db.button.secondary.values[EAction.changePage] === pageId)\n          state.pages.byId[id].displayButtons[index].button.secondary.values[\n            EAction.changePage\n          ] = \"\";\n      });\n    });\n    return saveConfigToLocalStorage(state);\n  },\n  async setPagePublished(state, { pageId, forkedId }) {\n    if (!client) {\n      window.advancedAlert(\n        \"Problem with connection to server\",\n        \"We could not reach the FreeDeck Hub server\"\n      );\n      return { ...state };\n    }\n    if (forkedId) {\n      const newState = cloneDeep(state);\n      newState.pages.sorted = [\n        ...state.pages.sorted.map((pid) => (pid === forkedId ? pageId : pid)),\n      ];\n      delete newState.pages.byId[forkedId];\n      return saveConfigToLocalStorage(\n        await configReducer.downloadPage({ ...newState }, { id: pageId })\n      );\n    } else {\n      const response = await client?.query<PageQuery, PageQueryVariables>({\n        query: PageDocument,\n        variables: { id: pageId },\n        fetchPolicy: \"network-only\",\n      });\n      state.pages.byId[pageId] = {\n        ...cloneDeep(response.data.page.data as Page),\n        publishData: {\n          createdBy: response.data.page.createdBy.id,\n          forkedFrom: response.data.page.forkedFrom?.id,\n        },\n      };\n      return saveConfigToLocalStorage(state);\n    }\n  },\n  async setPageCollection(state, { pageId, collectionId }) {\n    const collection = state.collections.byId[collectionId];\n    if (!state.pages.byId[pageId].isInCollection) {\n      if (collection.pages.length === 0 && !collection.windowName)\n        collection.windowName = state.pages.byId[pageId].windowName;\n      if (collection.pages.length === 0 && !collection.name)\n        collection.name = state.pages.byId[pageId].name;\n      collection.pages.push(pageId);\n      state.pages.byId[pageId].isInCollection = collectionId;\n    } else {\n      const colId = state.pages.byId[pageId].isInCollection!;\n      state.collections.byId[colId].pages = [\n        ...state.collections.byId[colId].pages.filter((pid) => pid !== pageId),\n      ];\n      state.pages.byId[pageId].isInCollection = undefined;\n    }\n    return saveConfigToLocalStorage(state);\n  },\n  async createCollection(state: Config) {\n    const newId = v4();\n    state.collections.byId[newId] = {\n      pages: [],\n      useCollectionNameAsWindowName: true,\n    };\n    state.collections.sorted.push(newId);\n    return saveConfigToLocalStorage(state);\n  },\n  async deleteCollection(state: Config, { collectionId }) {\n    state.collections.byId[collectionId].pages.forEach(\n      (pageId) => (state.pages.byId[pageId].isInCollection = undefined)\n    );\n    delete state.collections.byId[collectionId];\n    state.collections.sorted = [\n      ...state.collections.sorted.filter((cid) => cid !== collectionId),\n    ];\n    return saveConfigToLocalStorage(state);\n  },\n  async setUseCollectionName(state, { collectionId, value }) {\n    state.collections.byId[collectionId].useCollectionNameAsWindowName = value;\n    return saveConfigToLocalStorage(state);\n  },\n  async renameCollection(state, { collectionId, name }) {\n    state.collections.byId[collectionId].name = name;\n    return saveConfigToLocalStorage(state);\n  },\n  async changeCollectionWindowName(state, { collectionId, windowName }) {\n    state.collections.byId[collectionId].windowName = windowName;\n    return saveConfigToLocalStorage(state);\n  },\n  async setButtonSettings(state, data) {\n    const { pageId, buttonIndex, priOrSec, buttonSettings } = data;\n    state.pages.byId[pageId].displayButtons[buttonIndex].button[priOrSec] =\n      buttonSettings;\n    return saveConfigToLocalStorage(state);\n  },\n  async setLeavePage(\n    state,\n    { pageId, buttonIndex, targetPageId, enabled, primary }\n  ) {\n    state.pages.byId[pageId].displayButtons[buttonIndex].button[\n      primary ? \"primary\" : \"secondary\"\n    ].leavePage = {\n      pageId: targetPageId,\n      enabled,\n    };\n    return saveConfigToLocalStorage(state);\n  },\n  async setDisplaySettings(state, data) {\n    const { pageId, buttonIndex, displaySettings } = data;\n    if (pageId === \"dbd\") {\n      state.defaultBackDisplay.display = { ...displaySettings };\n      state.defaultBackDisplay.display = await generateAdditionalImagery(\n        state.defaultBackDisplay.display\n      );\n      state.defaultBackDisplay.display.isGeneratedFromDefaultBackImage = true;\n      localStorage.setItem(\n        \"defaultBackDisplay\",\n        JSON.stringify(state.defaultBackDisplay)\n      );\n      return saveConfigToLocalStorage(\n        await configReducer.updateAllDefaultBackImages(state)\n      );\n    } else {\n      state.pages.byId[pageId].displayButtons[buttonIndex].display = {\n        ...displaySettings,\n        isGeneratedFromDefaultBackImage: false,\n      };\n      state.pages.byId[pageId].displayButtons[buttonIndex].display =\n        await generateAdditionalImagery(\n          state.pages.byId[pageId].displayButtons[buttonIndex].display\n        );\n    }\n    return saveConfigToLocalStorage(state);\n  },\n  async setOriginalImage(state, data) {\n    const { buttonIndex, pageId, originalImage } = data;\n\n    if (pageId === \"dbd\") {\n      state.defaultBackDisplay.display.originalImage = originalImage;\n      state.defaultBackDisplay.display = await generateAdditionalImagery(\n        state.defaultBackDisplay.display\n      );\n    } else {\n      state.pages.byId[pageId].displayButtons[\n        buttonIndex\n      ].display.originalImage = originalImage;\n      state.pages.byId[pageId].displayButtons[buttonIndex].display =\n        await generateAdditionalImagery(\n          state.pages.byId[pageId].displayButtons[buttonIndex].display\n        );\n    }\n    if (pageId === \"dbd\") {\n      return saveConfigToLocalStorage(\n        cloneDeep(await configReducer.updateAllDefaultBackImages(state))\n      );\n    }\n    return saveConfigToLocalStorage(state);\n  },\n  async deleteImage(state, data) {\n    const { buttonIndex, pageId } = data;\n    delete state.pages.byId[pageId].displayButtons[buttonIndex].display\n      .originalImage;\n    state.pages.byId[pageId].displayButtons[buttonIndex].display =\n      await generateAdditionalImagery(\n        state.pages.byId[pageId].displayButtons[buttonIndex].display\n      );\n    return saveConfigToLocalStorage(state);\n  },\n  async switchButtons(state, data) {\n    const { pageAId, pageBId, buttonAIndex, buttonBIndex } = data;\n    const tempA = state.pages.byId[pageAId].displayButtons[buttonAIndex];\n    state.pages.byId[pageAId].displayButtons[buttonAIndex] = cloneDeep(\n      state.pages.byId[pageBId].displayButtons[buttonBIndex]\n    );\n    state.pages.byId[pageBId].displayButtons[buttonBIndex] = cloneDeep(tempA);\n    return saveConfigToLocalStorage(state);\n  },\n  async copyButton(state, data) {\n    const { pageSrcId, pageDestId, buttonSrcIndex, buttonDestIndex } = data;\n    state.pages.byId[pageDestId].displayButtons[buttonDestIndex] = cloneDeep(\n      state.pages.byId[pageSrcId].displayButtons[buttonSrcIndex]\n    );\n    return saveConfigToLocalStorage(state);\n  },\n  async updateAllDefaultBackImages(state) {\n    Object.entries(state.pages.byId).forEach(([pageId, page]) => {\n      page.displayButtons.forEach((displayButton, displayIndex) => {\n        if (displayButton.display.isGeneratedFromDefaultBackImage) {\n          state.pages.byId[pageId].displayButtons[displayIndex].display =\n            cloneDeep(state.defaultBackDisplay.display);\n          state.pages.byId[pageId].displayButtons[displayIndex].live =\n            cloneDeep(state.defaultBackDisplay.live);\n        }\n      });\n    });\n    return saveConfigToLocalStorage(state);\n  },\n  async makeDefaultBackButton(state, data) {\n    const { buttonIndex, pageId } = data;\n    state.pages.byId[pageId].displayButtons[buttonIndex].display =\n      state.defaultBackDisplay.display;\n    state.pages.byId[pageId].displayButtons[buttonIndex].live =\n      state.defaultBackDisplay.live;\n    return saveConfigToLocalStorage(state);\n  },\n  async resetDefaultBackButton(state) {\n    state.defaultBackDisplay.display = await createDefaultBackDisplay(\"dbd\");\n    return saveConfigToLocalStorage(state);\n  },\n  async setLive(state, { buttonIndex, mode, pageId, position }) {\n    if (pageId === \"dbd\") {\n      state.defaultBackDisplay.live[position] = mode;\n      state = cloneDeep(await configReducer.updateAllDefaultBackImages(state));\n    } else {\n      state.pages.byId[pageId].displayButtons[buttonIndex].live[position] =\n        mode;\n    }\n    return saveConfigToLocalStorage(state);\n  },\n  async setState(state, newState) {\n    return saveConfigToLocalStorage(newState);\n  },\n};\n\nexport type IConfigDispatch = {\n  [PropertyType in keyof IConfigReducer]: FunctionForFirstParamType<\n    Parameters<IConfigReducer[PropertyType]>[1]\n  >;\n};\n\nexport const ConfigStateContext = createContext<Config>({} as unknown as any);\nexport const ConfigDispatchContext = createContext<IConfigDispatch>(\n  configReducer as unknown as IConfigDispatch\n);\n","import c from \"clsx\";\nimport React from \"react\";\n\nexport const Label: React.FC<{ className?: string; hint?: string }> = ({\n  className,\n  children,\n  hint,\n}) => {\n  return (\n    <div>\n      <div className={c(\"text-xl mr-4\", className)}>{children}</div>\n      {hint && <div className=\"text-sm text-gray-300 \">{hint}</div>}\n    </div>\n  );\n};\n\nexport const Value: React.FC<{ className?: string }> = ({\n  className,\n  children,\n}) => {\n  return <div className={c(\"text-xl font-bold\", className)}>{children}</div>;\n};\n","import c from \"clsx\";\nimport React from \"react\";\n\nexport const TitleInput: React.FC<{\n  className?: string;\n  disabled?: boolean;\n  onChange: (value: string) => any;\n  onEnter?: () => any;\n  value?: string;\n  placeholder?: string;\n}> = ({\n  className,\n  children,\n  onChange,\n  onEnter,\n  value,\n  placeholder,\n  disabled,\n}) => {\n  return (\n    <input\n      type=\"text\"\n      disabled={disabled}\n      placeholder={placeholder}\n      className={c(\n        \"text-xl appearance-none py-1 px-2 placeholder-gray-100 resize-none rounded-md\",\n        \"bg-gray-50 bg-opacity-0 focus:bg-gray-700 focus:bg-opacity-100\",\n        disabled ? \"text-gray-50\" : \"text-white\",\n        className\n      )}\n      onChange={(e) => {\n        onChange(e.currentTarget.value);\n      }}\n      onKeyDown={(e) => e.key === \"Enter\" && onEnter && onEnter()}\n      value={value}\n    >\n      {children}\n    </input>\n  );\n};\n","import { invoke } from \"@tauri-apps/api\";\nimport { createContext } from \"react\";\n\nimport { FDSerialAPI } from \"../lib/serial/fdSerialApi\";\nimport { Actions, FunctionForFirstParamType } from \"./interfaces\";\n\nexport interface AppState {\n  autoPageSwitcherEnabled: boolean;\n  ctrlDown: boolean;\n  serialApi?: FDSerialAPI;\n  availablePorts: string[];\n  connectedPortIndex: number;\n  devLog: any;\n  hasJson: boolean;\n  alert: {\n    isOpen: boolean;\n    text: string;\n    title: string;\n  };\n  confirm: {\n    isOpen: boolean;\n    text: string;\n    title: string;\n    onAccept?: () => any;\n    onAbort?: () => any;\n  };\n  deck: {\n    currentPage: number | null;\n    dontSwitchPage: boolean;\n  };\n  system: {\n    cpuTemp: number[];\n    gpuTemp: number[];\n  };\n}\nexport const defaultAppState: () => Promise<AppState> = async () => ({\n  autoPageSwitcherEnabled: true,\n  ctrlDown: false,\n  serialApi:\n    navigator.serial || (window as any).__TAURI_IPC__\n      ? new FDSerialAPI()\n      : undefined,\n  devLog: {},\n  availablePorts: [],\n  connectedPortIndex: -1,\n  hasJson: true,\n  alert: {\n    isOpen: false,\n    text: \"\",\n    title: \"\",\n  },\n  confirm: {\n    isOpen: false,\n    text: \"\",\n    title: \"\",\n  },\n  deck: { currentPage: null, dontSwitchPage: false },\n  system: {\n    cpuTemp: [0],\n    gpuTemp: [0],\n  },\n});\n\nexport interface IAppReducer extends Actions<AppState> {\n  setCtrl(state: AppState, ctrlDown: boolean): Promise<AppState>;\n  setDeck(\n    state: AppState,\n    data: { currentPage: number | null; dontSwitchPage: boolean }\n  ): Promise<AppState>;\n  toggleAutoPageSwitcher(state: AppState, enabled?: boolean): Promise<AppState>;\n  closeAlert(state: AppState): Promise<AppState>;\n  setHasJson(state: AppState, hasJson: boolean): Promise<AppState>;\n  openAlert(\n    state: AppState,\n    data: { text: string; title: string }\n  ): Promise<AppState>;\n  setDevLog(\n    state: AppState,\n    data: { path: string; data: any }\n  ): Promise<AppState>;\n  closeConfirm(state: AppState, data: { value: boolean }): Promise<AppState>;\n  openConfirm(\n    state: AppState,\n    data: {\n      text: string;\n      title: string;\n      onAccept?: () => any;\n      onAbort?: () => any;\n    }\n  ): Promise<AppState>;\n  setAvailablePorts(\n    state: AppState,\n    availablePorts: string[]\n  ): Promise<AppState>;\n  setConnectedPortIndex(\n    state: AppState,\n    connectedPortIndex: number\n  ): Promise<AppState>;\n  setTemps(\n    state: AppState,\n    data: { cpuTemp: number; gpuTemp: number }\n  ): Promise<AppState>;\n}\n\nexport interface PartialState {\n  system: {\n    cpuTemp: number[];\n    gpuTemp: number[];\n  };\n  [x: string]: any;\n}\n\nexport const modifyTemps = <State extends PartialState>(\n  state: State,\n  data: {\n    gpuTemp: number;\n    cpuTemp: number;\n  }\n): State => {\n  const { gpuTemp, cpuTemp } = data;\n  if (state.system.cpuTemp.length >= 64) {\n    state.system.cpuTemp.shift();\n  }\n  state.system.cpuTemp.push(cpuTemp);\n\n  if (state.system.gpuTemp.length >= 64) {\n    state.system.gpuTemp.shift();\n  }\n  state.system.gpuTemp.push(gpuTemp);\n\n  return { ...state };\n};\n\nexport const appReducer: IAppReducer = {\n  async setCtrl(state, ctrlDown) {\n    return { ...state, ctrlDown };\n  },\n  async setDeck(state, { currentPage, dontSwitchPage }) {\n    return { ...state, deck: { currentPage, dontSwitchPage } };\n  },\n  async setTemps(state, data) {\n    return modifyTemps<AppState>(state, data);\n  },\n  async toggleAutoPageSwitcher(state, maybeEnabled) {\n    const enabled =\n      maybeEnabled === undefined\n        ? !state.autoPageSwitcherEnabled\n        : maybeEnabled;\n    setTimeout(() =>\n      localStorage.setItem(\"autoPageSwitcherEnabled\", enabled.toString())\n    );\n    invoke(\"set_aps_state\", {\n      apsState: enabled,\n    });\n    return { ...state, autoPageSwitcherEnabled: enabled };\n  },\n  async setDevLog(state: AppState, { path, data }) {\n    const devLog = { ...state.devLog };\n    devLog[path] = data;\n    return { ...state, devLog };\n  },\n  async setHasJson(state: AppState, hasJson: boolean) {\n    return { ...state, hasJson };\n  },\n  async closeAlert(state) {\n    return { ...state, alert: { ...state.alert, isOpen: false } };\n  },\n  async openAlert(state, data) {\n    return { ...state, alert: { ...data, isOpen: true } };\n  },\n  async closeConfirm(state, data) {\n    if (data.value && state.confirm.onAccept) {\n      await state.confirm.onAccept();\n    } else if (!data.value && state.confirm.onAbort) {\n      await state.confirm.onAbort();\n    }\n    state.confirm.onAccept = undefined;\n    state.confirm.onAbort = undefined;\n    return { ...state, confirm: { ...state.confirm, isOpen: false } };\n  },\n  async openConfirm(state, data) {\n    return { ...state, confirm: { ...data, isOpen: true } };\n  },\n  async setAvailablePorts(state, availablePorts) {\n    return { ...state, availablePorts };\n  },\n  async setConnectedPortIndex(state, connectedPortIndex) {\n    return { ...state, connectedPortIndex };\n  },\n};\n\nexport type IAppDispatch = {\n  [PropertyType in keyof IAppReducer]: FunctionForFirstParamType<\n    Parameters<IAppReducer[PropertyType]>[1]\n  >;\n};\n\nexport const AppStateContext = createContext<AppState>({} as unknown as any);\nexport const AppDispatchContext = createContext<IAppDispatch>(\n  appReducer as unknown as IAppDispatch\n);\n","import React, {\n  ReactChild,\n  ReactFragment,\n  ReactPortal,\n  useContext,\n} from \"react\";\nimport { AppStateContext } from \"../../states/appState\";\n\nexport const CtrlDuo: React.FC<{\n  children: [\n    ReactChild | ReactFragment | ReactPortal,\n    ReactChild | ReactFragment | ReactPortal\n  ];\n}> = ({ children }) => {\n  const { ctrlDown } = useContext(AppStateContext);\n  return <>{!ctrlDown ? children[0] : children[1]}</>;\n};\n","import \"./tailwind.css\";\n\nimport {\n  ApolloClient,\n  ApolloProvider,\n  InMemoryCache,\n  NormalizedCacheObject,\n} from \"@apollo/client\";\nimport { ArrowPathIcon } from \"@heroicons/react/24/outline\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\nimport { FDButton } from \"./lib/components/Button\";\nimport { createToast } from \"./lib/misc/createToast\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport * as serviceWorkerRegistration from \"./serviceWorkerRegistration\";\nimport { defaultAppState } from \"./states/appState\";\nimport { defaultConfig } from \"./states/configState\";\n\nexport let client: ApolloClient<NormalizedCacheObject> | undefined;\nconst main = async () => {\n  // if (process.env.NODE_ENV !== \"development\" && !isElectron())\n  //   window.onbeforeunload = function () {\n  //     return \"Data will be lost if you leave the page, are you sure?\";\n  //   };\n  const awaitedDefaultConfigState = await defaultConfig();\n  const awaitedDefaultAppState = await defaultAppState();\n  client = new ApolloClient({\n    cache: new InMemoryCache(),\n    uri: process.env.REACT_APP_API_URL + \"/graphql\",\n    credentials: \"include\",\n  });\n\n  ReactDOM.render(\n    <ApolloProvider client={client}>\n      <App\n        defaultConfigState={awaitedDefaultConfigState}\n        defaultAppState={awaitedDefaultAppState}\n      />\n    </ApolloProvider>,\n    document.getElementById(\"root\")\n  );\n};\nmain();\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorkerRegistration.register({\n  onUpdate: (registration) => {\n    createToast({\n      primary: (t) => (\n        <FDButton\n          prefix={<ArrowPathIcon className=\"h-4 w-4\" />}\n          type=\"primary\"\n          size={2}\n          onClick={async () => {\n            registration.waiting?.postMessage({ type: \"SKIP_WAITING\" });\n            window.onbeforeunload = () => undefined;\n            window.location.reload();\n          }}\n        >\n          Refresh\n        </FDButton>\n      ),\n      text: \"Refresh to load the newest version!\",\n      title: \"Update available!\",\n    });\n  },\n});\nreportWebVitals();\n","import { useEffect, useState } from \"react\";\n\nimport { keys } from \"../../definitions/keys\";\n\nexport const useTranslateKeyboardLayout = (values: number[]) => {\n  const translatable = !(navigator as any).keyboard;\n  const [translatedKeys, setTranslatedKeys] = useState<string[]>([]);\n  useEffect(() => {\n    if (!values || !values.length) {\n      setTranslatedKeys([]);\n      return;\n    }\n    if (translatable) {\n      setTranslatedKeys(\n        values.map(\n          (key) =>\n            Object.keys(keys).find(\n              (displayName) => keys[displayName]?.hid === key\n            ) || \"\"\n        )\n      );\n    } else {\n      (navigator as any).keyboard.getLayoutMap().then((layout: any) => {\n        const translatedKeys = values.map((value) => {\n          const key =\n            Object.keys(keys).find(\n              (displayName) => keys[displayName]?.hid === value\n            ) || \"\";\n          const jsKey = keys[key]?.js;\n          const localKey = layout.get(jsKey);\n          return localKey ?? key;\n        });\n        setTranslatedKeys(translatedKeys);\n      });\n    } // eslint-disable-next-line\n  }, [values]);\n  return translatedKeys;\n};\n","import {\n  ArrowRightCircleIcon,\n  ExclamationCircleIcon,\n} from \"@heroicons/react/24/outline\";\nimport c from \"clsx\";\nimport React, { useContext } from \"react\";\n\nimport { EMediaKeys } from \"../../definitions/keys\";\nimport { EAction, FDSettings } from \"../../definitions/modes\";\nimport { ButtonSetting, Page } from \"../../generated\";\nimport { ConfigStateContext } from \"../../states/configState\";\nimport { useTranslateKeyboardLayout } from \"../localisation/keyboard\";\nimport { getPageName } from \"../misc/util\";\nimport { CtrlDuo } from \"./CtrlDuo\";\n\nconst Pill: React.FC<{\n  className?: string;\n  button: ButtonSetting;\n  hideChangePage?: boolean;\n}> = ({ className, button, hideChangePage: genericBackButton = false }) => {\n  const configState = useContext(ConfigStateContext);\n  const { pages } = configState;\n  const keys = useTranslateKeyboardLayout(button.values[EAction.hotkeys]);\n  const pillClassName =\n    \"flex px-2 justify-center items-center gap-1 align-middle text-base shadow-lg rounded-md overflow-hidden\";\n  return (\n    <div className={c(\"flex justify-center whitespace-nowrap\", className)}>\n      {button.mode === EAction.changePage &&\n        !genericBackButton &&\n        !!button.values[EAction.changePage] && (\n          <div className={c(pillClassName, \"bg-gray-500\")}>\n            <ArrowRightCircleIcon className=\"w-4 h-4\" />\n            <span className=\"overflow-ellipsis overflow-hidden\">\n              {getPageName(\n                button.values[EAction.changePage]!,\n                pages.byId[button.values[EAction.changePage]!]\n              )}\n            </span>\n          </div>\n        )}\n      {button.mode === EAction.hotkeys &&\n        !!button.values[EAction.hotkeys].length && (\n          <div className={c(pillClassName, \"bg-gray-500\")}>\n            <span>{keys.join(\"+\")}</span>\n          </div>\n        )}\n      {button.mode === EAction.text && !!button.values[EAction.text]?.length && (\n        <div className={c(pillClassName, \"bg-gray-500\")}>\n          <span className=\"min-w-0 overflow-ellipsis overflow-hidden\">\n            {button.values[EAction.text]}\n          </span>\n        </div>\n      )}\n      {button.mode === EAction.special_keys &&\n        !!button.values[EAction.special_keys] && (\n          <div className={c(pillClassName, \"bg-gray-500\")}>\n            <span>\n              {EMediaKeys[button.values[EAction.special_keys]].toString()}\n            </span>\n          </div>\n        )}\n      {button.mode === EAction.settings &&\n        !!button.values[EAction.settings].setting && (\n          <div className={c(pillClassName, \"bg-gray-500\")}>\n            <span>{button.values[EAction.settings].value}</span>\n            {button.values[EAction.settings].setting ===\n              FDSettings.absolute_brightness &&\n              button.values[EAction.settings].value !== undefined && (\n                <span>\n                  {(\n                    (button.values[EAction.settings].value! / 255) *\n                    100\n                  ).toFixed(0)}\n                </span>\n              )}\n          </div>\n        )}\n      {/* @ts-ignore*/}\n      {button.mode !== EAction.noop && !button.values[button.mode] && (\n        <div className={c(pillClassName, \"bg-danger-500\")}>\n          <ExclamationCircleIcon className=\"w-4 h-4\" />\n          <span title=\"check the button settings for completeness\">Error</span>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport const ActionPreview: React.FC<{\n  className?: string;\n  page: Page;\n  displayIndex: number;\n  hideChangePage?: boolean;\n}> = ({ page, displayIndex, children, className, hideChangePage = false }) => {\n  const button = page.displayButtons[displayIndex].button;\n\n  return (\n    <div className={c(\"h-6 overflow-hidden w-32\", className)}>\n      <CtrlDuo>\n        <Pill button={button.primary} hideChangePage={hideChangePage} />\n        <Pill button={button.secondary} hideChangePage={hideChangePage} />\n      </CtrlDuo>\n    </div>\n  );\n};\n","import c from \"clsx\";\nimport React from \"react\";\n\nexport const ImagePreview: React.FC<{\n  $ref?: React.LegacyRef<HTMLImageElement>;\n  clickable?: boolean;\n  previewImage: string;\n  className?: string;\n  onClick?: React.MouseEventHandler<HTMLDivElement>;\n  size?: number;\n}> = ({\n  $ref,\n  className,\n  onClick,\n  size = 2,\n  previewImage,\n  clickable = true,\n}) => {\n  return (\n    <div>\n      <img\n        alt=\"\"\n        src={previewImage}\n        ref={$ref}\n        onClick={onClick}\n        className={c(\n          clickable && \"cursor-pointer\",\n\n          size === 1 && \"w-24 h-12\",\n          size === 2 && \"w-32 h-16\",\n          size === 3 && \"w-64 h-32\",\n          className\n        )}\n        style={{ imageRendering: \"pixelated\" }}\n      />\n    </div>\n  );\n};\n","import { TrashIcon } from \"@heroicons/react/24/outline\";\r\nimport c from \"clsx\";\r\nimport React, { useContext } from \"react\";\r\nimport { useDrag, useDrop } from \"react-dnd\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { ActionPreview } from \"../../lib/components/ActionPreview\";\r\nimport { CtrlDuo } from \"../../lib/components/CtrlDuo\";\r\nimport { ImagePreview } from \"../../lib/components/ImagePreview\";\r\nimport { AppDispatchContext, AppStateContext } from \"../../states/appState\";\r\nimport {\r\n  ConfigDispatchContext,\r\n  ConfigStateContext,\r\n} from \"../../states/configState\";\r\n\r\ninterface IItem {\r\n  pageId: string;\r\n  displayIndex: number;\r\n  brightness: number;\r\n}\r\n\r\nexport const DisplayButton: React.FC<{\r\n  pageId: string;\r\n  displayIndex: number;\r\n}> = ({ pageId, displayIndex }) => {\r\n  const configState = useContext(ConfigStateContext);\r\n  const appState = useContext(AppStateContext);\r\n  const configDispatch = useContext(ConfigDispatchContext);\r\n  const appDispatch = useContext(AppDispatchContext);\r\n  const page = configState.pages.byId[pageId];\r\n\r\n  const display =\r\n    pageId === \"dbd\"\r\n      ? configState.defaultBackDisplay.display\r\n      : configState.pages.byId[pageId].displayButtons[displayIndex].display;\r\n\r\n  const [{ isDragging }, dragRef] = useDrag<\r\n    IItem,\r\n    any,\r\n    { isDragging: boolean }\r\n  >(() => ({\r\n    type: \"display\",\r\n    item: {\r\n      pageId,\r\n      displayIndex,\r\n      brightness: configState.brightness,\r\n    },\r\n    collect: (monitor) => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n  }));\r\n  const [{ targetDisplayIndex, targetPageId }, dropRef] = useDrop<\r\n    IItem,\r\n    any,\r\n    { targetDisplayIndex: number; targetPageId: string }\r\n  >(\r\n    () => ({\r\n      accept: \"display\",\r\n      drop: (item, monitor): void => {\r\n        console.log(\"DROPPING\");\r\n        appState.ctrlDown\r\n          ? configDispatch.copyButton({\r\n              pageDestId: targetPageId,\r\n              buttonDestIndex: targetDisplayIndex,\r\n              pageSrcId: monitor.getItem().pageId,\r\n              buttonSrcIndex: monitor.getItem().displayIndex,\r\n            })\r\n          : configDispatch.switchButtons({\r\n              pageAId: targetPageId,\r\n              buttonAIndex: targetDisplayIndex,\r\n              pageBId: monitor.getItem().pageId,\r\n              buttonBIndex: monitor.getItem().displayIndex,\r\n            });\r\n      },\r\n      collect: () => ({\r\n        targetDisplayIndex: displayIndex,\r\n        targetPageId: pageId,\r\n      }),\r\n    }),\r\n    [pageId, displayIndex, configDispatch]\r\n  );\r\n\r\n  return (\r\n    <div ref={dragRef} className=\"relative\">\r\n      <CtrlDuo>\r\n        <></>\r\n        <TrashIcon\r\n          onClick={async () => {\r\n            appDispatch.openConfirm({\r\n              title: \"Delete this display button?\",\r\n              text: \"Do you want to delete this display button? It will be gone forever.\",\r\n              onAccept: () =>\r\n                configDispatch.deleteDisplayButton({\r\n                  pageId,\r\n                  buttonIndex: displayIndex,\r\n                }),\r\n            });\r\n          }}\r\n          className=\"absolute -top-3 -left-3 w-6 h-6 p-1 rounded-full bg-danger-600 hover:bg-danger-400 cursor-pointer\"\r\n        />\r\n      </CtrlDuo>\r\n      <Link\r\n        to={`/displaybutton/${pageId}/${displayIndex}`}\r\n        className={c(\r\n          \"bg-opacity-0\",\r\n          \"flex items-center flex-col \",\r\n          isDragging && \"opacity-40\"\r\n        )}\r\n      >\r\n        <ImagePreview\r\n          className=\"shadow-xl mb-2\"\r\n          $ref={dropRef}\r\n          previewImage={display.previewImage}\r\n        />\r\n        <ActionPreview page={page} displayIndex={displayIndex} />\r\n      </Link>\r\n    </div>\r\n  );\r\n};\r\n","export const iconSize = \"w-6 h-6\";\n","import { Menu, Transition } from \"@headlessui/react\";\nimport c from \"clsx\";\nimport React, { Fragment } from \"react\";\nexport interface MenuEntry {\n  title: string;\n  prefix: JSX.Element;\n  onClick: () => any;\n  disabled?: boolean;\n}\nexport const FDMenu: React.FC<{\n  className?: string;\n  // isOpen: boolean;\n  // setIsOpen: (value: boolean) => any;\n  entries: MenuEntry[];\n}> = ({ entries, className, children }) => {\n  return (\n    <Menu>\n      <div\n        className={c(\n          \"flex justify-center\",\n          !className?.includes(\"absolute\") && \"relative\",\n          className\n        )}\n      >\n        <Menu.Button className=\"overflow-hidden\">{children}</Menu.Button>\n        <div className=\"absolute top-full z-40\">\n          <Transition\n            as={Fragment}\n            enter=\"transition duration-75 ease-out\"\n            enterFrom=\"transform scale-95 -translate-y-2 opacity-0\"\n            enterTo=\"transform scale-100 -translate-y-0 opacity-100\"\n            leave=\"transition duration-50 ease-out\"\n            leaveFrom=\"transform scale-100 -translate-y-0  opacity-100\"\n            leaveTo=\"transform scale-95 -translate-y-2 opacity-0\"\n          >\n            <Menu.Items>\n              <div className=\"flex flex-col justify-center items-center\">\n                <div className=\"mt-1 arrow-up z-50\" />\n                <div className=\"bg-gray-500 rounded-lg gap-1px p-2 z-50 border-2 border-primary-500\">\n                  {entries.map((entry, index) => (\n                    <Menu.Item key={index} disabled={!!entry.disabled}>\n                      {({ active }) => (\n                        <div\n                          onClick={entry.onClick}\n                          className={c(\n                            \"flex items-center px-4 py-2 rounded-lg whitespace-nowrap select-none\",\n                            active && \"bg-gray-300\"\n                          )}\n                        >\n                          {!!entry.prefix && (\n                            <span\n                              className={c(\n                                \"mr-4\",\n                                entry.disabled && \"text-gray-300\"\n                              )}\n                            >\n                              {entry.prefix}\n                            </span>\n                          )}\n                          <span\n                            className={c(entry.disabled && \"text-gray-300\")}\n                          >\n                            {entry.title}\n                          </span>\n                        </div>\n                      )}\n                    </Menu.Item>\n                  ))}\n                </div>\n              </div>\n            </Menu.Items>\n          </Transition>\n        </div>\n      </div>\n    </Menu>\n  );\n};\n","import {\n  Bars3Icon,\n  CogIcon,\n  PlayIcon,\n  ShareIcon,\n  TrashIcon,\n} from \"@heroicons/react/24/outline\";\nimport c from \"clsx\";\nimport React, { useContext } from \"react\";\nimport { useNavigate } from \"react-router\";\n\nimport { iconSize } from \"../../definitions/iconSizes\";\nimport { useMeQuery } from \"../../generated/types-and-hooks\";\nimport { CtrlDuo } from \"../../lib/components/CtrlDuo\";\nimport { FDMenu } from \"../../lib/components/Menu\";\nimport { AppDispatchContext } from \"../../states/appState\";\nimport {\n  ConfigDispatchContext,\n  ConfigStateContext,\n} from \"../../states/configState\";\n\nexport const PageMenu: React.FC<{ pageId: string }> = ({ pageId }) => {\n  const nav = useNavigate();\n  const appDispatch = useContext(AppDispatchContext);\n  const configDispatch = useContext(ConfigDispatchContext);\n  const configState = useContext(ConfigStateContext);\n  const { data } = useMeQuery();\n  return (\n    <div className=\"flex items-center justify-center w-9 h-9  cursor-pointer shadow-lg\">\n      <CtrlDuo>\n        <FDMenu\n          className=\"z-20\"\n          entries={[\n            {\n              title: \"Settings\",\n              prefix: <CogIcon className={c(iconSize)} />,\n              onClick: () => nav(`/page/${pageId}`),\n            },\n            {\n              title: \"Delete\",\n              prefix: <TrashIcon className={c(iconSize, \"text-danger-400\")} />,\n              onClick: () =>\n                appDispatch.openConfirm({\n                  title: \"Delete this page?\",\n                  text: \"Do you want to delete this page? It will be gone forever\",\n                  onAccept: () => configDispatch.deletePage(pageId),\n                }),\n            },\n            {\n              title: \"Make start page\",\n              prefix: <PlayIcon className={c(iconSize)} />,\n              onClick: () => configDispatch.setStartPage({ pageId }),\n            },\n            {\n              title: configState.pages.byId[pageId].publishData\n                ? configState.pages.byId[pageId].publishData?.createdBy ===\n                  data?.user.id\n                  ? \"Update\"\n                  : \"Fork\"\n                : \"Publish\",\n              prefix: <ShareIcon className={iconSize} />,\n              disabled: process.env.REACT_APP_ENABLE_API !== \"true\" || !data,\n              onClick: () => nav(`/publishpage/${pageId}`),\n            },\n          ]}\n        >\n          <Bars3Icon className=\"w-9 h-9 p-1.5 rounded-full bg-gray-400 hover:bg-gray-300\" />\n        </FDMenu>\n        <TrashIcon\n          onClick={async () => {\n            configDispatch.deletePage(pageId);\n          }}\n          className=\"w-9 h-9 p-1.5 rounded-full bg-danger-600 hover:bg-danger-400\"\n        />\n      </CtrlDuo>\n    </div>\n  );\n};\n","import c from \"clsx\";\r\nimport React, { useContext } from \"react\";\r\nimport { useDrag, useDrop } from \"react-dnd\";\r\n\r\nimport { CtrlDuo } from \"../../lib/components/CtrlDuo\";\r\nimport { Value } from \"../../lib/components/LabelValue\";\r\nimport { TitleInput } from \"../../lib/components/TitleInput\";\r\nimport {\r\n  ConfigDispatchContext,\r\n  ConfigStateContext,\r\n} from \"../../states/configState\";\r\nimport { DisplayButton } from \"../DisplayButton\";\r\nimport { PageMenu } from \"./Menu\";\r\n\r\ninterface IProps {\r\n  pageId: string;\r\n  collectionIndex?: number;\r\n}\r\ninterface IItem {\r\n  pageId: string;\r\n  collectionId?: string;\r\n}\r\nexport const Page: React.FC<IProps> = ({ pageId }) => {\r\n  const configState = useContext(ConfigStateContext);\r\n  const { renamePage, switchPages } = useContext(ConfigDispatchContext);\r\n  const page = configState.pages.byId[pageId];\r\n  const isStartPage =\r\n    configState.pages.sorted.findIndex((pid) => pid === pageId) === 0;\r\n  const [, dragRef] = useDrag<IItem>(() => ({\r\n    type: \"page\",\r\n    item: {\r\n      pageId,\r\n      collectionId: page.isInCollection,\r\n    },\r\n    collect: (monitor) => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n  }));\r\n  const [{ targetPageId, collectionId }, drop] = useDrop<\r\n    IItem,\r\n    any,\r\n    { targetPageId: string; collectionId?: string }\r\n  >({\r\n    accept: \"page\",\r\n    drop: (item, monitor): void => {\r\n      if (!!monitor.getItem().collectionId === !!collectionId)\r\n        switchPages({\r\n          pageAId: targetPageId,\r\n          pageBId: monitor.getItem().pageId,\r\n        });\r\n    },\r\n    collect: () => ({\r\n      targetPageId: pageId,\r\n      collectionId: page.isInCollection,\r\n    }),\r\n  });\r\n  return (\r\n    <div\r\n      ref={dragRef}\r\n      id={`page_${pageId}`}\r\n      className={c(\r\n        \"relative p-2 m-6 rounded-3xl bg-gray-700 shadow-lg\",\r\n        isStartPage && \"border-2 border-primary-400\"\r\n      )}\r\n    >\r\n      <div ref={drop}>\r\n        <div className=\"flex justify-between items-center pl-10 py-4 pr-4 h-16\">\r\n          <CtrlDuo>\r\n            <TitleInput\r\n              onChange={(name) => renamePage({ pageId, name })}\r\n              value={page.name}\r\n              placeholder={`${pageId.slice(-4)} - Click to edit`}\r\n            />\r\n            <Value className=\"italic\">\r\n              {!!isStartPage && \"Start page | \"}\r\n              {page.publishData ? \"published\" : \"local page\"}\r\n            </Value>\r\n          </CtrlDuo>\r\n          <PageMenu pageId={pageId} />\r\n        </div>\r\n      </div>\r\n      <div\r\n        className={c(\r\n          \"p-10 pt-2\",\r\n          \"grid gap-x-8 gap-y-6\",\r\n          `grid-cols-${configState.width}`,\r\n          `grid-rows-${configState.height}`\r\n        )}\r\n      >\r\n        {configState.pages.byId[pageId].displayButtons.map(\r\n          (db, displayIndex) => (\r\n            <DisplayButton\r\n              key={displayIndex}\r\n              displayIndex={displayIndex}\r\n              pageId={pageId}\r\n            />\r\n          )\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import {\n  Bars3Icon,\n  CogIcon,\n  ShareIcon,\n  TrashIcon,\n} from \"@heroicons/react/24/outline\";\nimport c from \"clsx\";\nimport React, { useContext } from \"react\";\nimport { useNavigate } from \"react-router\";\n\nimport { iconSize } from \"../../definitions/iconSizes\";\nimport { CtrlDuo } from \"../../lib/components/CtrlDuo\";\nimport { FDMenu } from \"../../lib/components/Menu\";\nimport { AppDispatchContext } from \"../../states/appState\";\nimport { ConfigDispatchContext } from \"../../states/configState\";\n\n// import { PublishPage } from \"./Publish\";\n\nexport const CollectionMenu: React.FC<{ collectionId: string }> = ({\n  collectionId,\n}) => {\n  const nav = useNavigate();\n  const configDispatch = useContext(ConfigDispatchContext);\n  const appDispatch = useContext(AppDispatchContext);\n  return (\n    <div className=\"flex items-center justify-center w-9 h-9  cursor-pointer shadow-lg\">\n      {/* {process.env.REACT_APP_ENABLE_API === \"true\" && (\n        <PublishCollection\n          isOpen={publishOpen}\n          setOpen={(val) => setPublishOpen(val)}\n          collectionId={collectionId}\n        />\n      )} */}\n\n      <CtrlDuo>\n        <FDMenu\n          className=\"z-30\"\n          entries={[\n            {\n              title: \"Settings\",\n              prefix: <CogIcon className={c(iconSize)} />,\n              onClick: () => {\n                nav(`/collection/${collectionId}`);\n              },\n            },\n            {\n              title: \"Delete\",\n              prefix: <TrashIcon className={c(iconSize, \"text-danger-400\")} />,\n              onClick: () =>\n                appDispatch.openConfirm({\n                  title: \"Delete this collection?\",\n                  text: \"Do you want to delete this collection? It will be gone forever\",\n                  onAccept: () =>\n                    configDispatch.deleteCollection({ collectionId }),\n                }),\n            },\n            {\n              title: \"Publish\",\n              prefix: <ShareIcon className={iconSize} />,\n              disabled: true || process.env.REACT_APP_ENABLE_API !== \"true\",\n              onClick: () => nav(`/publishCollection/${collectionId}`),\n            },\n          ]}\n        >\n          <Bars3Icon className=\"w-9 h-9 p-1.5 rounded-full bg-gray-400 hover:bg-gray-300\" />\n        </FDMenu>\n        <TrashIcon\n          onClick={async () => {\n            configDispatch.deleteCollection({ collectionId });\n          }}\n          className=\"w-9 h-9 p-1.5 rounded-full bg-danger-600 hover:bg-danger-400\"\n        />\n      </CtrlDuo>\n    </div>\n  );\n};\n","import React, { useContext } from \"react\";\nimport { useDrop } from \"react-dnd\";\n\nimport { Label } from \"../../lib/components/LabelValue\";\nimport { TitleInput } from \"../../lib/components/TitleInput\";\nimport {\n  ConfigDispatchContext,\n  ConfigStateContext,\n} from \"../../states/configState\";\nimport { Page } from \"../Page\";\nimport { CollectionMenu } from \"./Menu\";\n\nexport const Collection: React.FC<{ collectionId: string }> = ({\n  collectionId,\n}) => {\n  const configState = useContext(ConfigStateContext);\n  const { renameCollection, setPageCollection } = useContext(\n    ConfigDispatchContext\n  );\n  const collection = configState.collections.byId[collectionId];\n  const [{ targetCollectionId }, drop] = useDrop<\n    { pageId: string },\n    {},\n    { targetCollectionId: string }\n  >({\n    accept: \"page\",\n    drop: (item, monitor): any => {\n      if (!collection.pages.find((p) => p === monitor.getItem().pageId))\n        setPageCollection({\n          pageId: monitor.getItem().pageId,\n          collectionId: targetCollectionId,\n        });\n      return {};\n    },\n    collect: () => ({\n      targetCollectionId: collectionId,\n    }),\n  });\n  return (\n    <div\n      ref={drop}\n      className=\"flex items-center flex-col bg-gray-500 p-6 rounded-3xl m-8\"\n    >\n      <div className=\"flex items-center justify-between w-full\">\n        <TitleInput\n          onChange={(name) => renameCollection({ collectionId, name })}\n          value={collection.name}\n          placeholder={`${collectionId.slice(-4)} - Click to edit`}\n        />\n        <CollectionMenu collectionId={collectionId} />\n      </div>\n      <div className=\"flex flex-wrap justify-evenly items-center\">\n        {collection.pages.length ? (\n          collection.pages.map((pageId) => (\n            <Page key={pageId} pageId={pageId} />\n          ))\n        ) : (\n          <div className=\"flex flex-col p-8 w-80 h-40 justify-center items-center\">\n            <Label hint='Add pages to this collection by clicking their menu button -> \"Settings\"'>\n              This collection is Empty\n            </Label>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n","import React, { useContext } from \"react\";\n\nimport { TitleBox } from \"../../lib/components/Title\";\nimport { ConfigStateContext } from \"../../states/configState\";\nimport { Collection } from \".\";\n\nexport const Collections: React.FC<{ className?: string }> = ({\n  children,\n  className,\n}) => {\n  const configState = useContext(ConfigStateContext);\n  return (\n    <div className=\"flex flex-col justify-center items-center p-12\">\n      <TitleBox title=\"Collections\" center className=\"w-full\">\n        <div className=\"flex flex-wrap justify-evenly items-center w-full h-full mb-16\">\n          {Object.entries(configState.collections.byId).map(\n            ([id, collection]) => (\n              <Collection key={id} collectionId={id} />\n            )\n          )}\n        </div>\n      </TitleBox>\n    </div>\n  );\n};\n","import c from \"clsx\";\nimport React from \"react\";\n\nexport const ContentBody: React.FC = (props) => {\n  return (\n    <div\n      id=\"contentBody\"\n      className={c(\n        \"flex-col justify-center items-center w-full h-full overflow-y-auto\"\n      )}\n    >\n      {props.children}\n    </div>\n  );\n};\n","import c from \"clsx\";\r\nimport React from \"react\";\r\n\r\nexport interface IFDButtonProps {\r\n  className?: string;\r\n  disabled?: boolean;\r\n  type?: \"danger\" | \"normal\" | \"primary\" | \"success\";\r\n  children?: any;\r\n  onClick?: (e: any) => void;\r\n  size?: 1 | 2 | 3;\r\n  prefix?: JSX.Element;\r\n  suffix?: JSX.Element;\r\n  title?: string;\r\n}\r\n\r\nexport const FDButton = ({\r\n  className,\r\n  disabled = false,\r\n  size = 2,\r\n  type = \"normal\",\r\n  onClick,\r\n  children,\r\n  prefix,\r\n  suffix,\r\n  title,\r\n}: IFDButtonProps) => {\r\n  const sizeClasses = c(\r\n    size === 1 && \"px-3 py-0 space-x-2\",\r\n    size === 2 && \"px-4 py-1 space-x-2\",\r\n    size === 3 && \"px-5 py-2 space-x-2\"\r\n  );\r\n\r\n  const typeClasses = c(\r\n    type === \"danger\" &&\r\n      \"bg-danger-500 shadow-lg text-white hover:bg-danger-400 hover:shadow-xl\",\r\n    type === \"normal\" &&\r\n      (!disabled\r\n        ? \"bg-gray-400 shadow-lg text-white hover:bg-gray-300 hover:shadow-xl\"\r\n        : \"text-gray-400 bg-gray-300\"),\r\n    type === \"success\" &&\r\n      (!disabled\r\n        ? \"bg-success-600 shadow-lg text-white hover:bg-success-500 hover:shadow-xl\"\r\n        : \"text-gray-200 bg-success-400\"),\r\n    type === \"primary\" &&\r\n      (!disabled\r\n        ? \"bg-primary-600 shadow-lg text-white hover:bg-primary-500 hover:shadow-xl\"\r\n        : \"text-gray-300 bg-primary-200\"),\r\n    disabled && \"cursor-not-allowed\"\r\n  );\r\n\r\n  return (\r\n    <div\r\n      onClick={disabled ? () => {} : onClick}\r\n      title={title}\r\n      className={`cursor-pointer inline-flex items-center text-lg font-normal tracking-wider rounded-md select-none min-w-0 ${sizeClasses} ${typeClasses} ${className}`}\r\n    >\r\n      {!!prefix && <span>{prefix}</span>}\r\n      <span className=\"overflow-hidden overflow-ellipsis whitespace-nowrap\">\r\n        {children}\r\n      </span>\r\n      {!!suffix && <span>{suffix}</span>}\r\n    </div>\r\n  );\r\n};\r\n","import { PlusCircleIcon } from \"@heroicons/react/24/outline\";\nimport React, { useContext } from \"react\";\n\nimport { FDButton } from \"../lib/components/Button\";\nimport { TitleBox } from \"../lib/components/Title\";\nimport { ConfigDispatchContext } from \"../states/configState\";\n\nexport const FirstPage: React.FC<{ className?: string }> = ({\n  children,\n  className,\n}) => {\n  const configDispatch = useContext(ConfigDispatchContext);\n  return (\n    <div className=\"flex flex-col justify-center h-full items-center\">\n      <TitleBox title=\"Create your first page\" className=\"mb-8\">\n        <div className=\"flex justify-center\">\n          <FDButton\n            prefix={<PlusCircleIcon className=\"w-6 h-6\" />}\n            size={3}\n            type=\"primary\"\n            onClick={() => configDispatch.addPage({ startPage: true })}\n          >\n            Add Page\n          </FDButton>\n        </div>\n      </TitleBox>\n    </div>\n  );\n};\n","import { Listbox, Transition } from \"@headlessui/react\";\nimport { CheckIcon, ChevronUpDownIcon } from \"@heroicons/react/24/outline\";\nimport c from \"clsx\";\nimport React, { Fragment } from \"react\";\nexport interface SelectOption {\n  value: any;\n  text: string;\n}\nexport const FDSelect: React.FC<{\n  disabled?: boolean;\n  className?: string;\n  onChange: (value: any) => any;\n  value: any;\n  options: SelectOption[];\n}> = ({ disabled, onChange, value, className, options }) => {\n  return (\n    <Listbox value={value} onChange={onChange} disabled={disabled}>\n      <div className=\"relative\">\n        <Listbox.Button\n          className={c(\n            \"py-1 pl-3 pr-10 text-left bg-gray-400 rounded-md shadow-md\",\n            \"cursor-default focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-white focus-visible:ring-offset-orange-300 focus-visible:ring-offset-2 focus-visible:border-indigo-500\",\n            className\n          )}\n        >\n          <span className=\"block truncate\">\n            {options.find((option) => option.value === value)?.text}\n          </span>\n          <span className=\"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none\">\n            <ChevronUpDownIcon\n              className=\"w-5 h-5 text-gray-50\"\n              aria-hidden=\"true\"\n            />\n          </span>\n        </Listbox.Button>\n        <Transition\n          as={Fragment}\n          enter=\"transition duration-100 ease-out\"\n          enterFrom=\"transform -translate-y-2 opacity-0\"\n          enterTo=\"transform -translate-y-0 opacity-100\"\n          leave=\"transition duration-75 ease-out\"\n          leaveFrom=\"transform -translate-y-0 opacity-100\"\n          leaveTo=\"transform -translate-y-2 opacity-0\"\n        >\n          <Listbox.Options className=\"absolute mt-2 bg-gray-400 py-2 rounded-md select-none overflow-y-auto max-h-72 z-50 -trans\">\n            {options.map((option, index) => (\n              <Listbox.Option className=\"\" key={index} value={option.value}>\n                {({ selected, active }) => (\n                  <div\n                    className={c(\n                      \"flex items-center w-full p-2 pl-10 relative mr-4\",\n                      !!active && \"bg-gray-300\",\n                      !!selected && \"bg-primary-600\"\n                    )}\n                  >\n                    {!!selected && (\n                      <CheckIcon className=\"h-5 w-5 absolute top-3 left-3\" />\n                    )}\n                    {option.text}\n                  </div>\n                )}\n              </Listbox.Option>\n            ))}\n          </Listbox.Options>\n        </Transition>\n      </div>\n    </Listbox>\n  );\n  // return (\n  //   <select\n  //     defaultValue={defaultValue}\n  //     className={c(\"form-select block p-1 bg-gray-400 rounded\", className)}\n  //     onChange={onChange}\n  //     value={value}\n  //   >\n  //     {children}\n  //   </select>\n  // );\n};\n","import { writeBinaryFile } from \"@tauri-apps/api/fs\";\r\n\r\nexport const download = async (data: Buffer) => {\r\n  if (\"__TAURI_IPC__\" in window) {\r\n    // todo: fix this not downloading\r\n    const { save } = await import(\"@tauri-apps/api/dialog\");\r\n    const path = await save({\r\n      defaultPath: \"config.bin\",\r\n    });\r\n    if (!path) return;\r\n    await writeBinaryFile(path, data);\r\n  } else {\r\n    var a = document.createElement(\"a\");\r\n    document.body.appendChild(a);\r\n    const blob = new Blob([data], { type: \"octet/stream\" });\r\n    const url = window.URL.createObjectURL(blob);\r\n    a.href = url;\r\n    a.download = \"config.bin\";\r\n    a.click();\r\n    window.URL.revokeObjectURL(url);\r\n    a.remove();\r\n  }\r\n};\r\n","import {\n  ArrowDownOnSquareIcon,\n  ArrowUpOnSquareIcon,\n  CheckIcon,\n  Cog8ToothIcon,\n  DocumentArrowDownIcon,\n  DocumentArrowUpIcon,\n} from \"@heroicons/react/24/outline\";\nimport c from \"clsx\";\nimport React, { useContext, useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nimport { iconSize } from \"../definitions/iconSizes\";\nimport { FDButton } from \"../lib/components/Button\";\nimport { Value } from \"../lib/components/LabelValue\";\nimport { FDSelect } from \"../lib/components/SelectInput\";\nimport { createConfigBuffer } from \"../lib/configFile/createBuffer\";\nimport { loadConfigFile } from \"../lib/configFile/loadConfigFile\";\nimport { download } from \"../lib/file/download\";\nimport { isMacOS } from \"../lib/misc/util\";\nimport { AppDispatchContext, AppStateContext } from \"../states/appState\";\nimport {\n  ConfigDispatchContext,\n  ConfigStateContext,\n} from \"../states/configState\";\nimport { LoginLogoutButtons } from \"./LoginButton\";\n\nexport const Header: React.FC<{}> = () => {\n  const configState = useContext(ConfigStateContext);\n  const { hasJson } = useContext(AppStateContext);\n  const { setHasJson, openAlert, setDevLog } = useContext(AppDispatchContext);\n  const { pages } = configState;\n  const { setState } = useContext(ConfigDispatchContext);\n  const { serialApi, ctrlDown, availablePorts, connectedPortIndex } =\n    useContext(AppStateContext);\n\n  const nav = useNavigate();\n  const [isLoading, setIsLoading] = useState(false);\n  const [progress, setProgress] = useState<number>(0);\n  const loadConfigRef = useRef<HTMLInputElement | null>(null);\n  const saveConfigFile = () => {\n    if (Object.keys(pages.byId).length === 0) return;\n    const completeBuffer = createConfigBuffer(configState, true);\n\n    completeBuffer && download(completeBuffer);\n  };\n  const deviceEntries = [\n    { text: \"Disconnected\", value: -1 },\n    ...availablePorts.map((port, index) => ({\n      text: port.replace(\";\", \" \"),\n      value: index,\n    })),\n  ];\n  if (!(window as any).__TAURI_IPC__)\n    deviceEntries.push({ text: \"Connect new...\", value: -2 });\n  return (\n    <div\n      id=\"header\"\n      className={c(\n        \"border-b-2 border-gray-600 bg-gray-700 flex h-24 w-full items-center px-10 shadow-2xl\"\n      )}\n    >\n      <div className={c(\"flex mr-12\")}>\n        <div className={c(\"font-medium text-5xl text-white font-fd\")}>Fresh's </div>\n        <div className={c(\"font-thin text-5xl text-white font-fd\")}>Free</div>\n        {/*\"font-thin text-5xl text-white \"/*/}\n        {/*\"font-thin text-5xl bg-gradient-to-br from-red-100 to-gray-400 rounded-sm\"*/}\n        <div className={c(\"font-medium text-5xl text-white font-fd\")}>Deck</div>\n      </div>\n      <div className={c(\"flex h-14 justify-between items-center w-full\")}>\n        <form\n          className=\"flex items-center space-x-4\"\n          onSubmit={(event) => {\n            event.preventDefault();\n          }}\n        >\n          <input\n            title=\"loadConfig\"\n            className={c(\"hidden\")}\n            type=\"file\"\n            id=\"loadConfig\"\n            ref={loadConfigRef}\n            onChange={(event) => {\n              event.currentTarget.files &&\n                loadConfigFile(event.currentTarget.files, setState);\n            }}\n          ></input>\n          <div className={c(\"flex items-center space-x-4\")}>\n            {serialApi?.connected && !ctrlDown ? (\n              <>\n                <FDButton\n                  prefix={<ArrowUpOnSquareIcon className={iconSize} />}\n                  size={3}\n                  disabled={!hasJson || isLoading}\n                  title={\n                    hasJson\n                      ? \"Load config over serial\"\n                      : \"Cannot load config. FreeDeck stores no JSON. Change it in Settings -> Device\"\n                  }\n                  onClick={async () => {\n                    setIsLoading(true);\n                    await serialApi!\n                      .readConfigFromSerial((rec, size, start) => {\n                        setProgress(rec / size);\n                        if (rec === size)\n                          setDevLog({\n                            path: \"lastReceiveSpeed\",\n                            data:\n                              Math.round(\n                                size / (new Date().getTime() - start.getTime())\n                              ) + \"kb/s\",\n                          });\n                      })\n                      .then((data) => loadConfigFile(data, setState))\n                      .catch((e) =>\n                        openAlert({\n                          title: \"Attention: Error\",\n                          text: e.message,\n                        })\n                      );\n                    setIsLoading(false);\n                  }}\n                >\n                  Load from FreeDeck\n                </FDButton>\n                <FDButton\n                  prefix={<ArrowDownOnSquareIcon className={iconSize} />}\n                  size={3}\n                  disabled={isLoading}\n                  onClick={async () => {\n                    setIsLoading(true);\n                    await serialApi!\n                      .writeConfigOverSerial(\n                        createConfigBuffer(configState, false),\n                        (rec, size, start) => {\n                          setProgress(rec / size);\n                          if (rec === size)\n                            setDevLog({\n                              path: \"lastTransmitSpeed\",\n                              data:\n                                Math.round(\n                                  size /\n                                    (new Date().getTime() - start.getTime())\n                                ) + \"kb/s\",\n                            });\n                        }\n                      )\n                      .then(() => setHasJson(configState.saveJson))\n                      .catch((e) =>\n                        openAlert({\n                          title: \"Attention: Error\",\n                          text: e.message,\n                        })\n                      );\n                    await setIsLoading(false);\n                  }}\n                >\n                  Save to FreeDeck\n                </FDButton>\n                <Value className=\"ml-4\">\n                  {progress > 0 && progress < 1 && (\n                    <div\n                      className=\"w-24 flex justify-between items-center\"\n                      title={`${\n                        isMacOS ? \"Sorry, very slow on mac :(\" : \"working\"\n                      }`}\n                    >\n                      <div className=\"h-8 w-8 rounded-full animate-spin bg-primary-500\">\n                        <div className=\"h-4 w-4  rounded-tl-full bg-primary-200 relative\">\n                          <div className=\"absolute h-5 w-5 -bottom-2.5 -right-2.5 bg-primary-500 rounded-full\" />\n                        </div>\n                      </div>\n                      <div>{`${(progress * 100).toFixed(0)}%`}</div>\n                    </div>\n                  )}\n                  {progress === 1 && (\n                    <div className=\"bg-success-700 h-8 w-8 rounded-full flex justify-center items-center\">\n                      <CheckIcon className=\"h-6 w-6 text-gray-600\" />\n                    </div>\n                  )}\n                </Value>\n              </>\n            ) : (\n              <>\n                <FDButton\n                  prefix={<DocumentArrowUpIcon className={iconSize} />}\n                  size={3}\n                  onClick={() => {\n                    loadConfigRef.current?.click();\n                  }}\n                >\n                  Load Config\n                </FDButton>\n\n                {!!Object.keys(pages).length && (\n                  <FDButton\n                    prefix={<DocumentArrowDownIcon className={iconSize} />}\n                    disabled={!Object.keys(pages).length}\n                    size={3}\n                    onClick={() => saveConfigFile()}\n                  >\n                    Save Config\n                  </FDButton>\n                )}\n              </>\n            )}\n            {serialApi && (\n              <FDSelect\n                options={deviceEntries}\n                value={connectedPortIndex ?? -1}\n                onChange={(value) => {\n                  switch (value) {\n                    case -1:\n                      serialApi?.disconnect();\n                      break;\n                    case -2:\n                      serialApi?.requestNewPort().catch((e) => console.log(e));\n                      break;\n                    default:\n                      serialApi?.connect(value);\n                      break;\n                  }\n                }}\n              />\n            )}\n          </div>\n        </form>\n        <div className={c(\"flex items-center space-x-4\")}>\n          <FDButton\n            prefix={<Cog8ToothIcon className={iconSize} />}\n            onClick={() => nav(\"/settings\")}\n            size={3}\n          >\n            Settings\n          </FDButton>\n\n          {process.env.REACT_APP_ENABLE_API === \"true\" && (\n            <LoginLogoutButtons />\n          )}\n          {process.env.REACT_APP_API_COMING_SOON === \"true\" && (\n            <FDButton\n              onClick={() =>\n                (document.location = \"https://fddev.freeyourstream.com\")\n              }\n              size={3}\n              title=\"Use the beta version to get a sneak peek\"\n            >\n              FreeDeck Hub - Coming soon!\n            </FDButton>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n","import c from \"clsx\";\nimport React, { useContext } from \"react\";\n\nimport { TitleBox } from \"../../lib/components/Title\";\nimport { ConfigStateContext } from \"../../states/configState\";\nimport { Page } from \"./\";\n\nexport const Pages: React.FC<{ className?: string }> = ({\n  children,\n  className,\n}) => {\n  const configState = useContext(ConfigStateContext);\n  return (\n    <div>\n      <div className=\"flex flex-col justify-center items-center p-12\">\n        <TitleBox title=\"Pages\" center className=\"w-full\">\n          <div\n            className={c(\n              \"flex flex-wrap justify-evenly items-center w-full h-full\",\n              className\n            )}\n          >\n            {configState.pages.sorted.map(\n              (id) =>\n                !configState.pages.byId[id].isInCollection && (\n                  <Page pageId={id} key={id} />\n                )\n            )}\n          </div>\n        </TitleBox>\n      </div>\n    </div>\n  );\n};\n","import {\n  PlusCircleIcon,\n  QuestionMarkCircleIcon,\n} from \"@heroicons/react/24/outline\";\nimport { useContext } from \"react\";\nimport { useDrop } from \"react-dnd\";\nimport { Toaster } from \"react-hot-toast\";\nimport { useNavigate } from \"react-router-dom\";\n\nimport { Collections } from \"./containers/Collection/Collections\";\nimport { ContentBody } from \"./containers/ContentBody\";\nimport { FirstPage } from \"./containers/FirstTime\";\nimport { Header } from \"./containers/Header\";\nimport { Pages } from \"./containers/Page/Pages\";\nimport { FDButton } from \"./lib/components/Button\";\nimport {\n  ConfigDispatchContext,\n  ConfigStateContext,\n} from \"./states/configState\";\n\nexport const Body = () => {\n  const nav = useNavigate();\n  const configState = useContext(ConfigStateContext);\n  const { createCollection, addPage, setPageCollection } = useContext(\n    ConfigDispatchContext\n  );\n  const [, drop] = useDrop<{ pageId: string; collectionId: string }>({\n    accept: \"page\",\n    drop: (item, monitor) => {\n      if (!!monitor.getItem().collectionId && monitor.isOver()) {\n        setPageCollection({\n          pageId: monitor.getItem().pageId,\n          collectionId: monitor.getItem().collectionId,\n        });\n      }\n    },\n  });\n  return (\n    <div ref={drop} className=\"flex flex-col h-full w-full\">\n      <Header />\n      <ContentBody>\n        {!!Object.values(configState.pages.byId).filter(\n          (p) => !p.isInCollection\n        ).length && <Pages />}\n        {!Object.values(configState.pages.sorted).length && <FirstPage />}\n        {!!Object.keys(configState.collections.sorted).length &&\n          !!configState.pages.sorted.length && <Collections />}\n      </ContentBody>\n      <Toaster />\n      <div className=\"fixed bottom-5 left-6 z-30\">\n        <FDButton\n          prefix={<QuestionMarkCircleIcon className=\"w-6 h-6\" />}\n          className=\"mr-4\"\n          size={3}\n          type=\"primary\"\n          onClick={() => nav(\"/help\")}\n        >\n          Help\n        </FDButton>\n      </div>\n      {!!Object.keys(configState.pages.sorted).length && (\n        <div className=\"fixed bottom-5 right-6 z-30\">\n          <FDButton\n            prefix={<PlusCircleIcon className=\"w-6 h-6\" />}\n            className=\"mr-4\"\n            size={3}\n            type=\"primary\"\n            onClick={() => createCollection({})}\n          >\n            Add Collection\n          </FDButton>\n          <FDButton\n            prefix={<PlusCircleIcon className=\"w-6 h-6\" />}\n            size={3}\n            type=\"primary\"\n            onClick={() => addPage({})}\n          >\n            Add Page\n          </FDButton>\n        </div>\n      )}\n    </div>\n  );\n};\n","import { invoke } from \"@tauri-apps/api\";\n\nimport { RefState, StateRef } from \"../../App\";\nimport { Config } from \"../../generated\";\nimport { IAppDispatch } from \"../../states/appState\";\n\nconst pressKeys = (args: number[], configState: Config) => {\n  const pageId = configState.pages.sorted[args[0]];\n  const button = configState.pages.byId[pageId].displayButtons[args[1]].button;\n  const text = args[2]\n    ? button.secondary.values.text\n    : button.primary.values.text;\n  invoke(\"press_keys\", { keyString: text ?? \"nothing\" });\n};\n\nexport const saveCurrentPage = (\n  result: number,\n  appDispatch: IAppDispatch,\n  stateRef: StateRef\n) => {\n  let data: RefState[\"deck\"];\n  if (result < 0) {\n    data = {\n      currentPage: Math.abs(result + 1),\n      dontSwitchPage: true,\n    };\n  } else if (result >= 0) {\n    data = { currentPage: result, dontSwitchPage: false };\n  } else {\n    data = { currentPage: null, dontSwitchPage: false };\n  }\n  stateRef.current.deck = data;\n  appDispatch.setDeck(data);\n};\n\nexport const runCommand = (\n  command: number,\n  args: number[],\n  configState: Config,\n  appDispatch: IAppDispatch,\n  refData: StateRef\n) => {\n  switch (command) {\n    case 0x10:\n      pressKeys(args, configState);\n      break;\n    case 0x20:\n      saveCurrentPage(args[0], appDispatch, refData);\n      break;\n  }\n};\n","import { invoke } from \"@tauri-apps/api\";\nimport { useEffect } from \"react\";\nimport * as workerInterval from \"worker-interval\";\n\nimport { Config } from \"../../../generated\";\nimport { AppState } from \"../../../states/appState\";\n\nlet lastWindowName = \"\";\n\nconst findPage = (configState: Config, name: string): number => {\n  for (let i = 0; i < configState.pages.sorted.length; i++) {\n    const page = configState.pages.byId[configState.pages.sorted[i]];\n    if (page.isInCollection) continue;\n    if (page.usePageNameAsWindowName) {\n      if (!page.name) continue;\n      if (name.toLowerCase().indexOf(page.name.toLowerCase()) !== -1) {\n        return i;\n      }\n    } else {\n      if (!page.windowName) continue;\n      const windowNames = page.windowName\n        .split(/[,\\n]/)\n        .map((s) => s.trim().toLowerCase());\n      for (const windowName of windowNames) {\n        if (name.toLowerCase().indexOf(windowName) !== -1) return i;\n      }\n    }\n  }\n  return -1;\n};\nconst findCollectionPage = (configState: Config, name: string): number => {\n  for (let i = 0; i < configState.collections.sorted.length; i++) {\n    const col = configState.collections.byId[configState.collections.sorted[i]];\n    if (col.useCollectionNameAsWindowName) {\n      if (!col.name) continue;\n      if (name.toLowerCase().indexOf(col.name.toLowerCase())) {\n        return i;\n      }\n    } else {\n      if (!col.windowName) continue;\n      const windowNames = col.windowName\n        .split(/[,\\n]/)\n        .map((s) => s.trim().toLowerCase());\n      for (const windowName of windowNames) {\n        if (name.toLowerCase().indexOf(windowName) !== -1) return i;\n      }\n    }\n  }\n  return -1;\n};\n\nconst switchToPage = async (\n  windowName: string,\n  pageIndex: number,\n  appState: AppState\n) => {\n  const currentPageIndex = await appState.serialApi?.getCurrentPage();\n  if ([undefined, pageIndex].includes(currentPageIndex)) return;\n  if (currentPageIndex! < 0) {\n    lastWindowName = \"\";\n    return;\n  }\n  lastWindowName = windowName;\n  appState.serialApi?.setCurrentPage(pageIndex);\n};\n\nconst switchToCollection = async (\n  windowName: string,\n  configState: Config,\n  appState: AppState\n) => {\n  const collectionIndex = findCollectionPage(configState, windowName);\n  if (collectionIndex === -1) return;\n  const currentPageIndex = await appState.serialApi?.getCurrentPage();\n  if (currentPageIndex === undefined) return;\n  if (currentPageIndex < 0) {\n    lastWindowName = \"\";\n    return;\n  }\n  const currentPageId = configState.pages.sorted[currentPageIndex!];\n  const collection =\n    configState.collections.byId[\n      configState.collections.sorted[collectionIndex]\n    ];\n  if (collection.pages.includes(currentPageId)) return;\n  const pageFoundIndex = configState.pages.sorted.findIndex(\n    (id) => id === collection.pages[0]\n  );\n  if (pageFoundIndex === -1) return;\n  lastWindowName = windowName;\n  appState.serialApi?.setCurrentPage(pageFoundIndex);\n};\n\nconst switchToPageOrCollection = async (\n  configState: Config,\n  appState: AppState\n) => {\n  try {\n    let windowName = await invoke<string>(\"get_current_window\");\n    if (windowName === lastWindowName) return;\n    let pageIndex = findPage(configState, windowName);\n    if (pageIndex === -1) {\n      await switchToCollection(windowName, configState, appState);\n    } else {\n      await switchToPage(windowName, pageIndex, appState);\n    }\n  } catch (e) {\n    console.log(e);\n  }\n};\n\nexport const usePageSwitcher = (configState: Config, appState: AppState) => {\n  useEffect(() => {\n    if (!(window as any).__TAURI_IPC__) return () => {};\n\n    let running = false;\n\n    const interval = workerInterval.setInterval(async () => {\n      if (!running && appState.autoPageSwitcherEnabled) {\n        running = true;\n        await switchToPageOrCollection(configState, appState);\n        running = false;\n      }\n    }, 80);\n\n    return () => {\n      if (interval) workerInterval.clearInterval(interval);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [configState, appState.serialApi, appState.autoPageSwitcherEnabled]);\n};\n","import { StateRef } from \"../../../App\";\nimport { Config } from \"../../../generated\";\nimport { AppState, IAppDispatch } from \"../../../states/appState\";\nimport { IConfigDispatch } from \"../../../states/configState\";\nimport { useLiveData } from \"./liveData\";\nimport { usePageSwitcher } from \"./pageSwitcher\";\nimport { usePersistentConfig } from \"./persistentConfig\";\nimport { useSerialCommand } from \"./serialCommand\";\n\nexport const useBackgroundTasks = (\n  configState: Config,\n  configDispatch: IConfigDispatch,\n  appState: AppState,\n  appDispatch: IAppDispatch,\n  refState: StateRef\n) => {\n  usePersistentConfig(configDispatch, appDispatch);\n  usePageSwitcher(configState, appState);\n\n  useSerialCommand(configState, appState, appDispatch, refState);\n  useLiveData(configState, appState, refState);\n};\n","import { listen } from \"@tauri-apps/api/event\";\nimport { useEffect } from \"react\";\n\nimport { IAppDispatch } from \"../../../states/appState\";\nimport { IConfigDispatch } from \"../../../states/configState\";\nimport { convertCurrentConfig } from \"../../configFile/parseConfig\";\n\nexport const usePersistentConfig = (\n  configDispatch: IConfigDispatch,\n  appDispatch: IAppDispatch\n) => {\n  useEffect(() => {\n    const handleStartup = async () => {\n      const config = localStorage.getItem(\"config\");\n\n      if (config) {\n        const parsed = JSON.parse(config);\n        const converted = await convertCurrentConfig(parsed);\n        configDispatch.setState(converted);\n      }\n\n      if (!(window as any).__TAURI_IPC__) return;\n\n      const value = localStorage.getItem(\"autoPageSwitcherEnabled\");\n      const autoPageSwitcherEnabled = value === null ? true : JSON.parse(value);\n\n      appDispatch.toggleAutoPageSwitcher(autoPageSwitcherEnabled);\n\n      await listen(\"toggle_aps\", (data) => {\n        appDispatch.toggleAutoPageSwitcher(undefined);\n      });\n    };\n\n    handleStartup();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n};\n","import { UnlistenFn, listen } from \"@tauri-apps/api/event\";\nimport { useEffect } from \"react\";\n\nimport { StateRef } from \"../../../App\";\nimport { Config } from \"../../../generated\";\nimport { AppState, IAppDispatch } from \"../../../states/appState\";\nimport { sleep } from \"../../misc/util\";\nimport { runCommand } from \"../../serial/commands\";\n\nexport const useSerialCommand = (\n  configState: Config,\n  appState: AppState,\n  appDispatch: IAppDispatch,\n  refData: StateRef\n) => {\n  useEffect(() => {\n    if (!(window as any).__TAURI_IPC__) return;\n\n    let isCancelled = false;\n    let unlistenSerialCommand: UnlistenFn | undefined;\n\n    const startListen = async () => {\n      await sleep(250);\n      if (isCancelled) return;\n\n      unlistenSerialCommand = await listen<null>(\"serial_command\", async () => {\n        const { command, args } = await appState.serialApi!.readSerialCommand();\n        runCommand(command, args, configState, appDispatch, refData);\n      });\n    };\n\n    startListen();\n\n    return () => {\n      isCancelled = true;\n      unlistenSerialCommand?.();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [configState]);\n};\n","import { XMarkIcon } from \"@heroicons/react/24/outline\";\nimport React from \"react\";\nimport toast, { Toast } from \"react-hot-toast\";\n\nimport { FDButton } from \"../components/Button\";\nimport { TitleBox } from \"../components/Title\";\n\ninterface IProps {\n  primary?: (t: Toast) => JSX.Element;\n  danger?: (t: Toast) => JSX.Element;\n  title?: string;\n  text: string;\n}\nexport const createToast = ({ danger, primary, title, text }: IProps) => {\n  toast(\n    (t) => (\n      <div className=\"\">\n        {!!title && (\n          <TitleBox title={title} className=\"mb-2\">\n            <div className=\"mb-8\">{text}</div>\n            <div className=\"flex justify-end gap-2\">\n              {!!primary && primary(t)}\n              {!!danger ? (\n                danger(t)\n              ) : (\n                <FDButton\n                  prefix={<XMarkIcon className=\"h-4 w-4\" />}\n                  type=\"danger\"\n                  size={2}\n                  onClick={() => toast.dismiss(t.id)}\n                >\n                  Close\n                </FDButton>\n              )}\n            </div>\n          </TitleBox>\n        )}\n      </div>\n    ),\n    {\n      duration: Infinity,\n      position: \"bottom-right\",\n      style: { background: \"#fff0\" },\n      className: \"text-white border-0 p-0 m-0 border-white text-lg\",\n    }\n  );\n};\n","import { Tab } from \"@headlessui/react\";\nimport c from \"clsx\";\nimport React, { Fragment } from \"react\";\n\nexport const TabView: React.FC<{\n  className?: string;\n  tabs: { title: string; prefix: JSX.Element; content: JSX.Element }[];\n  onChange?: (currentIndex: number) => any;\n  activeIndex?: number;\n}> = ({ tabs, className, activeIndex = 0, onChange }) => {\n  return (\n    <Tab.Group\n      vertical\n      defaultIndex={activeIndex}\n      key={activeIndex}\n      onChange={(index) => onChange?.(index)}\n    >\n      <div className={c(\"flex\", className)}>\n        <Tab.List className=\"flex flex-col gap-1 bg-gray-800 p-2\">\n          {tabs.map((tab, index) => (\n            <Tab key={index}>\n              {({ selected }) => (\n                <div\n                  className={c(\n                    \"w-60 inline-flex items-center font-normal text-lg tracking-wide rounded-lg  whitespace-nowrap  p-3  cursor-pointer select-none \",\n                    selected\n                      ? \"text-white bg-primary-600 shadow-xl \"\n                      : \"text-white hover:bg-gray-400\"\n                  )}\n                  // onClick={() => setActiveTabIndex(index)}\n                >\n                  <span className=\"mr-2\">{tab.prefix}</span>\n                  {tab.title}\n                </div>\n              )}\n            </Tab>\n          ))}\n        </Tab.List>\n        <Tab.Panels as={Fragment}>\n          {tabs.map((tab, index) => (\n            <Tab.Panel key={index} className=\"w-full flex\">\n              {tab.content}\n            </Tab.Panel>\n          ))}\n        </Tab.Panels>\n      </div>\n    </Tab.Group>\n  );\n};\n","import { Dialog, Transition } from \"@headlessui/react\";\nimport React, { Fragment } from \"react\";\n\nimport { FDButton } from \"./Button\";\nimport { TitleBox } from \"./Title\";\n\nexport const Alert: React.FC<{\n  title: string;\n  text: string;\n  onClose: () => any;\n  isOpen: boolean;\n}> = ({ isOpen, onClose, title, text }) => {\n  return (\n    <Transition show={isOpen} as={Fragment}>\n      <Dialog\n        className=\"flex justify-center items-center fixed z-40 inset-0\"\n        onClose={() => onClose()}\n      >\n        <Transition.Child\n          as={Fragment}\n          enter=\"transition duration-50 ease-out\"\n          enterFrom=\"transform opacity-0\"\n          enterTo=\"transform opacity-100\"\n          leave=\"transition duration-50 ease-out\"\n          leaveFrom=\"transform opacity-100\"\n          leaveTo=\"transform opacity-0\"\n        >\n          <Dialog.Overlay className=\"fixed inset-0 bg-black z-10 bg-opacity-70\" />\n        </Transition.Child>\n\n        <Transition.Child\n          as={Fragment}\n          enter=\"transition duration-100 ease-out\"\n          enterFrom=\"transform scale-95 translate-y-8 opacity-0\"\n          enterTo=\"transform scale-100 translate-y-0 opacity-70\"\n          leave=\"transition duration-75 ease-out\"\n          leaveFrom=\"transform scale-100 opacity-70\"\n          leaveTo=\"transform scale-95 opacity-0\"\n        >\n          <div className=\"flex flex-col items-start justify-center z-50 rounded-xl shadow-2xl max-w-md break-words\">\n            <Dialog.Title className=\"mb-2\">\n              <TitleBox title={title}>\n                <Dialog.Description className=\"text-lg mb-8\">\n                  {text}\n                </Dialog.Description>\n                <div className=\"flex w-full justify-end gap-2\">\n                  <FDButton onClick={() => onClose()}>Ok</FDButton>\n                </div>\n              </TitleBox>\n            </Dialog.Title>\n          </div>\n        </Transition.Child>\n      </Dialog>\n    </Transition>\n  );\n};\n","import { Dialog, Transition } from \"@headlessui/react\";\nimport React, { Fragment } from \"react\";\n\nimport { FDButton } from \"./Button\";\nimport { TitleBox } from \"./Title\";\n\nexport const Confirm: React.FC<{\n  title: string;\n  text: string;\n  onClose: (value: boolean) => any;\n  isOpen: boolean;\n}> = ({ isOpen, onClose, title, text }) => {\n  return (\n    <Transition show={isOpen} as={Fragment}>\n      <Dialog\n        className=\"flex justify-center items-center fixed z-40 inset-0\"\n        onClose={() => {}}\n      >\n        <Transition.Child\n          as={Fragment}\n          enter=\"transition duration-50 ease-out\"\n          enterFrom=\"transform opacity-0\"\n          enterTo=\"transform opacity-100\"\n          leave=\"transition duration-50 ease-out\"\n          leaveFrom=\"transform opacity-100\"\n          leaveTo=\"transform opacity-0\"\n        >\n          <Dialog.Overlay className=\"fixed inset-0 bg-black z-10 bg-opacity-70\" />\n        </Transition.Child>\n\n        <Transition.Child\n          as={Fragment}\n          enter=\"transition duration-100 ease-out\"\n          enterFrom=\"transform scale-95 translate-y-8 opacity-0\"\n          enterTo=\"transform scale-100 translate-y-0 opacity-70\"\n          leave=\"transition duration-75 ease-out\"\n          leaveFrom=\"transform scale-100 opacity-70\"\n          leaveTo=\"transform scale-95 opacity-0\"\n        >\n          <div className=\"flex flex-col items-start justify-center z-50  max-w-md break-words\">\n            <Dialog.Title className=\"mb-2\">\n              <TitleBox title={title}>\n                <Dialog.Description className=\"text-lg mb-8\">\n                  {text}\n                </Dialog.Description>\n                <div className=\"flex w-full justify-end gap-2\">\n                  <FDButton onClick={() => onClose(false)}>Cancel</FDButton>\n                  <FDButton type=\"danger\" onClick={() => onClose(true)}>\n                    OK\n                  </FDButton>\n                </div>\n              </TitleBox>\n            </Dialog.Title>\n          </div>\n        </Transition.Child>\n      </Dialog>\n    </Transition>\n  );\n};\n","import { useContext } from \"react\";\n\nimport { Alert } from \"./lib/components/Alert\";\nimport { Confirm } from \"./lib/components/Confirm\";\nimport { AppDispatchContext, AppStateContext } from \"./states/appState\";\n\nexport const CustomAlert = () => {\n  const appState = useContext(AppStateContext);\n  const { closeAlert, openAlert, closeConfirm, openConfirm } =\n    useContext(AppDispatchContext);\n  window.advancedAlert = (title, text) => openAlert({ title, text });\n  window.advancedConfirm = (title, text, onAccept) =>\n    openConfirm({ title, text, onAccept });\n\n  return (\n    <>\n      <Alert\n        isOpen={appState.alert.isOpen}\n        text={appState.alert.text}\n        title={appState.alert.title}\n        onClose={() => closeAlert(undefined)}\n      />\n      <Confirm\n        isOpen={appState.confirm.isOpen}\n        text={appState.confirm.text}\n        title={appState.confirm.title}\n        onClose={(value) => closeConfirm({ value })}\n      />\n    </>\n  );\n};\n","import { Dialog, Transition } from \"@headlessui/react\";\r\nimport { XCircleIcon } from \"@heroicons/react/24/solid\";\r\nimport c from \"clsx\";\r\nimport React, { Fragment } from \"react\";\r\n\r\nimport { CustomAlert } from \"../../CustomAlert\";\r\n\r\nexport const FDWindow: React.FC<{\r\n  className?: string;\r\n  visible?: boolean;\r\n  setClose: () => void;\r\n  title?: string;\r\n}> = ({ visible, setClose, children, title, className }) => {\r\n  return (\r\n    <Transition show={visible} as={Fragment} appear={true}>\r\n      <Dialog\r\n        open={visible}\r\n        className=\"flex justify-center items-center fixed z-40 inset-0 m-24\"\r\n        onClose={() => setClose()}\r\n      >\r\n        <Transition.Child\r\n          as={Fragment}\r\n          enter=\"transition duration-50 ease-out\"\r\n          enterFrom=\"transform opacity-0\"\r\n          enterTo=\"transform opacity-100\"\r\n          leave=\"transition duration-50 ease-out\"\r\n          leaveFrom=\"transform opacity-100\"\r\n          leaveTo=\"transform opacity-0\"\r\n        >\r\n          <Dialog.Overlay className=\"fixed inset-0 bg-black z-10 bg-opacity-70\" />\r\n        </Transition.Child>\r\n        <Transition.Child\r\n          as={Fragment}\r\n          enter=\"transition duration-50 ease-out\"\r\n          enterFrom=\"transform scale-95 opacity-0\"\r\n          enterTo=\"transform scale-100 opacity-100\"\r\n          leave=\"transition duration-50 ease-out\"\r\n          leaveFrom=\"transform scale-100 opacity-100\"\r\n          leaveTo=\"transform scale-95 opacity-0\"\r\n        >\r\n          <div\r\n            className={c(\r\n              \"relative bg-gray-900 rounded-2xl z-20 flex flex-col\",\r\n              className\r\n            )}\r\n          >\r\n            <div\r\n              className={c(\r\n                \"h-10 flex  flex-shrink-0 items-center justify-center font-medium text-xl text-white bg-gray-700 rounded-t-2xl\",\r\n                !title?.length && \"hidden\"\r\n              )}\r\n            >\r\n              {title}\r\n            </div>\r\n            <div className={\"absolute top-0.5 right-1\"}>\r\n              <div\r\n                className={\r\n                  \"box-content p-1 rounded-full flex items-center justify-center cursor-pointer\"\r\n                }\r\n                onClick={() => setClose()}\r\n              >\r\n                <XCircleIcon className=\"h-7 w-7 hover:text-danger-500\" />\r\n              </div>\r\n            </div>\r\n            {children}\r\n            <CustomAlert />\r\n          </div>\r\n        </Transition.Child>\r\n      </Dialog>\r\n    </Transition>\r\n  );\r\n};\r\n","import c from \"clsx\";\nimport React from \"react\";\n\nexport const Row: React.FC<{ className?: string; mode?: \"top\" | \"middle\" }> = ({\n  children,\n  className,\n  mode = \"middle\",\n}) => {\n  return (\n    <div\n      className={c(\n        \"flex justify-between my-4\",\n        mode === \"middle\" ? \"items-center\" : \"items-start\",\n        className\n      )}\n    >\n      {children}\n    </div>\n  );\n};\n","import c from \"clsx\";\nimport React from \"react\";\n\nexport const FDSwitch: React.FC<{\n  disabled?: boolean;\n  className?: string;\n  onChange: (value: boolean) => any;\n  value: boolean;\n}> = ({ className, value, onChange, disabled = false }) => {\n  return (\n    <div\n      onClick={() => !disabled && onChange(!value)}\n      className={c(\n        className,\n        \"flex w-12 h-6 rounded-md items-center p-1\",\n        !disabled\n          ? value\n            ? \"bg-success-600\"\n            : \"bg-danger-600\"\n          : value\n          ? \"bg-success-300\"\n          : \"bg-danger-300\"\n      )}\n    >\n      <div\n        className={c(\n          \"w-4 h-4 rounded bg-white transform transition ease-in-out duration-100\",\n          value ? \"translate-x-6\" : \"translate-x-0\"\n        )}\n      />\n    </div>\n  );\n};\n","import c from \"clsx\";\nimport React from \"react\";\n\nexport const TextArea: React.FC<{\n  className?: string;\n  onChange: (value: string) => any;\n  disabled?: boolean;\n  value?: string;\n  placeholder?: string;\n  onEnter?: () => any;\n}> = ({\n  className,\n  children,\n  onChange,\n  value,\n  placeholder,\n  disabled,\n  onEnter,\n}) => {\n  return (\n    <textarea\n      disabled={disabled}\n      placeholder={placeholder}\n      className={c(\n        \"text-base appearance-none py-1 px-2 placeholder-gray-100 resize-none rounded-md\",\n        disabled ? \"text-gray-50\" : \"text-white\",\n        disabled ? \"bg-gray-200\" : \"bg-gray-500\",\n        className\n      )}\n      onChange={(e) => {\n        onChange(e.currentTarget.value);\n      }}\n      onKeyDown={(e) => e.key === \"Enter\" && onEnter && onEnter()}\n      value={value}\n    >\n      {children}\n    </textarea>\n  );\n};\n","import React, { useContext } from \"react\";\n\nimport { Label } from \"../../../lib/components/LabelValue\";\nimport { Row } from \"../../../lib/components/Row\";\nimport { FDSwitch } from \"../../../lib/components/Switch\";\nimport { TextArea } from \"../../../lib/components/TextArea\";\nimport { TitleBox } from \"../../../lib/components/Title\";\nimport {\n  ConfigDispatchContext,\n  ConfigStateContext,\n} from \"../../../states/configState\";\n\nexport const AutoPageSwitcherSettings: React.FC<{ collectionId: string }> = ({\n  collectionId,\n}) => {\n  const configState = useContext(ConfigStateContext);\n  const { setUseCollectionName } = useContext(ConfigDispatchContext);\n  const { changeCollectionWindowName } = useContext(ConfigDispatchContext);\n  const collection = configState.collections.byId[collectionId];\n\n  return (\n    <div className=\"w-full\">\n      <TitleBox title=\"Auto page-switcher\">\n        <Row className=\"h-8\">\n          <Label>Use Page name as window name</Label>\n          <FDSwitch\n            onChange={(value) => setUseCollectionName({ collectionId, value })}\n            value={collection.useCollectionNameAsWindowName}\n          />\n        </Row>\n        <Row mode=\"top\">\n          <Label hint=\"One window name per line or comma seperated\">\n            Window name\n          </Label>\n          <TextArea\n            className=\"w-64 h-64\"\n            placeholder={\n              collection.useCollectionNameAsWindowName\n                ? collection.name\n                : \"Enter window name...\"\n            }\n            disabled={collection.useCollectionNameAsWindowName}\n            value={collection.windowName}\n            onChange={(windowName) =>\n              changeCollectionWindowName({ collectionId, windowName })\n            }\n          />\n        </Row>\n      </TitleBox>\n    </div>\n  );\n};\n","import c from \"clsx\";\nimport React from \"react\";\n\nexport const TextInput: React.FC<{\n  className?: string;\n  disabled?: boolean;\n  onChange: (value: string) => any;\n  onEnter?: () => any;\n  value?: string;\n  placeholder?: string;\n}> = ({\n  className,\n  children,\n  onChange,\n  onEnter,\n  value,\n  placeholder,\n  disabled,\n}) => {\n  return (\n    <input\n      type=\"text\"\n      disabled={disabled}\n      placeholder={placeholder}\n      className={c(\n        \"text-base appearance-none py-1 px-2 placeholder-gray-100 resize-none rounded-md\",\n        disabled ? \"text-gray-50\" : \"text-white\",\n        disabled ? \"bg-gray-200\" : \"bg-gray-500\",\n        className\n      )}\n      onChange={(e) => {\n        onChange(e.currentTarget.value);\n      }}\n      onKeyDown={(e) => e.key === \"Enter\" && onEnter && onEnter()}\n      value={value}\n    >\n      {children}\n    </input>\n  );\n};\n","import React, { useContext } from \"react\";\n\nimport { Label } from \"../../../lib/components/LabelValue\";\nimport { Row } from \"../../../lib/components/Row\";\nimport { TextInput } from \"../../../lib/components/TextInput\";\nimport { TitleBox } from \"../../../lib/components/Title\";\nimport {\n  ConfigDispatchContext,\n  ConfigStateContext,\n} from \"../../../states/configState\";\n\nexport const CollectionGeneralSettings: React.FC<{ collectionId: string }> = ({\n  collectionId,\n}) => {\n  const configState = useContext(ConfigStateContext);\n  const { renameCollection } = useContext(ConfigDispatchContext);\n  const collection = configState.collections.byId[collectionId];\n\n  return (\n    <div className=\"w-full\">\n      <TitleBox title=\"General collection settings\">\n        <Row className=\"h-8\">\n          <Label>Name</Label>\n          <TextInput\n            className=\"w-44\"\n            placeholder=\"Enter page name\"\n            value={collection.name}\n            onChange={(name) => renameCollection({ collectionId, name })}\n          />\n        </Row>\n      </TitleBox>\n    </div>\n  );\n};\n","import { CircleStackIcon, CogIcon } from \"@heroicons/react/24/outline\";\nimport React, { useContext } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\n\nimport { iconSize } from \"../../../definitions/iconSizes\";\nimport { TabView } from \"../../../lib/components/TabView\";\nimport { FDWindow } from \"../../../lib/components/Window\";\nimport { getCollectionName } from \"../../../lib/misc/util\";\nimport { ConfigStateContext } from \"../../../states/configState\";\nimport { AutoPageSwitcherSettings } from \"./AutoPageSwitcher\";\nimport { CollectionGeneralSettings } from \"./General\";\n\nexport const CollectionSettingsModal: React.FC = () => {\n  const params = useParams();\n  const nav = useNavigate();\n  const configState = useContext(ConfigStateContext);\n  const { collectionId } = params;\n\n  if (collectionId === undefined) return <></>;\n\n  const collection = configState.collections.byId[collectionId];\n\n  if (collection === undefined) return <></>;\n  return (\n    <FDWindow\n      className=\"w-dp-settings\"\n      title={`Collection ${getCollectionName(collectionId, collection)}`}\n      visible={true}\n      setClose={() => nav(\"/\")}\n    >\n      <TabView\n        className=\"h-dp-settings\"\n        tabs={[\n          {\n            title: \"General\",\n            content: <CollectionGeneralSettings collectionId={collectionId} />,\n            prefix: <CogIcon className={iconSize} />,\n          },\n          {\n            title: \"Auto Page Switcher\",\n            content: <AutoPageSwitcherSettings collectionId={collectionId} />,\n            prefix: <CircleStackIcon className={iconSize} />,\n          },\n        ]}\n      />\n    </FDWindow>\n  );\n};\n","import React from \"react\";\nimport { useNavigate } from \"react-router\";\n\nimport { FDWindow } from \"../lib/components/Window\";\n\nexport const DeprecatedInfoModal: React.FC<{}> = () => {\n  const nav = useNavigate();\n\n  return (\n    <FDWindow\n      className=\"w-auto h-auto\"\n      visible={true}\n      setClose={() => {\n        nav(\"/\");\n        localStorage.setItem(\"dontShow128Info\", \"true\");\n      }}\n      title=\"Important Info\"\n    >\n      <div className=\"flex flex-col items-center space-y-4 p-8 text-xl\">\n        <div className=\"text-danger-500 text-4xl pb-4\">Attention!</div>\n        <div>I've edited the entire build of this software side and hardware side.</div>\n        <div>This software will ONLY work with JFresh's FreeDeck.</div>\n        <div>If you have problems, click the help button and go to the discussion forum.</div>\n        <div>Thank you for purchasing Fresh's FreeDeck!  ENJOY!</div>\n      </div>\n    </FDWindow>\n  );\n};\n","import {\n  ArrowLeftOnRectangleIcon,\n  PlusCircleIcon,\n} from \"@heroicons/react/24/outline\";\nimport React, { useContext } from \"react\";\n\nimport { EAction } from \"../../../definitions/modes\";\nimport { ButtonSetting, Pages } from \"../../../generated\";\nimport { FDButton } from \"../../../lib/components/Button\";\nimport { Label } from \"../../../lib/components/LabelValue\";\nimport { Row } from \"../../../lib/components/Row\";\nimport { FDSelect } from \"../../../lib/components/SelectInput\";\nimport { scrollToPage } from \"../../../lib/misc/scrollToPage\";\nimport { getPageName } from \"../../../lib/misc/util\";\nimport { ConfigDispatchContext } from \"../../../states/configState\";\n\nexport const ChangePage: React.FC<{\n  secondary: boolean;\n  values: ButtonSetting[\"values\"];\n  previousPage: string;\n  pages: Pages;\n  previousDisplay: number;\n  setValues: (values: ButtonSetting[\"values\"]) => void;\n}> = ({\n  values,\n  previousPage,\n  pages,\n  previousDisplay,\n  setValues,\n  secondary,\n}) => {\n  const configDispatch = useContext(ConfigDispatchContext);\n  return (\n    <>\n      {pages.sorted.length ? (\n        <Row>\n          <Label>Page</Label>\n          <FDSelect\n            className=\"w-48\"\n            value={values[EAction.changePage] ?? \"\"}\n            onChange={(value) =>\n              setValues({ ...values, [EAction.changePage]: value })\n            }\n            options={[\n              { text: \"Select Page\", value: \"\" },\n              ...pages.sorted.map((id) => {\n                const page = pages.byId[id];\n                return { value: id, text: `Go to ${getPageName(id, page)}` };\n              }),\n            ]}\n          />\n        </Row>\n      ) : null}\n      <div className=\"flex justify-center my-2\">\n        {[\"\", undefined].includes(values[EAction.changePage]) ? (\n          <FDButton\n            prefix={<PlusCircleIcon className=\"h-5 w-5\" />}\n            size={2}\n            onClick={async () =>\n              await configDispatch.addPage({\n                previousPage,\n                previousDisplay,\n                secondary,\n              })\n            }\n          >\n            Add Page\n          </FDButton>\n        ) : (\n          <FDButton\n            prefix={<ArrowLeftOnRectangleIcon className=\"h-5 w-5\" />}\n            size={2}\n            onClick={() => scrollToPage(values[EAction.changePage]!)}\n          >\n            Scroll To{\" \"}\n            {getPageName(\n              values[EAction.changePage]!,\n              pages.byId[values[EAction.changePage]!]\n            )}\n          </FDButton>\n        )}\n      </div>\n    </>\n  );\n};\n","export const scrollToPage = (pageId: string) => {\n  const contentBodyRef = document.getElementById(\"contentBody\");\n  const pageRef = document.getElementById(`page_${pageId}`);\n  const headerRef = document.getElementById(\"header\");\n  if (pageRef && contentBodyRef) {\n    contentBodyRef.scrollTo({\n      top: pageRef.offsetTop - (headerRef?.clientHeight ?? 150) + 24,\n    });\n  }\n};\n","import c from \"clsx\";\nimport React from \"react\";\n\nimport { CtrlDuo } from \"./CtrlDuo\";\nimport { Value } from \"./LabelValue\";\n\nexport const FDSlider: React.FC<{\n  className?: string;\n  onChange?: React.ChangeEventHandler<HTMLInputElement>;\n  value: number;\n  min: number;\n  max: number;\n  step?: number;\n  disabled?: boolean;\n}> = ({\n  children,\n  className,\n  onChange,\n  value,\n  min,\n  max,\n  step = 1,\n  disabled = false,\n}) => (\n  <CtrlDuo>\n    <div className=\"relative group\">\n      <input\n        className={c(\n          `rounded-md overflow-hidden appearance-none h-6 w-44 flex-shrink-0 p-1`,\n          disabled ? \"bg-primary-100\" : \"bg-primary-500\",\n          className\n        )}\n        type=\"range\"\n        min={min}\n        max={max}\n        step={step}\n        value={value}\n        disabled={disabled}\n        onChange={onChange}\n        title={\n          disabled ? \"This option only works with Text AND Image provided\" : \"\"\n        }\n        alt={value.toString()}\n      />\n      <div className=\"absolute justify-center hidden group-hover:flex -top-1 right-full z-30\">\n        <div className=\"flex items-center\">\n          <div className=\"bg-gray-400 px-2 border-primary-600 border-2 rounded-md select-none text-lg\">\n            {value}\n          </div>\n          <div className=\"fat-arrow-right z-50\" />\n        </div>\n      </div>\n    </div>\n    <Value>{value}</Value>\n  </CtrlDuo>\n);\n","import React from \"react\";\n\nimport { EAction, FDSettings } from \"../../../definitions/modes\";\nimport { ButtonSetting } from \"../../../generated\";\nimport { Label, Value } from \"../../../lib/components/LabelValue\";\nimport { Row } from \"../../../lib/components/Row\";\nimport { FDSelect } from \"../../../lib/components/SelectInput\";\nimport { FDSlider } from \"../../../lib/components/Slider\";\n\nexport const FreeDeckSettings: React.FC<{\n  values: ButtonSetting[\"values\"];\n  setValues: (values: ButtonSetting[\"values\"]) => void;\n}> = ({ values, setValues }) => {\n  return (\n    <>\n      <Row>\n        <Label>Setting</Label>\n        <FDSelect\n          className=\"w-48\"\n          value={values[EAction.settings].setting}\n          onChange={(value) =>\n            setValues({\n              ...values,\n              [EAction.settings]: {\n                ...values[EAction.settings],\n                setting: value,\n              },\n            })\n          }\n          options={[\n            { text: \"Select Setting\", value: -1 },\n            {\n              text: \"Decrease Brightness\",\n              value: FDSettings.change_brightness,\n            },\n            {\n              text: \"Increase Brightness\",\n              value: FDSettings.change_brightness,\n            },\n            { text: \"Set Brightness\", value: FDSettings.absolute_brightness },\n          ]}\n        />\n      </Row>\n      {values[EAction.settings].setting === FDSettings.absolute_brightness && (\n        <Row>\n          <FDSlider\n            value={values[EAction.settings].value || 128}\n            min={1}\n            max={255}\n            onChange={(e) =>\n              setValues({\n                ...values,\n                [EAction.settings]: {\n                  ...values[EAction.settings],\n                  value: e.target.valueAsNumber,\n                },\n              })\n            }\n          />\n          <Value>\n            {(((values[EAction.settings].value || 128) / 255) * 100).toFixed(0)}\n            %\n          </Value>\n        </Row>\n      )}\n    </>\n  );\n};\n","import React from \"react\";\n\nimport { keys } from \"../../../definitions/keys\";\nimport { EAction } from \"../../../definitions/modes\";\nimport { ButtonSetting } from \"../../../generated/button\";\nimport { FDButton } from \"../../../lib/components/Button\";\nimport { Label } from \"../../../lib/components/LabelValue\";\nimport { Row } from \"../../../lib/components/Row\";\nimport { FDSelect } from \"../../../lib/components/SelectInput\";\nimport { ROW_SIZE } from \"../../../lib/configFile/consts\";\nimport { useTranslateKeyboardLayout } from \"../../../lib/localisation/keyboard\";\n\nconst HotkeyKeys: React.FC<{\n  values: number[];\n  setKeys: (keys: number[]) => void;\n}> = ({ values, setKeys }) => {\n  const translatedKeys = useTranslateKeyboardLayout(values);\n  return (\n    <div className=\"flex flex-wrap gap-1\">\n      {translatedKeys.map((key, index) => (\n        <FDButton\n          size={1}\n          key={`${key}-${index}`}\n          onClick={() => {\n            const newKeys = [...values];\n            newKeys.splice(index, 1);\n            setKeys(newKeys.slice(0, 7));\n          }}\n        >\n          {!!(\n            translatedKeys.slice(0, index + 1).filter((k) => k === key).length %\n            2\n          )\n            ? key\n            : `^${key}`}\n        </FDButton>\n      ))}\n    </div>\n  );\n};\n\nexport const Hotkeys: React.FC<{\n  values: ButtonSetting[\"values\"];\n  setValues: (values: ButtonSetting[\"values\"]) => void;\n}> = ({ setValues, values }) => {\n  const setKeys = (newValues: number[]) =>\n    newValues.length <= ROW_SIZE / 2 - 4 &&\n    setValues({\n      ...values,\n      [EAction.hotkeys]: newValues,\n    });\n  const onHotKey = (e: React.KeyboardEvent<any>, lengthLimit = 7) => {\n    if (e.repeat) return;\n    const key = Object.keys(keys).find(\n      (key) => keys[key]?.js === e.nativeEvent.code\n    );\n    if (!key) return;\n    //ignore backspace\n    if (keys[key]!.hid === 42 && values[EAction.hotkeys].length > 0) {\n      setKeys([\n        ...values[EAction.hotkeys].slice(0, values[EAction.hotkeys].length - 1),\n      ]);\n    } else setKeys([...values[EAction.hotkeys], keys[key]!.hid]);\n  };\n\n  return (\n    <>\n      <Row>\n        <Label>Key</Label>\n        <FDSelect\n          className=\"w-48\"\n          value={0}\n          onChange={(value) => {\n            if (\n              !!values[EAction.hotkeys].find((k) => k === value) &&\n              value >= 0xe0\n            )\n              return;\n            setKeys([...values[EAction.hotkeys], parseInt(value)]);\n          }}\n          options={[\n            { text: \"Choose key\", value: 0 },\n            ...Object.keys(keys).map((keyName) => ({\n              text: keyName,\n              value: keys[keyName]?.hid,\n            })),\n          ]}\n        />\n      </Row>\n      <Row>\n        <div\n          className=\"bg-gray-400 px-2 py-1 w-full rounded text-center\"\n          tabIndex={0}\n          onKeyDown={(e) => onHotKey(e)}\n        >\n          Click/Focus to scan\n        </div>\n      </Row>\n      <Row>\n        <div>\n          <HotkeyKeys setKeys={setKeys} values={values[EAction.hotkeys]} />\n        </div>\n      </Row>\n    </>\n  );\n};\n","import React from \"react\";\n\nimport { ButtonSetting, Pages } from \"../../../generated\";\nimport { Label } from \"../../../lib/components/LabelValue\";\nimport { Row } from \"../../../lib/components/Row\";\nimport { FDSelect } from \"../../../lib/components/SelectInput\";\nimport { FDSwitch } from \"../../../lib/components/Switch\";\nimport { getPageName } from \"../../../lib/misc/util\";\n\nexport const LeavePage: React.FC<{\n  value: ButtonSetting[\"leavePage\"];\n  pages: Pages;\n  primary: boolean;\n  setValue: (value: ButtonSetting[\"leavePage\"]) => void;\n}> = ({ value, pages, setValue, primary }) => {\n  const startPage = pages.sorted[0];\n  return (\n    <>\n      {pages.sorted.length ? (\n        <>\n          <Row>\n            <Label>Change Page after press</Label>\n            <FDSwitch\n              value={value.enabled}\n              onChange={(enabled) =>\n                setValue({ enabled, pageId: value.pageId })\n              }\n            />\n          </Row>\n          {value.enabled && (\n            <Row>\n              <Label>Page</Label>\n              <FDSelect\n                className=\"w-48\"\n                value={value.pageId || startPage}\n                onChange={(value) => setValue({ enabled: true, pageId: value })}\n                options={[\n                  { text: \"Select Page\", value: \"\" },\n                  ...pages.sorted.map((id) => {\n                    const page = pages.byId[id];\n                    return {\n                      value: id,\n                      text: `Go to ${getPageName(id, page)}`,\n                    };\n                  }),\n                ]}\n              />\n            </Row>\n          )}\n        </>\n      ) : null}\n    </>\n  );\n};\n","import React from \"react\";\n\nimport { EMediaKeys, MediaKeys } from \"../../../definitions/keys\";\nimport { EAction } from \"../../../definitions/modes\";\nimport { ButtonSetting } from \"../../../generated/button\";\nimport { Label } from \"../../../lib/components/LabelValue\";\nimport { Row } from \"../../../lib/components/Row\";\nimport { FDSelect } from \"../../../lib/components/SelectInput\";\n\nexport const SpecialKeys: React.FC<{\n  values: ButtonSetting[\"values\"];\n  setValues: (values: ButtonSetting[\"values\"]) => void;\n}> = ({ values, setValues }) => {\n  return (\n    <Row>\n      <Label>Key</Label>\n      <FDSelect\n        className=\"w-48\"\n        value={values[EAction.special_keys] ?? 0}\n        onChange={(value) =>\n          setValues({ ...values, [EAction.special_keys]: parseInt(value) })\n        }\n        options={[\n          { text: \"Choose key\", value: 0 },\n          // @ts-ignore\n          ...MediaKeys.map((key) => ({ value: EMediaKeys[key], text: key })),\n        ]}\n      />\n    </Row>\n  );\n};\n","import React from \"react\";\n\nimport { EAction } from \"../../../definitions/modes\";\nimport { ButtonSetting } from \"../../../generated/button\";\n\nexport const Text: React.FC<{\n  values: ButtonSetting[\"values\"];\n  setValues: (values: ButtonSetting[\"values\"]) => void;\n}> = ({ values, setValues }) => {\n  const setKeys = (newValues: string) =>\n    setValues({\n      ...values,\n      [EAction.text]: newValues,\n    });\n  const onKey = (\n    e: React.ChangeEvent<HTMLTextAreaElement>,\n    lengthLimit = 7\n  ) => {\n    setKeys(e.target.value);\n  };\n  return (\n    <>\n      <textarea\n        placeholder=\"Enter your text here\"\n        className=\"bg-gray-400 my-2 rounded-lg resize-none p-2 w-full h-60\"\n        rows={12}\n        onChange={(e) => {\n          onKey(e, 15);\n        }}\n        value={values[EAction.text]}\n      />\n      <span>This only works with the configurator app installed and running. Check the help to find the download</span>\n    </>\n  );\n};\n","import React, { useContext } from \"react\";\n\nimport { EAction } from \"../../../definitions/modes\";\nimport { ButtonSetting } from \"../../../generated\";\nimport { Label } from \"../../../lib/components/LabelValue\";\nimport { Row } from \"../../../lib/components/Row\";\nimport { FDSelect } from \"../../../lib/components/SelectInput\";\nimport { TitleBox } from \"../../../lib/components/Title\";\nimport {\n  ConfigDispatchContext,\n  ConfigStateContext,\n} from \"../../../states/configState\";\nimport { ChangePage } from \"./ChangePage\";\nimport { FreeDeckSettings } from \"./FreeDeckSettings\";\nimport { Hotkeys } from \"./Hotkeys\";\nimport { LeavePage } from \"./LeavePage\";\nimport { SpecialKeys } from \"./SpecialKeys\";\nimport { Text } from \"./Text\";\n\nexport const Action: React.FC<{\n  pageId: string;\n  buttonIndex: number;\n  buttonSettings: ButtonSetting;\n  title: string;\n  primary: boolean;\n}> = ({ buttonSettings, title, pageId, buttonIndex, primary }) => {\n  const configDispatch = useContext(ConfigDispatchContext);\n  const configState = useContext(ConfigStateContext);\n  const priOrSec = primary ? \"primary\" : \"secondary\";\n\n  const setMode = (mode: EAction) => {\n    configDispatch.setButtonSettings({\n      pageId,\n      buttonIndex,\n      priOrSec,\n      buttonSettings: {\n        ...buttonSettings,\n        mode,\n      },\n    });\n  };\n\n  const setValues = (values: ButtonSetting[\"values\"]) =>\n    configDispatch.setButtonSettings({\n      pageId,\n      buttonIndex,\n      priOrSec,\n      buttonSettings: {\n        ...buttonSettings,\n        values: {\n          ...values,\n        },\n      },\n    });\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      <TitleBox title={title} className=\"mb-2 h-full\">\n        <>\n          <Row>\n            <Label>Mode</Label>\n            <FDSelect\n              className=\"w-48\"\n              value={buttonSettings.mode}\n              onChange={(value) => setMode(value)}\n              options={[\n                { value: EAction.noop, text: \"Do nothing\" },\n                { value: EAction.changePage, text: \"Change Page\" },\n                { value: EAction.hotkeys, text: \"Hot Key\" },\n                { value: EAction.special_keys, text: \"Special Keys\" },\n                { value: EAction.text, text: \"Text (App only)\" },\n                { value: EAction.settings, text: \"Settings\" },\n              ]}\n            />\n          </Row>\n          {buttonSettings.mode === EAction.hotkeys && (\n            <Hotkeys\n              values={buttonSettings.values}\n              setValues={(values) => setValues(values)}\n            />\n          )}\n          {buttonSettings.mode === EAction.changePage && (\n            <ChangePage\n              values={buttonSettings.values}\n              previousPage={pageId}\n              pages={configState.pages}\n              previousDisplay={buttonIndex}\n              setValues={(values) => setValues(values)}\n              secondary={!primary}\n            />\n          )}\n          {buttonSettings.mode === EAction.special_keys && (\n            <SpecialKeys\n              values={buttonSettings.values}\n              setValues={(values) => setValues(values)}\n            />\n          )}\n          {buttonSettings.mode === EAction.text && (\n            <Text\n              values={buttonSettings.values}\n              setValues={(values) => setValues(values)}\n            />\n          )}\n          {buttonSettings.mode === EAction.settings && (\n            <FreeDeckSettings\n              values={buttonSettings.values}\n              setValues={(values) => setValues(values)}\n            />\n          )}\n          {buttonSettings.mode !== EAction.changePage && (\n            <LeavePage\n              primary={primary}\n              value={\n                configState.pages.byId[pageId].displayButtons[buttonIndex]\n                  .button[primary ? \"primary\" : \"secondary\"].leavePage\n              }\n              pages={configState.pages}\n              setValue={(value) =>\n                configDispatch.setLeavePage({\n                  buttonIndex,\n                  pageId,\n                  targetPageId: value.pageId,\n                  enabled: value.enabled,\n                  primary: primary,\n                })\n              }\n            />\n          )}\n        </>\n      </TitleBox>\n    </div>\n  );\n};\n","import React, { useContext } from \"react\";\n\nimport { ConfigStateContext } from \"../../../states/configState\";\nimport { Action } from \"./Action\";\n\nexport const ButtonSettingsContainer: React.FC<{\n  pageId: string;\n  displayIndex: number;\n}> = ({ pageId, displayIndex }) => {\n  const { pages } = useContext(ConfigStateContext);\n  const button = pages.byId[pageId].displayButtons[displayIndex].button;\n  return (\n    <div className=\"flex flex-col h-full w-full p-8\">\n      <div className=\"grid grid-cols-2 grid-rows-1 gap-2 h-full mb-4\">\n        <div className=\"relative flex flex-col\">\n          <Action\n            primary={true}\n            title=\"Short press\"\n            pageId={pageId}\n            buttonIndex={displayIndex}\n            buttonSettings={button.primary}\n          />\n        </div>\n        <div className=\"relative flex flex-col\">\n          <Action\n            primary={false}\n            title=\"Long press\"\n            pageId={pageId}\n            buttonIndex={displayIndex}\n            buttonSettings={button.secondary}\n          />\n        </div>\n      </div>\n      {(button.primary.mode === \"hotkeys\" ||\n        button.secondary.mode === \"hotkeys\") && (\n        <div className=\"mt-auto text-center\">\n          <div>Disclaimer for Firefox and Safari:</div>\n          <p>\n            If you have a non-US keyboard, the buttons recognized will not show\n            the buttons on your keyboard. But it will still work like expected\n            :) I would love to show the buttons as they are on your keyboard,\n            but that is not so easy as i hoped. If you can help, please feel\n            free to contribute!\n          </p>\n        </div>\n      )}\n    </div>\n  );\n};\n","import {\n  ArrowPathIcon,\n  Bars3Icon,\n  ChevronDoubleDownIcon,\n  PhotoIcon,\n  TrashIcon,\n} from \"@heroicons/react/24/outline\";\nimport c from \"clsx\";\nimport React, { useContext } from \"react\";\nimport { useDropzone } from \"react-dropzone\";\n\nimport { iconSize } from \"../../../definitions/iconSizes\";\nimport { ImagePreview } from \"../../../lib/components/ImagePreview\";\nimport { FDMenu, MenuEntry } from \"../../../lib/components/Menu\";\nimport {\n  ConfigDispatchContext,\n  ConfigStateContext,\n} from \"../../../states/configState\";\n\nexport const DropDisplay = ({\n  onDrop,\n  pageId,\n  displayIndex,\n}: {\n  onDrop: (acceptedFiles: File[]) => Promise<void> | void;\n  displayIndex: number;\n  pageId: string;\n}) => {\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: [\".jpg\", \".jpeg\", \".png\"],\n  });\n  const configState = useContext(ConfigStateContext);\n  const display =\n    pageId === \"dbd\"\n      ? configState.defaultBackDisplay.display\n      : configState.pages.byId[pageId].displayButtons[displayIndex].display;\n  const configDispatch = useContext(ConfigDispatchContext);\n  const entries: MenuEntry[] = [];\n  if (pageId === \"dbd\") {\n    entries.push({\n      title: \"Reset to default\",\n      onClick: () => configDispatch.resetDefaultBackButton(undefined),\n      prefix: <ArrowPathIcon className={c(iconSize, \"text-danger-400\")} />,\n    });\n  } else {\n    entries.push(\n      {\n        title: \"Delete image\",\n        onClick: () =>\n          configDispatch.deleteImage({\n            buttonIndex: displayIndex,\n            pageId: pageId,\n          }),\n\n        prefix: <TrashIcon className={c(iconSize, \"text-danger-400\")} />,\n      },\n      {\n        title: \"Make back button\",\n        onClick: () =>\n          configDispatch.makeDefaultBackButton({\n            buttonIndex: displayIndex,\n            pageId: pageId,\n          }),\n\n        prefix: <ArrowPathIcon className={c(iconSize)} />,\n      }\n    );\n  }\n\n  return (\n    <div className=\"relative flex w-full justify-center mb-4 bg-gradient-to-b bg-gray-800 rounded-2xl shadow-2xl\">\n      <div\n        className=\"rounded-sm border-0\"\n        {...getRootProps({ style: { outline: \"none\" } })}\n      >\n        <input {...getInputProps()} />\n        {isDragActive && (\n          <div className=\"flex text-2xl font-extrabold h-32 items-center justify-center\">\n            <ChevronDoubleDownIcon className=\"h-12 w-12 m-4\" />\n            Drop Here\n            <PhotoIcon className=\"h-12 w-12 m-4\" />\n          </div>\n        )}\n        {!isDragActive &&\n          (display.originalImage || display.textSettings.text) && (\n            <ImagePreview size={3} previewImage={display.previewImage} />\n          )}\n        {!isDragActive &&\n          !display.originalImage &&\n          !display.textSettings.text && (\n            <div className=\"h-32 flex items-center justify-center bg-black w-64 cursor-pointer\">\n              Click me or Copy 'n paste\n            </div>\n          )}\n      </div>\n      <FDMenu className=\"absolute top-0 right-0\" entries={entries}>\n        <div className=\"rounded-full bg-gray-400 hover:bg-gray-300 p-2 m-2\">\n          <Bars3Icon className=\"h-6 w-6\" />\n        </div>\n      </FDMenu>\n    </div>\n  );\n};\n","import {\r\n  AdjustmentsHorizontalIcon,\r\n  ArrowPathIcon,\r\n  ArrowsPointingOutIcon,\r\n  BoltIcon,\r\n  LanguageIcon,\r\n  MagnifyingGlassIcon,\r\n  MoonIcon,\r\n  SunIcon,\r\n} from \"@heroicons/react/24/outline\";\r\nimport { SunIcon as SunIconAlt } from \"@heroicons/react/24/solid\";\r\nimport c from \"clsx\";\r\nimport React, { useContext } from \"react\";\r\n\r\nimport {\r\n  fontLarge,\r\n  fontMedium,\r\n  fontSmall,\r\n  fontSmaller,\r\n} from \"../../../definitions/fonts\";\r\nimport { EImageMode, ETextPosition } from \"../../../definitions/modes\";\r\nimport { TextSettings } from \"../../../generated\";\r\nimport { CtrlDuo } from \"../../../lib/components/CtrlDuo\";\r\nimport { Label, Value } from \"../../../lib/components/LabelValue\";\r\nimport { Row } from \"../../../lib/components/Row\";\r\nimport { FDSelect } from \"../../../lib/components/SelectInput\";\r\nimport { FDSlider } from \"../../../lib/components/Slider\";\r\nimport { FDSwitch } from \"../../../lib/components/Switch\";\r\nimport { TextArea } from \"../../../lib/components/TextArea\";\r\nimport { TitleBox } from \"../../../lib/components/Title\";\r\nimport {\r\n  ConfigDispatchContext,\r\n  ConfigStateContext,\r\n} from \"../../../states/configState\";\r\n\r\nexport const ImageSettings: React.FC<{\r\n  displayIndex: number;\r\n  pageId: string;\r\n}> = ({ displayIndex, pageId }) => {\r\n  const configState = useContext(ConfigStateContext);\r\n  const display =\r\n    pageId === \"dbd\"\r\n      ? configState.defaultBackDisplay.display\r\n      : configState.pages.byId[pageId].displayButtons[displayIndex].display;\r\n\r\n  const configDispatch = useContext(ConfigDispatchContext);\r\n\r\n  const setBlack = (blackThreshold: number) => {\r\n    display.imageSettings.blackThreshold = blackThreshold;\r\n    configDispatch.setDisplaySettings({\r\n      displaySettings: display,\r\n      pageId,\r\n      buttonIndex: displayIndex,\r\n    });\r\n  };\r\n  const setWhite = (whiteThreshold: number) => {\r\n    display.imageSettings.whiteThreshold = whiteThreshold;\r\n    configDispatch.setDisplaySettings({\r\n      displaySettings: display,\r\n      pageId,\r\n      buttonIndex: displayIndex,\r\n    });\r\n  };\r\n  const setBrightness = (brightness: number) => {\r\n    display.imageSettings.brightness = brightness;\r\n    configDispatch.setDisplaySettings({\r\n      displaySettings: display,\r\n      pageId,\r\n      buttonIndex: displayIndex,\r\n    });\r\n  };\r\n  const setContrast = (contrast: number) => {\r\n    display.imageSettings.contrast = contrast;\r\n    configDispatch.setDisplaySettings({\r\n      displaySettings: display,\r\n      pageId,\r\n      buttonIndex: displayIndex,\r\n    });\r\n  };\r\n  const setInvert = (invert: boolean) => {\r\n    display.imageSettings.invert = invert;\r\n    configDispatch.setDisplaySettings({\r\n      displaySettings: display,\r\n      pageId,\r\n      buttonIndex: displayIndex,\r\n    });\r\n  };\r\n  const setAutoCrop = (autoCrop: boolean) => {\r\n    display.imageSettings.autoCrop = autoCrop;\r\n    configDispatch.setDisplaySettings({\r\n      displaySettings: display,\r\n      pageId,\r\n      buttonIndex: displayIndex,\r\n    });\r\n  };\r\n  const setImageMode = (imageMode: EImageMode) => {\r\n    display.imageSettings.imageMode = imageMode;\r\n    configDispatch.setDisplaySettings({\r\n      displaySettings: display,\r\n      pageId,\r\n      buttonIndex: displayIndex,\r\n    });\r\n  };\r\n  const setfontName = (font: TextSettings[\"font\"]) => {\r\n    display.textSettings.font = font;\r\n    configDispatch.setDisplaySettings({\r\n      displaySettings: display,\r\n      pageId,\r\n      buttonIndex: displayIndex,\r\n    });\r\n  };\r\n  const setText = (text: string) => {\r\n    display.textSettings.text = text;\r\n    configDispatch.setDisplaySettings({\r\n      displaySettings: display,\r\n      pageId,\r\n      buttonIndex: displayIndex,\r\n    });\r\n  };\r\n  const setTextPosition = (position: ETextPosition) => {\r\n    display.textSettings.position = position;\r\n    configDispatch.setDisplaySettings({\r\n      displaySettings: display,\r\n      pageId,\r\n      buttonIndex: displayIndex,\r\n    });\r\n  };\r\n  const setIconWidthMultiplier = (value: number) => {\r\n    display.textWithIconSettings.iconWidthMultiplier = value;\r\n    configDispatch.setDisplaySettings({\r\n      displaySettings: display,\r\n      pageId,\r\n      buttonIndex: displayIndex,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-2 gap-2 grid-rows-1 w-full h-full\">\r\n      <div className=\"relative flex flex-col bg-gray-800 rounded-xl\">\r\n        <div\r\n          className={c(\r\n            \"z-10 bg-gray-900 opacity-80 top-0 left-0 right-0 bottom-0 absolute rounded-xl\",\r\n            display.originalImage ? \"hidden\" : \"block\"\r\n          )}\r\n          title=\"These options are disabled. Load an image by clicking on the black box or just enter some text\"\r\n        />\r\n        <TitleBox title=\"Image\" className=\"h-full\">\r\n          <Row className=\"h-8\">\r\n            <CtrlDuo>\r\n              <BoltIcon className=\"h-7 w-7\" />\r\n              <Label>Image mode</Label>\r\n            </CtrlDuo>\r\n            <CtrlDuo>\r\n              <FDSelect\r\n                className=\"w-56\"\r\n                value={display.imageSettings.imageMode}\r\n                disabled={!display.originalImage}\r\n                onChange={(value) => setImageMode(value)}\r\n                options={[\r\n                  { text: \"Normal (simple icons)\", value: EImageMode.normal },\r\n                  { text: \"Dither (Pictures)\", value: EImageMode.dither },\r\n                  {\r\n                    text: \"Hybrid (complex icons)\",\r\n                    value: EImageMode.hybrid,\r\n                  },\r\n                ]}\r\n              />\r\n              <Value>{display.imageSettings.imageMode}</Value>\r\n            </CtrlDuo>\r\n          </Row>\r\n          {!!(display.imageSettings.imageMode === EImageMode.normal) && (\r\n            <>\r\n              <Row className=\"h-8\">\r\n                <CtrlDuo>\r\n                  <SunIconAlt className=\"h-7 w-7\" />\r\n                  <Label>White Threshold</Label>\r\n                </CtrlDuo>\r\n                <FDSlider\r\n                  disabled={!display.originalImage}\r\n                  className=\"w-44\"\r\n                  min={0}\r\n                  max={128}\r\n                  step={1}\r\n                  value={display.imageSettings.whiteThreshold}\r\n                  onChange={(event) =>\r\n                    setWhite(event.currentTarget.valueAsNumber)\r\n                  }\r\n                />\r\n              </Row>\r\n              <Row className=\"h-8\">\r\n                <CtrlDuo>\r\n                  <SunIcon className=\"h-7 w-7\" />\r\n                  <Label>Black Threshold</Label>\r\n                </CtrlDuo>\r\n                <FDSlider\r\n                  disabled={!display.originalImage}\r\n                  className=\"w-44\"\r\n                  min={128}\r\n                  max={255}\r\n                  step={1}\r\n                  value={display.imageSettings.blackThreshold}\r\n                  onChange={(event) =>\r\n                    setBlack(event.currentTarget.valueAsNumber)\r\n                  }\r\n                />\r\n              </Row>\r\n            </>\r\n          )}\r\n          {!!(\r\n            display.imageSettings.imageMode === EImageMode.dither ||\r\n            display.imageSettings.imageMode === EImageMode.hybrid\r\n          ) && (\r\n            <>\r\n              <Row className=\"h-8\">\r\n                <CtrlDuo>\r\n                  <SunIconAlt className=\"h-7 w-7\" />\r\n                  <Label>Brightness:</Label>\r\n                </CtrlDuo>\r\n                <FDSlider\r\n                  disabled={!display.originalImage}\r\n                  min={-1}\r\n                  max={1}\r\n                  step={0.02}\r\n                  value={display.imageSettings.brightness}\r\n                  onChange={(event) =>\r\n                    setBrightness(event.currentTarget.valueAsNumber)\r\n                  }\r\n                />\r\n              </Row>\r\n              <Row className=\"h-8\">\r\n                <CtrlDuo>\r\n                  <MoonIcon className=\"h-7 w-7\" />\r\n                  <Label>Contrast:</Label>\r\n                </CtrlDuo>\r\n                <FDSlider\r\n                  disabled={!display.originalImage}\r\n                  min={-1}\r\n                  max={1}\r\n                  step={0.02}\r\n                  value={display.imageSettings.contrast}\r\n                  onChange={(event) =>\r\n                    setContrast(event.currentTarget.valueAsNumber)\r\n                  }\r\n                />\r\n              </Row>\r\n            </>\r\n          )}\r\n          <Row className=\"h-8\">\r\n            <CtrlDuo>\r\n              <ArrowPathIcon className=\"h-7 w-7\" />\r\n              <Label>Invert</Label>\r\n            </CtrlDuo>\r\n            <CtrlDuo>\r\n              <FDSwitch\r\n                disabled={!display.originalImage}\r\n                onChange={(value) => setInvert(value)}\r\n                value={display.imageSettings.invert}\r\n              />\r\n              <Value>{!!display.imageSettings.invert ? \"on\" : \"off\"}</Value>\r\n            </CtrlDuo>\r\n          </Row>\r\n          <Row className=\"h-8\">\r\n            <CtrlDuo>\r\n              <MagnifyingGlassIcon className=\"h-7 w-7\" />\r\n              <Label>AutoCrop</Label>\r\n            </CtrlDuo>\r\n            <CtrlDuo>\r\n              <FDSwitch\r\n                disabled={!display.originalImage}\r\n                onChange={(value) => setAutoCrop(value)}\r\n                value={display.imageSettings.autoCrop}\r\n              />\r\n              <Value>{!!display.imageSettings.autoCrop ? \"on\" : \"off\"}</Value>\r\n            </CtrlDuo>\r\n          </Row>\r\n        </TitleBox>\r\n      </div>\r\n\r\n      <div className=\"relative flex flex-col bg-gray-800 rounded-xl\">\r\n        <TitleBox title=\"Text\" className=\"h-full\">\r\n          <Row>\r\n            <TextArea\r\n              className=\"w-full\"\r\n              placeholder={\"Enter text\"}\r\n              value={display.textSettings.text ?? \"\"}\r\n              onChange={(value) => setText(value)}\r\n            />\r\n          </Row>\r\n          <Row className=\"h-8\">\r\n            <CtrlDuo>\r\n              <AdjustmentsHorizontalIcon className=\"h-7 w-7\" />\r\n              <Label>Position:</Label>\r\n            </CtrlDuo>\r\n            <CtrlDuo>\r\n              <FDSelect\r\n                className=\"w-44\"\r\n                value={display.textSettings.position}\r\n                onChange={(value) => setTextPosition(value)}\r\n                options={[\r\n                  { value: ETextPosition.right, text: \"right\" },\r\n                  { value: ETextPosition.bottom, text: \"bottom\" },\r\n                ]}\r\n              />\r\n              <Value>{display.textSettings.position}</Value>\r\n            </CtrlDuo>\r\n          </Row>\r\n          <Row className=\"h-8\">\r\n            <CtrlDuo>\r\n              <LanguageIcon className=\"h-7 w-7\" />\r\n              <Label>Font:</Label>\r\n            </CtrlDuo>\r\n            <CtrlDuo>\r\n              <FDSelect\r\n                className=\"w-44\"\r\n                value={display.textSettings.font}\r\n                onChange={(value) => setfontName(value)}\r\n                options={[\r\n                  { value: fontSmaller, text: \"xs\" },\r\n                  { value: fontSmall, text: \"medium\" },\r\n                  { value: fontMedium, text: \"large\" },\r\n                  { value: fontLarge, text: \"xl\" },\r\n                ]}\r\n              />\r\n              <Value>{display.textSettings.font}</Value>\r\n            </CtrlDuo>\r\n          </Row>\r\n          <Row className=\"h-8\">\r\n            <CtrlDuo>\r\n              <ArrowsPointingOutIcon className=\"h-7 w-7\" />\r\n              <Label>Icon width:</Label>\r\n            </CtrlDuo>\r\n            <FDSlider\r\n              disabled={\r\n                !display.textSettings.text?.length ||\r\n                display.textSettings.position === ETextPosition.bottom\r\n              }\r\n              min={0.1}\r\n              max={0.9}\r\n              step={0.01}\r\n              value={display.textWithIconSettings.iconWidthMultiplier}\r\n              onChange={(event) =>\r\n                setIconWidthMultiplier(event.currentTarget.valueAsNumber)\r\n              }\r\n            />\r\n          </Row>\r\n        </TitleBox>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useContext, useEffect, useRef } from \"react\";\n\nimport { fileToImage } from \"../../../lib/file/fileToImage\";\nimport { ConfigDispatchContext } from \"../../../states/configState\";\nimport { DropDisplay } from \"./DropDisplay\";\nimport { ImageSettings } from \"./ImageSettings\";\n\nexport const DisplaySettingsContainer = ({\n  pageId,\n  displayIndex,\n}: {\n  pageId: string;\n  displayIndex: number;\n}) => {\n  const configDispatch = useContext(ConfigDispatchContext);\n  const ref = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    if (ref.current) {\n      ref.current.contentEditable = \"true\";\n      ref.current.focus();\n      ref.current.contentEditable = \"false\";\n    }\n  }, []);\n  const onDrop = async (acceptedFiles: File[]) => {\n    const resizedBuffer = await fileToImage(acceptedFiles[0]);\n    configDispatch.setOriginalImage({\n      pageId,\n      buttonIndex: displayIndex,\n      originalImage: resizedBuffer,\n    });\n  };\n  return (\n    <div\n      className=\"w-full h-full flex flex-col justify-between focus:outline-none p-8\"\n      tabIndex={0}\n      contentEditable={false}\n      ref={ref}\n      onPaste={async (e) => {\n        configDispatch.setOriginalImage({\n          buttonIndex: displayIndex,\n          pageId,\n          originalImage: await fileToImage(e.clipboardData.files[0]),\n        });\n      }}\n    >\n      {\n        <DropDisplay\n          onDrop={onDrop}\n          pageId={pageId}\n          displayIndex={displayIndex}\n        />\n      }\n      <ImageSettings pageId={pageId} displayIndex={displayIndex} />\n    </div>\n  );\n};\n","export const ScrollListContainer: React.FC = ({ children }) => {\n  return (\n    <div className=\"w-full flex flex-col gap-8 p-8 overflow-y-scroll\">\n      {children}\n    </div>\n  );\n};\n","import React, { useCallback, useContext } from \"react\";\n\nimport { LiveMode } from \"../../../generated\";\nimport { Label } from \"../../../lib/components/LabelValue\";\nimport { Row } from \"../../../lib/components/Row\";\nimport { ScrollListContainer } from \"../../../lib/components/ScrollListContainer\";\nimport { FDSelect } from \"../../../lib/components/SelectInput\";\nimport { TitleBox } from \"../../../lib/components/Title\";\nimport { AppStateContext } from \"../../../states/appState\";\nimport {\n  ConfigDispatchContext,\n  ConfigStateContext,\n} from \"../../../states/configState\";\n\nconst options = [\n  { text: \"None\", value: \"none\" },\n  { text: \"CPU Temp\", value: \"cpu_temp\" },\n  { text: \"CPU Temp Graph\", value: \"cpu_temp_graph\" },\n  { text: \"CPU Temp Line\", value: \"cpu_temp_line\" },\n  { text: \"GPU Temp\", value: \"gpu_temp\" },\n  { text: \"GPU Temp Graph\", value: \"gpu_temp_graph\" },\n  { text: \"GPU Temp Line\", value: \"gpu_temp_line\" },\n];\n\nconst Tag: React.FC = ({ children }) => {\n  return <div className=\"bg-gray-400 rounded-md px-2 py-1\">{children}</div>;\n};\nexport const LiveDataSettingsContainer: React.FC<{\n  pageId: string;\n  displayIndex: number;\n}> = ({ pageId, displayIndex }) => {\n  const { pages, defaultBackDisplay } = useContext(ConfigStateContext);\n  const { setLive } = useContext(ConfigDispatchContext);\n  const { system, serialApi } = useContext(AppStateContext);\n  const liveSettings =\n    pageId === \"dbd\"\n      ? defaultBackDisplay.live\n      : pages.byId[pageId].displayButtons[displayIndex].live;\n  const setLiveCallback = useCallback(\n    (data: {\n      pageId: string;\n      buttonIndex: number;\n      mode: LiveMode;\n      position: \"top\" | \"bottom\";\n    }) => {\n      const state = { ...liveSettings, [data.position]: data.mode };\n      setLive(data);\n      if (state.top === \"none\" && state.bottom === \"none\" && !!serialApi) {\n        serialApi.setCurrentPage(pages.sorted.indexOf(pageId));\n      }\n    },\n    [setLive, serialApi, liveSettings, pageId, pages.sorted]\n  );\n  return (\n    <ScrollListContainer>\n      <TitleBox title=\"Sensors\">\n        <div className=\"flex gap-8\">\n          <Tag>\n            <span>CPU temp: </span>\n            <span>\n              {\" \"}\n              {system.cpuTemp[system.cpuTemp.length - 1].toFixed(1)} C\n            </span>\n          </Tag>\n          <Tag>\n            <span>GPU temp: </span>\n            <span>\n              {\" \"}\n              {system.gpuTemp[system.gpuTemp.length - 1].toFixed(1)} C\n            </span>\n          </Tag>\n        </div>\n      </TitleBox>\n      <TitleBox title=\"Live data\">\n        <div className=\"\">\n          <Row>\n            <Label>Top half</Label>\n            <FDSelect\n              className=\"w-48\"\n              value={liveSettings.top}\n              options={options}\n              onChange={(value) =>\n                setLiveCallback({\n                  pageId,\n                  buttonIndex: displayIndex,\n                  mode: value,\n                  position: \"top\",\n                })\n              }\n            />\n          </Row>\n          <Row>\n            <Label>Bottom half</Label>\n            <FDSelect\n              className=\"w-48\"\n              value={liveSettings.bottom}\n              options={options}\n              onChange={(value) =>\n                setLiveCallback({\n                  pageId,\n                  buttonIndex: displayIndex,\n                  mode: value,\n                  position: \"bottom\",\n                })\n              }\n            />\n          </Row>\n        </div>\n      </TitleBox>\n      <TitleBox title=\"What you need for this to work\">\n        On windows you need openhardwaremonitor installed and running. If\n        something is not working, please save a report and send it to me\n        (Discord or GitHub issue).\n        <br />\n        <br />\n        On linux and macos there is nothing to do. It should work out of the\n        box. If something is not working on linux, please send me the output of\n        the following command:{\" \"}\n        <code className=\"bg-gray-400 p-1 rounded-sm border-2\">sensors</code>\n      </TitleBox>\n    </ScrollListContainer>\n  );\n};\n","import {\n  AdjustmentsHorizontalIcon,\n  PhotoIcon,\n  PlayIcon,\n} from \"@heroicons/react/24/outline\";\nimport React, { useContext } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\n\nimport { TabView } from \"../../lib/components/TabView\";\nimport { FDWindow } from \"../../lib/components/Window\";\nimport { getPageName } from \"../../lib/misc/util\";\nimport { ConfigStateContext } from \"../../states/configState\";\nimport { ButtonSettingsContainer } from \"./ButtonSettings\";\nimport { DisplaySettingsContainer } from \"./DisplaySettings\";\nimport { LiveDataSettingsContainer } from \"./LiveDataSettings\";\n\nexport const DBSettingsModal: React.FC = () => {\n  const params = useParams();\n  const nav = useNavigate();\n  const configState = useContext(ConfigStateContext);\n  const { pageId } = params;\n\n  if (pageId === undefined || params.displayIndex === undefined) return <></>;\n\n  const displayIndex = parseInt(params.displayIndex);\n  const page = configState.pages.byId[pageId];\n\n  if (page === undefined) return <></>;\n  return (\n    <FDWindow\n      className=\"w-dp-settings\"\n      title={`Page ${getPageName(pageId, page)} Display ${displayIndex + 1}`}\n      visible={true}\n      setClose={() => nav(\"/\")}\n    >\n      <TabView\n        className=\"h-dp-settings\"\n        tabs={[\n          {\n            title: \"Display Settings\",\n            prefix: <PhotoIcon className=\"h-6 w-6\" />,\n            content: (\n              <DisplaySettingsContainer\n                pageId={pageId}\n                displayIndex={displayIndex}\n              />\n            ),\n          },\n          {\n            title: \"Button Settings\",\n            prefix: <AdjustmentsHorizontalIcon className=\"h-6 w-6\" />,\n            content: (\n              <ButtonSettingsContainer\n                pageId={pageId}\n                displayIndex={displayIndex}\n              />\n            ),\n          },\n          {\n            title: \"Live Data Settings\",\n            prefix: <PlayIcon className=\"h-6 w-6\" />,\n            content: (\n              <LiveDataSettingsContainer\n                pageId={pageId}\n                displayIndex={displayIndex}\n              />\n            ),\n          },\n        ]}\n      />\n    </FDWindow>\n  );\n};\n","import preval from \"preval.macro\";\nimport React from \"react\";\n\nimport packageJson from \"../../package.json\";\nimport { Label, Value } from \"../lib/components/LabelValue\";\nimport { Row } from \"../lib/components/Row\";\nimport { ScrollListContainer } from \"../lib/components/ScrollListContainer\";\nimport { TitleBox } from \"../lib/components/Title\";\n\nexport const About: React.FC = () => {\n  return (\n    <ScrollListContainer>\n      <TitleBox title=\"Fresh's FreeDeck Configurator\">\n        <Row>\n          <Label>Software Version:</Label>\n          <Value>{packageJson.version}</Value>\n        </Row>\n        <Row>\n          <Label>Build:</Label>\n          <Value>{preval`module.exports = new Date().getTime()`}</Value>\n        </Row>\n        <Row>\n          <Label>Commit:</Label>\n          <Value>{'N/A'}</Value>\n        </Row>\n        <Row>\n          <Label>Software Repackaged by:</Label>\n          <Value>{'JFresh @ FreshLabs Interactive 2025'}</Value>\n        </Row>\n      </TitleBox>\n    </ScrollListContainer>\n  );\n};\n","import React from \"react\";\n\nimport { LiveDataSettingsContainer } from \"./DisplayButton/LiveDataSettings\";\n\nexport const BackButtonLiveData: React.FC<{}> = () => {\n  return <LiveDataSettingsContainer displayIndex={-1} pageId={\"dbd\"} />;\n};\n","import React from \"react\";\n\nimport { DisplaySettingsContainer } from \"./DisplayButton/DisplaySettings\";\n\nexport const DefaultBackButtonSettings: React.FC<{}> = () => {\n  return <DisplaySettingsContainer displayIndex={-1} pageId={\"dbd\"} />;\n};\n","import { invoke } from \"@tauri-apps/api\";\nimport React, { useContext } from \"react\";\n\nimport { FDButton } from \"../lib/components/Button\";\nimport { Label } from \"../lib/components/LabelValue\";\nimport { Row } from \"../lib/components/Row\";\nimport { ScrollListContainer } from \"../lib/components/ScrollListContainer\";\nimport { TextInput } from \"../lib/components/TextInput\";\nimport { TitleBox } from \"../lib/components/Title\";\nimport { createToast } from \"../lib/misc/createToast\";\nimport { AppDispatchContext, AppStateContext } from \"../states/appState\";\n\nexport const DeveloperSettings: React.FC = () => {\n  const { serialApi, devLog } = useContext(AppStateContext);\n  const appDispatch = useContext(AppDispatchContext);\n  return (\n    <ScrollListContainer>\n      <TitleBox title=\"FreeDeck Developer Settings\">\n        <Row>\n          <Label>Send text to screen:</Label>\n          <TextInput onChange={(val) => serialApi?.writeToScreen(val)} />\n        </Row>\n\n        <Row>\n          <Label>Make toast:</Label>\n          <FDButton\n            onClick={() => createToast({ title: \"Title\", text: \"Text\" })}\n          >\n            Toast!\n          </FDButton>\n        </Row>\n        <Row>\n          <Label>call get_current_window</Label>\n          <FDButton\n            onClick={() =>\n              invoke<string>(\"get_current_window\").then((value) =>\n                appDispatch.openAlert({ text: value, title: \"debug\" })\n              )\n            }\n          >\n            invoke\n          </FDButton>\n        </Row>\n        <Row>\n          <Label>List sensors</Label>\n          <FDButton\n            onClick={() =>\n              invoke<string[]>(\"list_sensors\").then((value) =>\n                appDispatch.openAlert({\n                  text: value.join(\", \"),\n                  title: \"sensors\",\n                })\n              )\n            }\n          >\n            invoke\n          </FDButton>\n        </Row>\n        <Row>{JSON.stringify(devLog, undefined, 2)}</Row>\n      </TitleBox>\n    </ScrollListContainer>\n  );\n};\n","import { XMarkIcon } from \"@heroicons/react/24/outline\";\nimport React, { useContext, useEffect, useState } from \"react\";\n\nimport { Label, Value } from \"../lib/components/LabelValue\";\nimport { Row } from \"../lib/components/Row\";\nimport { ScrollListContainer } from \"../lib/components/ScrollListContainer\";\nimport { FDSelect } from \"../lib/components/SelectInput\";\nimport { FDSwitch } from \"../lib/components/Switch\";\nimport { TitleBox } from \"../lib/components/Title\";\nimport { AppStateContext } from \"../states/appState\";\nimport {\n  ConfigDispatchContext,\n  ConfigStateContext,\n} from \"../states/configState\";\n\nconst FW_UNKNOWN = \"please connect serial\";\n\nconst DisplayCountDropDown: React.FC<{\n  value: number;\n  options: number[];\n  onChange: (newValue: number) => void;\n}> = ({ onChange, options, value }) => (\n  <FDSelect\n    className=\"w-16\"\n    value={value}\n    onChange={(value) => onChange(parseInt(value, 10))}\n    options={options.map((option) => ({\n      text: option.toString(),\n      value: option,\n    }))}\n  />\n);\n\nexport const Device: React.FC<{}> = () => {\n  const { serialApi } = useContext(AppStateContext);\n  const configState = useContext(ConfigStateContext);\n  const configDispatch = useContext(ConfigDispatchContext);\n\n  const [widthOptions, setWOptions] = useState<Array<number>>([]);\n  const [heightOptions, setHOptions] = useState<Array<number>>([]);\n  const [fwVersion, setFwVersion] = useState<string>(FW_UNKNOWN);\n\n  useEffect(() => {\n    if (!serialApi) return;\n    const id = serialApi.registerOnPortsChanged(async (ports) => {\n      if (serialApi.connected) {\n        const fw = await serialApi.getFirmwareVersion();\n        setFwVersion(fw);\n      } else {\n        setFwVersion(FW_UNKNOWN);\n      }\n    });\n    return () => serialApi.clearOnPortsChanged(id);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [serialApi?.connected]);\n\n  useEffect(() => {\n    const wArray = [];\n    let possibleWidth = 1;\n    while (configState.height * possibleWidth <= 16) {\n      wArray.push(possibleWidth++);\n    }\n\n    const hArray = [];\n    let possibleHeight = 1;\n    while (configState.width * possibleHeight <= 16) {\n      hArray.push(possibleHeight++);\n    }\n    setWOptions(wArray);\n    setHOptions(hArray);\n  }, [configState.width, configState.height]);\n\n  return (\n    <ScrollListContainer>\n      <TitleBox title=\"Device Settings\">\n        <Row>\n          <Label>FreeDeck Layout:</Label>\n          <div className=\"flex items-center\">\n            <DisplayCountDropDown\n              onChange={(width) => {\n                if (width < configState.width)\n                  window.advancedConfirm(\n                    \"Warning\",\n                    \"If you accept, we will delete all displays that won't fit into the lesser amount of screens\",\n                    () => configDispatch.setDimensions({ width })\n                  );\n                else configDispatch.setDimensions({ width });\n              }}\n              value={configState.width}\n              options={widthOptions}\n            />\n            <XMarkIcon className=\"w-5 h-5 mx-2\" />\n            <DisplayCountDropDown\n              onChange={(height) => configDispatch.setDimensions({ height })}\n              value={configState.height}\n              options={heightOptions}\n            />\n          </div>\n        </Row>\n        <Row>\n          <Label hint=\"Disable this to massively reduce save times but you will not be able to 'load from freedeck'\">\n            Save JSON:\n          </Label>\n          <FDSwitch\n            onChange={(val) => configDispatch.setSaveJson(val)}\n            value={configState.saveJson}\n          />\n        </Row>\n      </TitleBox>\n\n      <TitleBox title=\"Device Info\">\n        <Row>\n          <Label>Firmware version:</Label>\n          <Value>{fwVersion}</Value>\n        </Row>\n        <Row>\n          <Label>Config version:</Label>\n          <Value>{configState.configVersion || \"1.0.0\"}</Value>\n        </Row>\n      </TitleBox>\n    </ScrollListContainer>\n  );\n};\n","import React, { useContext } from \"react\";\n\nimport { FDButton } from \"../lib/components/Button\";\nimport { Label } from \"../lib/components/LabelValue\";\nimport { Row } from \"../lib/components/Row\";\nimport { ScrollListContainer } from \"../lib/components/ScrollListContainer\";\nimport { FDSelect } from \"../lib/components/SelectInput\";\nimport { FDSlider } from \"../lib/components/Slider\";\nimport { TitleBox } from \"../lib/components/Title\";\nimport { AppStateContext } from \"../states/appState\";\nimport {\n  ConfigDispatchContext,\n  ConfigStateContext,\n} from \"../states/configState\";\n\nexport const Displays: React.FC<{}> = () => {\n  const configState = useContext(ConfigStateContext);\n  const configDispatch = useContext(ConfigDispatchContext);\n  const appState = useContext(AppStateContext);\n  return (\n    <ScrollListContainer>\n      <TitleBox title=\"Displays\">\n        <Row>\n          <Label>Brightness:</Label>\n          <FDSlider\n            min={0}\n            max={255}\n            value={configState.brightness}\n            onChange={(e) =>\n              configDispatch.setBrightness(e.currentTarget.valueAsNumber)\n            }\n          />\n        </Row>\n        <Row>\n          <Label>Screen saver timeout:</Label>\n          <FDSelect\n            className=\"w-44\"\n            onChange={(value) => configDispatch.setScreenSaver(value)}\n            value={configState.screenSaverTimeout}\n            options={[\n              { text: \"never\", value: 0 },\n              { text: \"5s\", value: 5 },\n              { text: \"10s\", value: 10 },\n              { text: \"30s\", value: 30 },\n              { text: \"1min\", value: 60 },\n              { text: \"2min\", value: 60 * 2 },\n              { text: \"5min\", value: 60 * 5 },\n              { text: \"15min\", value: 60 * 15 },\n            ]}\n          />\n        </Row>\n      </TitleBox>\n      <TitleBox title=\"Advanced\">\n        <Row>\n          <Label hint=\"only for freedeck-pico, if too high the freedeck crashes. try lower values after restarting the freedeck, default 50\">\n            OLED speed:\n          </Label>\n          <FDSlider\n            min={1}\n            max={255}\n            value={configState.oledSpeed}\n            onChange={(e) =>\n              configDispatch.setOledSpeed(e.currentTarget.valueAsNumber)\n            }\n          />\n        </Row>\n        <Row>\n          <Label hint=\"only for freedeck-micro, if too low the freedeck crashes. try higher values after restarting the freedeck, default 2\">\n            OLED delay:\n          </Label>\n          <FDSlider\n            min={1}\n            max={10}\n            value={configState.oledDelay}\n            onChange={(e) =>\n              configDispatch.setOledDelay(e.currentTarget.valueAsNumber)\n            }\n          />\n        </Row>\n        <Row>\n          <Label hint=\"just play with this value to reduce noise, default 17\">\n            Pre charge period:\n          </Label>\n          <FDSlider\n            min={0}\n            max={255}\n            value={configState.preChargePeriod}\n            onChange={(e) =>\n              configDispatch.setPreChargePeriod(e.currentTarget.valueAsNumber)\n            }\n          />\n        </Row>\n        <Row>\n          <Label hint=\"just play with this value to reduce flickering, higher is better, default 15\">\n            Clock frequency:\n          </Label>\n          <FDSlider\n            min={0}\n            max={15}\n            value={configState.clockFreq}\n            onChange={(e) =>\n              configDispatch.setClockFreq(e.currentTarget.valueAsNumber)\n            }\n          />\n        </Row>\n        <Row>\n          <Label hint=\"just play with this value to reduce flickering, lower is better, default 2\">\n            Clock divider:\n          </Label>\n          <FDSlider\n            min={0}\n            max={15}\n            value={configState.clockDiv}\n            onChange={(e) =>\n              configDispatch.setClockDiv(e.currentTarget.valueAsNumber)\n            }\n          />\n        </Row>\n        <Row>\n          <Label hint=\"this is only temporary, you still need to save\">\n            Try it out:\n          </Label>\n          <FDButton\n            onClick={() =>\n              appState.serialApi?.testOledParameters(\n                configState.oledSpeed,\n                configState.oledDelay,\n                configState.preChargePeriod,\n                configState.clockFreq,\n                configState.clockDiv\n              )\n            }\n          >\n            Try\n          </FDButton>\n        </Row>\n      </TitleBox>\n    </ScrollListContainer>\n  );\n};\n","import {\n  ArrowLeftCircleIcon,\n  ChartBarIcon,\n  CodeBracketIcon,\n  CpuChipIcon,\n  InformationCircleIcon,\n  SunIcon,\n  WindowIcon,\n} from \"@heroicons/react/24/outline\";\nimport React, { useContext } from \"react\";\nimport { useNavigate } from \"react-router\";\n\nimport { TabView } from \"../lib/components/TabView\";\nimport { FDWindow } from \"../lib/components/Window\";\nimport { ConfigDispatchContext } from \"../states/configState\";\nimport { About } from \"./About\";\nimport { BackButtonLiveData } from \"./BackButtonLiveData\";\nimport { DefaultBackButtonSettings } from \"./DefaultBackButtonSettings\";\nimport { DeveloperSettings } from \"./DeveloperSettings\";\nimport { Device } from \"./Device\";\nimport { Displays } from \"./Displays\";\n\nexport const GlobalSettings: React.FC<{}> = () => {\n  const configDispatch = useContext(ConfigDispatchContext);\n  const nav = useNavigate();\n  const tabs = [\n    {\n      title: \"Default back button\",\n      prefix: <ArrowLeftCircleIcon className=\"h-6 w-6\" />,\n      content: <DefaultBackButtonSettings />,\n    },\n    {\n      title: \"Back button live data\",\n      prefix: <ChartBarIcon className=\"h-6 w-6\" />,\n      content: <BackButtonLiveData />,\n    },\n    // {\n    //   title: \"Auto page switcher\",\n    //   prefix: <WindowIcon className=\"h-6 w-6\" />,\n    //   content: <BackButtonLiveData />,\n    // },\n    {\n      title: \"Displays\",\n      prefix: <SunIcon className=\"h-6 w-6\" />,\n      content: <Displays />,\n    },\n    {\n      title: \"Device\",\n      prefix: <CpuChipIcon className=\"h-6 w-6\" />,\n      content: <Device />,\n    },\n    {\n      title: \"Developer settings\",\n      prefix: <CodeBracketIcon className=\"h-6 w-6\" />,\n      content: <DeveloperSettings />,\n    },\n    {\n      title: \"About\",\n      prefix: <InformationCircleIcon className=\"h-6 w-6\" />,\n      content: <About />,\n    },\n  ];\n  return (\n    <FDWindow\n      className=\"w-dp-settings\"\n      visible={true}\n      setClose={() => {\n        nav(\"/\");\n        configDispatch.updateAllDefaultBackImages(undefined);\n      }}\n      title=\"General settings\"\n    >\n      <TabView tabs={tabs} className=\"h-settings\" />\n    </FDWindow>\n  );\n};\n","import c from \"clsx\";\nimport { FC } from \"react\";\n\nconst isTauri = \"__TAURI_IPC__\" in window;\nexport const Anchor: FC<{\n  href: string;\n  newTab: boolean;\n  className?: string;\n}> = ({ children, href, newTab = false, className }) => {\n  return isTauri && newTab ? (\n    <span\n      className={c(\"cursor-pointer text-primary-400\", className)}\n      onClick={() =>\n        import(\"@tauri-apps/api/shell\").then(({ open }) => open(href))\n      }\n    >\n      {children}\n    </span>\n  ) : (\n    <a\n      className={c(\"cursor-pointer text-primary-400\", className)}\n      target={newTab ? \"_blank\" : undefined}\n      rel=\"noreferrer\"\n      href={href}\n    >\n      {children}\n    </a>\n  );\n};\n","import React from \"react\";\nimport { useNavigate } from \"react-router\";\n\nimport { Anchor } from \"../lib/components/Anchor\";\nimport { CtrlDuo } from \"../lib/components/CtrlDuo\";\nimport { TitleBox } from \"../lib/components/Title\";\nimport { FDWindow } from \"../lib/components/Window\";\n\nexport const HelpModal: React.FC<{}> = () => {\n  const nav = useNavigate();\n\n  return (\n    <FDWindow\n      className=\"w-help h-full\"\n      visible={true}\n      setClose={() => {\n        nav(\"/\");\n      }}\n      title=\"Help\"\n    >\n      <div className=\"space-y-4 p-8 text-xl overflow-y-scroll\">\n        <TitleBox title=\"Tips and tricks\">\n          <p>\n            You can hold <b>ctrl</b> (<b>cmd</b> on mac) to show more detailed\n            information or advanced functionality on almost any screen.\n          </p>\n          <CtrlDuo>\n            <p>Try it out!</p>\n            <p>Yaaaaay you did it! </p>\n          </CtrlDuo>\n        </TitleBox>\n        <TitleBox title=\"FreeDeck Discussion\">\n          You can find all info here{\" \"}\n          <Anchor\n            newTab\n            href=\"https://discord.gg/psCy3QkjwA\"\n          >\n            here\n          </Anchor>\n        </TitleBox>\n      </div>\n    </FDWindow>\n  );\n};\n","import React, { useContext } from \"react\";\n\nimport { Label } from \"../../../lib/components/LabelValue\";\nimport { Row } from \"../../../lib/components/Row\";\nimport { ScrollListContainer } from \"../../../lib/components/ScrollListContainer\";\nimport { FDSwitch } from \"../../../lib/components/Switch\";\nimport { TextArea } from \"../../../lib/components/TextArea\";\nimport { TitleBox } from \"../../../lib/components/Title\";\nimport {\n  ConfigDispatchContext,\n  ConfigStateContext,\n} from \"../../../states/configState\";\n\nexport const AutoPageSwitcherSettings: React.FC<{ pageId: string }> = ({\n  pageId,\n}) => {\n  const configState = useContext(ConfigStateContext);\n  const { setUsePageName } = useContext(ConfigDispatchContext);\n  const { changePageWindowName } = useContext(ConfigDispatchContext);\n  const page = configState.pages.byId[pageId];\n\n  return (\n    <ScrollListContainer>\n      <TitleBox title=\"Auto page-switcher\">\n        <Row className=\"h-8\">\n          <Label hint=\"This will be ignored if this page is in a collection\">\n            Use Page name as window name\n          </Label>\n          <FDSwitch\n            onChange={(value) => setUsePageName({ pageId, value })}\n            value={page.usePageNameAsWindowName}\n          />\n        </Row>\n        <Row mode=\"top\">\n          <Label hint=\"One window name per line or comma seperated\">\n            Window name\n          </Label>\n          <TextArea\n            className=\"w-64 h-64\"\n            placeholder={\n              page.usePageNameAsWindowName ? page.name : \"Enter window name...\"\n            }\n            disabled={page.usePageNameAsWindowName}\n            value={page.windowName}\n            onChange={(windowName) =>\n              changePageWindowName({ pageId, windowName })\n            }\n          />\n        </Row>\n      </TitleBox>\n    </ScrollListContainer>\n  );\n};\n","import React, { useContext } from \"react\";\n\nimport { Label } from \"../../../lib/components/LabelValue\";\nimport { Row } from \"../../../lib/components/Row\";\nimport { ScrollListContainer } from \"../../../lib/components/ScrollListContainer\";\nimport { FDSelect } from \"../../../lib/components/SelectInput\";\nimport { TextInput } from \"../../../lib/components/TextInput\";\nimport { TitleBox } from \"../../../lib/components/Title\";\nimport { getCollectionName } from \"../../../lib/misc/util\";\nimport {\n  ConfigDispatchContext,\n  ConfigStateContext,\n} from \"../../../states/configState\";\n\nexport const PageGeneralSettings: React.FC<{ pageId: string }> = ({\n  pageId,\n}) => {\n  const configState = useContext(ConfigStateContext);\n  const { collections } = configState;\n  const { renamePage, setPageCollection } = useContext(ConfigDispatchContext);\n  const page = configState.pages.byId[pageId];\n\n  return (\n    <ScrollListContainer>\n      <TitleBox title=\"General page settings\">\n        <Row>\n          <Label>Name</Label>\n          <TextInput\n            className=\"w-44\"\n            placeholder=\"Enter page name\"\n            value={page.name}\n            onChange={(name) => renamePage({ pageId, name })}\n          />\n        </Row>\n        <Row>\n          <Label>Collection</Label>\n          <FDSelect\n            className=\"w-44\"\n            value={page.isInCollection}\n            onChange={(collectionId) =>\n              setPageCollection({ pageId, collectionId })\n            }\n            options={[\n              { text: \"no collection\", value: undefined },\n              ...collections.sorted.map((colId) => ({\n                text: getCollectionName(colId, collections.byId[colId]),\n                value: colId,\n              })),\n            ]}\n          />\n        </Row>\n      </TitleBox>\n    </ScrollListContainer>\n  );\n};\n","import { CircleStackIcon, CogIcon } from \"@heroicons/react/24/outline\";\nimport React, { useContext } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\n\nimport { iconSize } from \"../../../definitions/iconSizes\";\nimport { TabView } from \"../../../lib/components/TabView\";\nimport { FDWindow } from \"../../../lib/components/Window\";\nimport { getPageName } from \"../../../lib/misc/util\";\nimport { ConfigStateContext } from \"../../../states/configState\";\nimport { AutoPageSwitcherSettings } from \"./AutoPageSwitcher\";\nimport { PageGeneralSettings } from \"./General\";\n\nexport const PageSettingsModal: React.FC = () => {\n  const params = useParams();\n  const nav = useNavigate();\n  const configState = useContext(ConfigStateContext);\n  const { pageId } = params;\n\n  if (pageId === undefined) return <></>;\n\n  const page = configState.pages.byId[pageId];\n\n  if (page === undefined) return <></>;\n  return (\n    <FDWindow\n      className=\"w-dp-settings\"\n      title={`Page ${getPageName(pageId, page)}`}\n      visible={true}\n      setClose={() => nav(\"/\")}\n    >\n      <TabView\n        className=\"h-dp-settings\"\n        tabs={[\n          {\n            title: \"General\",\n            content: <PageGeneralSettings pageId={pageId} />,\n            prefix: <CogIcon className={iconSize} />,\n          },\n          {\n            title: \"Auto Page Switcher\",\n            content: <AutoPageSwitcherSettings pageId={pageId} />,\n            prefix: <CircleStackIcon className={iconSize} />,\n          },\n        ]}\n      />\n    </FDWindow>\n  );\n};\n","import { useEffect } from \"react\";\nimport { Route, Routes, useNavigate } from \"react-router-dom\";\n\nimport { CollectionSettingsModal } from \"./containers/Collection/Settings/Modal\";\nimport { DeprecatedInfoModal } from \"./containers/DeprecatedInfoModal\";\nimport { DBSettingsModal } from \"./containers/DisplayButton/DisplayButtonSettingsModal\";\nimport { FDHub } from \"./containers/FDHub\";\nimport { GlobalSettings } from \"./containers/GeneralSettingsModal\";\nimport { HelpModal } from \"./containers/HelpModal\";\nimport { LoginModal } from \"./containers/Login\";\nimport { PublishPage } from \"./containers/Page/Publish\";\nimport { PageSettingsModal } from \"./containers/Page/Settings/Modal\";\nimport { CustomAlert } from \"./CustomAlert\";\n\nexport const ModalBody = () => {\n  const nav = useNavigate();\n  useEffect(() => {\n    if (localStorage.getItem(\"dontShow128Info\") === null) {\n      nav(\"/deprecated-info\");\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return (\n    <Routes>\n      <Route path=\"/\" element={<CustomAlert />} />\n      <Route path=\"/help\" element={<HelpModal />} />\n      <Route path=\"/deprecated-info\" element={<DeprecatedInfoModal />} />\n      <Route\n        path=\"/displaybutton/:pageId/:displayIndex\"\n        element={<DBSettingsModal />}\n      />\n      <Route path=\"/page/:pageId\" element={<PageSettingsModal />} />\n      <Route\n        path=\"/collection/:collectionId\"\n        element={<CollectionSettingsModal />}\n      />\n      <Route path=\"/settings\" element={<GlobalSettings />} />\n      {process.env.REACT_APP_ENABLE_API === \"true\" && (\n        <>\n          <Route path=\"/login\" element={<LoginModal />} />\n          <Route path=\"/hub/*\" element={<FDHub />} />\n          <Route path=\"/publishpage/:pageId\" element={<PublishPage />} />\n        </>\n      )}\n    </Routes>\n  );\n};\n","import { useSimpleReducer } from \"@bitovi/use-simple-reducer\";\nimport React, { useRef } from \"react\";\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\nimport { HashRouter } from \"react-router-dom\";\n\nimport { Body } from \"./Body\";\nimport { Config } from \"./generated\";\nimport { useOnce } from \"./lib/hooks/once\";\nimport { useBackgroundTasks } from \"./lib/hooks/startup\";\nimport { AddEventListeners } from \"./lib/misc/eventListeners\";\nimport { ModalBody } from \"./ModalBody\";\nimport {\n  AppDispatchContext,\n  AppState,\n  AppStateContext,\n  IAppReducer,\n  appReducer,\n} from \"./states/appState\";\nimport {\n  ConfigDispatchContext,\n  ConfigStateContext,\n  IConfigReducer,\n  configReducer,\n} from \"./states/configState\";\n\nexport type RefState = { deck: AppState[\"deck\"]; system: AppState[\"system\"] };\nexport type StateRef = React.MutableRefObject<RefState>;\n\nconst App: React.FC<{\n  defaultConfigState: Config;\n  defaultAppState: AppState;\n}> = ({ defaultConfigState, defaultAppState }) => {\n  const [configState, configDispatch] = useSimpleReducer<\n    Config,\n    IConfigReducer\n  >(defaultConfigState, configReducer);\n\n  const [appState, appDispatch] = useSimpleReducer<AppState, IAppReducer>(\n    defaultAppState,\n    appReducer\n  );\n\n  const refState = useRef<RefState>({\n    deck: appState.deck,\n    system: appState.system,\n  });\n  useOnce(appState, appDispatch, refState);\n  useBackgroundTasks(\n    configState,\n    configDispatch,\n    appState,\n    appDispatch,\n    refState\n  );\n  AddEventListeners({ appDispatchContext: appDispatch });\n\n  return (\n    <HashRouter>\n      <DndProvider backend={HTML5Backend}>\n        <ConfigStateContext.Provider value={configState}>\n          <ConfigDispatchContext.Provider value={configDispatch}>\n            <AppStateContext.Provider value={appState}>\n              <AppDispatchContext.Provider value={appDispatch}>\n                <Body />\n                <ModalBody />\n              </AppDispatchContext.Provider>\n            </AppStateContext.Provider>\n          </ConfigDispatchContext.Provider>\n        </ConfigStateContext.Provider>\n      </DndProvider>\n    </HashRouter>\n  );\n};\n\nexport default App;\n","import { listen } from \"@tauri-apps/api/event\";\nimport { useEffect } from \"react\";\n\nimport { StateRef } from \"../../App\";\nimport { AppState, IAppDispatch } from \"../../states/appState\";\nimport { saveCurrentPage } from \"../serial/commands\";\n\nexport const useOnce = (\n  appState: AppState,\n  appDispatch: IAppDispatch,\n  stateRef: StateRef\n) => {\n  const serialApi = appState.serialApi;\n  useEffect(() => {\n    if (\"__TAURI_IPC__\" in window) {\n      listen<{ cpuTemp: number; gpuTemp: number }>(\"system_temps\", (event) => {\n        appDispatch.setTemps(event.payload);\n      });\n    }\n    if (!serialApi) return;\n    const portsId = serialApi.registerOnPortsChanged(\n      (ports, connectedPortIndex) => {\n        appDispatch.setAvailablePorts(ports);\n        appDispatch.setConnectedPortIndex(connectedPortIndex);\n        appDispatch.setDevLog({\n          path: \"connectedPortIndex\",\n          data: connectedPortIndex,\n        });\n        if (connectedPortIndex > -1) {\n          serialApi\n            .getHasJson()\n            .then((hasJson) => appDispatch.setHasJson(hasJson));\n          serialApi.getCurrentPage().then((page) => {\n            console.log(page);\n            saveCurrentPage(page, appDispatch, stateRef);\n          });\n        }\n      }\n    );\n    return () => {\n      serialApi.clearOnPortsChanged(portsId);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n};\n","import { CloudArrowDownIcon, XMarkIcon } from \"@heroicons/react/24/outline\";\nimport { useEffect } from \"react\";\nimport toast from \"react-hot-toast\";\n\nimport { IAppDispatch } from \"../../states/appState\";\nimport { FDButton } from \"../components/Button\";\nimport { createToast } from \"./createToast\";\nimport { isMacOS } from \"./util\";\n\nexport const AddEventListeners = ({\n  appDispatchContext,\n}: {\n  appDispatchContext: IAppDispatch;\n}) => {\n  const { setCtrl } = appDispatchContext;\n  return useEffect(() => {\n    window.addEventListener(\"beforeinstallprompt\", (e: Event) => {\n      e.preventDefault();\n      if (!localStorage.getItem(\"closedPWACTA\"))\n        createToast({\n          text: \"You can install the configurator to have it offline! Click here to install\",\n          danger: (t) => (\n            <FDButton\n              onClick={() => {\n                localStorage.setItem(\"closedPWACTA\", \"true\");\n                toast.dismiss(t.id);\n              }}\n              prefix={<XMarkIcon className=\"h-4 w-4\" />}\n            >\n              Close\n            </FDButton>\n          ),\n          primary: (t) => (\n            <FDButton\n              type=\"primary\"\n              onClick={() => {\n                localStorage.setItem(\"closedPWACTA\", \"true\");\n                toast.dismiss(t.id);\n                (e as any).prompt();\n              }}\n              prefix={<CloudArrowDownIcon className=\"h-4 w-4\" />}\n            >\n              Install\n            </FDButton>\n          ),\n        });\n    });\n    const onKeyDown = (event: KeyboardEvent) => {\n      if (isMacOS && event.key === \"Meta\") {\n        setCtrl(true);\n      } else if (event.key === \"Control\") {\n        setCtrl(true);\n      }\n    };\n    const onKeyUp = (event: KeyboardEvent) => {\n      if (isMacOS && event.key === \"Meta\") {\n        setCtrl(false);\n      } else if (event.key === \"Control\") {\n        setCtrl(false);\n      }\n    };\n    document.addEventListener(\"keydown\", onKeyDown);\n    document.addEventListener(\"keyup\", onKeyUp);\n    window.onblur = () => setCtrl(false);\n    // eslint-disable-next-line\n  }, []); // only execute on page load\n};\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (\n    process.env.NODE_ENV === \"production\" &&\n    \"serviceWorker\" in navigator &&\n    !(window as any).__TAURI_IPC__\n  ) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://cra.link/PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://cra.link/PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","export const ROW_SIZE = 128;\nexport const TRANSMIT_BUFFER_SIZE = 128;\n","export type SerialFilter = { usbVendorId: number }[];\nexport enum connectionStatus {\n  disconnect,\n  connect,\n}\nexport type connectCallback = (status: connectionStatus) => void;\nexport type PortsChangedCallback = (\n  ports: string[],\n  connectedPortIndex: number\n) => void;\nexport interface SerialConnector {\n  requestNewPort: () => Promise<void>;\n  connect: (portIndex: number, showError?: boolean) => Promise<void>;\n  disconnect: () => Promise<void>;\n  write: (data: number[]) => Promise<void>;\n  flush: () => void;\n  read: (timeout?: number) => Promise<number[]>;\n  readLine: (timeout?: number) => Promise<number[]>;\n  readSerialCommand: () => Promise<{ command: number; args: number[] }>;\n}\n","import { inflate } from \"pako\";\r\n\r\nimport { createDefaultBackDisplay } from \"../../definitions/defaultBackImage\";\r\nimport { createDefaultDisplay } from \"../../definitions/defaultPage\";\r\nimport { Config, DefaultBackDisplay, Display } from \"../../generated\";\r\nimport { ConfigSchema } from \"../../schemas/config\";\r\nimport { getBase64Image } from \"../image/base64Encode\";\r\nimport { _composeImage, _composeText } from \"../image/composeImage\";\r\nimport { ROW_SIZE } from \"./consts\";\r\n\r\nexport const generateAdditionalImagery = async (\r\n  display: Display\r\n): Promise<Display> => {\r\n  const newDisplay = {\r\n    ...createDefaultDisplay(),\r\n    imageSettings: display.imageSettings,\r\n    isGeneratedFromDefaultBackImage: display.isGeneratedFromDefaultBackImage,\r\n    textSettings: display.textSettings,\r\n    textWithIconSettings: display.textWithIconSettings,\r\n    originalImage:\r\n      display.originalImage && Buffer.from(display.originalImage as any),\r\n  };\r\n  newDisplay.convertedImage = newDisplay.originalImage\r\n    ? await _composeImage(newDisplay)\r\n    : await _composeText(newDisplay.textSettings);\r\n  newDisplay.previewImage = getBase64Image(newDisplay.convertedImage);\r\n  return newDisplay;\r\n};\r\n\r\nexport const convertCurrentConfig = async (\r\n  rawConfig: Config\r\n): Promise<Config> => {\r\n  const promises: Array<Promise<Display>> = [];\r\n  for (let outer = 0; outer < rawConfig.pages.sorted.length; outer++) {\r\n    const id = rawConfig.pages.sorted[outer];\r\n    const page = rawConfig.pages.byId[id];\r\n\r\n    for (let inner = 0; inner < page.displayButtons.length; inner++) {\r\n      console.log(outer, inner, promises.length);\r\n      promises.push(\r\n        generateAdditionalImagery({ ...page.displayButtons[inner].display })\r\n      );\r\n    }\r\n  }\r\n  const resolved = await Promise.all(promises);\r\n  for (let outer = 0; outer < rawConfig.pages.sorted.length; outer++) {\r\n    const id = rawConfig.pages.sorted[outer];\r\n    const page = rawConfig.pages.byId[id];\r\n\r\n    for (let inner = 0; inner < page.displayButtons.length; inner++) {\r\n      page.displayButtons[inner].display =\r\n        resolved[outer * page.displayButtons.length + inner];\r\n      console.log(outer * page.displayButtons.length + inner);\r\n    }\r\n  }\r\n  const defaultBackDisplay: DefaultBackDisplay = {\r\n    live: rawConfig.defaultBackDisplay.live,\r\n    display: rawConfig.defaultBackDisplay.display\r\n      ? await generateAdditionalImagery(rawConfig.defaultBackDisplay.display)\r\n      : await createDefaultBackDisplay(),\r\n  };\r\n  const validated = ConfigSchema.validate(\r\n    {\r\n      ...rawConfig,\r\n      defaultBackDisplay,\r\n    },\r\n    { stripUnknown: true }\r\n  );\r\n  if (validated.error) throw new Error(validated.error.message);\r\n  const config = validated.value;\r\n  config.configVersion = (\r\n    await import(\"../../../package.json\")\r\n  ).configFileVersion;\r\n  return config;\r\n};\r\n\r\nexport const parseConfig = async (configBuffer: Buffer): Promise<Config> => {\r\n  const displayButtonCount = configBuffer.readUInt16LE(2) - 1; // subtract 1 for the header row\r\n  const imageOffset = ROW_SIZE * (displayButtonCount + 1);\r\n  const jsonOffset = imageOffset + 1025 * displayButtonCount;\r\n\r\n  if (configBuffer.length === jsonOffset) {\r\n    alert(\"config too old. not compatible yet. please create a new one\");\r\n    throw new Error(\r\n      \"config too old. not compatible (yet). please create a new one\"\r\n    );\r\n  }\r\n  const jsonConfigSlice = configBuffer.slice(jsonOffset);\r\n  console.log(jsonConfigSlice.length);\r\n  const rawConfig = JSON.parse(inflate(jsonConfigSlice, { to: \"string\" }));\r\n  if (!rawConfig.configVersion) {\r\n    throw new Error(\"legacy config. not compatible\");\r\n  }\r\n  const config = await convertCurrentConfig(rawConfig);\r\n  config.configVersion = (\r\n    await import(\"../../../package.json\")\r\n  ).configFileVersion;\r\n  return config;\r\n};\r\n","export const fontSmaller = \"fonts/smaller.fnt\";\nexport const fontSmall = \"fonts/small.fnt\";\nexport const fontMedium = \"fonts/medium.fnt\";\nexport const fontLarge = \"fonts/large.fnt\";\n","import { Button, Display, DisplayButton, Page } from \"../generated\";\nimport { getBase64Image } from \"../lib/image/base64Encode\";\nimport { createDefaultBackDisplay } from \"./defaultBackImage\";\nimport { getEmptyConvertedImage } from \"./emptyConvertedImage\";\nimport { fontMedium } from \"./fonts\";\nimport { EAction, EImageMode, ETextPosition } from \"./modes\";\n\nconst createDefaultButton: () => Button = () => {\n  const button: Button = {\n    primary: {\n      mode: EAction.noop,\n      values: {\n        [EAction.changePage]: \"\",\n        [EAction.hotkeys]: [],\n        [EAction.settings]: {\n          setting: 0,\n          value: 128,\n        },\n        [EAction.special_keys]: 0,\n        [EAction.text]: \"\",\n      },\n      leavePage: { enabled: false },\n    },\n    secondary: {\n      mode: EAction.noop,\n      values: {\n        [EAction.changePage]: \"\",\n        [EAction.hotkeys]: [],\n        [EAction.settings]: { setting: 0, value: 128 },\n        [EAction.special_keys]: 0,\n        [EAction.text]: \"\",\n      },\n      leavePage: { enabled: false },\n    },\n  };\n  return button;\n};\nexport const createDefaultDisplay = (): Display => ({\n  originalImage: undefined,\n  convertedImage: getEmptyConvertedImage(),\n  previewImage: getBase64Image(getEmptyConvertedImage()),\n  imageSettings: {\n    brightness: 0,\n    contrast: 0,\n    whiteThreshold: 64,\n    blackThreshold: 192,\n    imageMode: EImageMode.normal,\n    invert: true,\n    autoCrop: true,\n  },\n  textSettings: {\n    font: fontMedium,\n    text: \"\",\n    position: ETextPosition.right,\n  },\n  textWithIconSettings: {\n    iconWidthMultiplier: 0.35,\n  },\n  isGeneratedFromDefaultBackImage: false,\n});\n\nexport const createDefaultDisplayButton = async (): Promise<DisplayButton> => {\n  return {\n    button: createDefaultButton(),\n    display: createDefaultDisplay(),\n    live: {\n      bottom: \"none\",\n      top: \"none\",\n    },\n  };\n};\n\nexport const createDefaultPage = async (\n  count: number,\n  previousPage?: string\n): Promise<Page> => {\n  const page: Page = {\n    name: \"\",\n    usePageNameAsWindowName: true,\n    displayButtons: [],\n  };\n  for (var i = 0; i < count; i++) {\n    page.displayButtons.push(await createDefaultDisplayButton());\n  }\n  if (previousPage !== undefined) {\n    page.displayButtons[0].button!.primary.mode = EAction.changePage;\n    page.displayButtons[0].button!.primary.values[EAction.changePage] =\n      previousPage;\n    page.displayButtons[0].display = await createDefaultBackDisplay(\n      previousPage\n    );\n  }\n  return page;\n};\n","import fs from \"floyd-steinberg\";\r\nimport type Jimp from \"jimp\";\r\nimport debounce from \"lodash/debounce\";\r\n\r\nimport { EImageMode, ETextPosition } from \"../../definitions/modes\";\r\nimport { Display } from \"../../generated\";\r\nimport { colorBitmapToMonochromeBitmap } from \"./colorToMonoBitmap\";\r\n\r\nexport const _composeImage = async (\r\n  display: Display,\r\n  width = 128,\r\n  height = 64\r\n): Promise<Buffer> => {\r\n  const jimp = (await import(\"jimp\")).default;\r\n  const { imageSettings, textWithIconSettings, textSettings, originalImage } =\r\n    display;\r\n  if (!originalImage) throw new Error(\"no original image\");\r\n  let jimpImage: Jimp;\r\n  try {\r\n    jimpImage = await jimp.read(originalImage);\r\n  } catch {\r\n    console.log(\"image is corrupted\");\r\n    jimpImage = await jimp.create(width, height, \"black\");\r\n  }\r\n\r\n  if (imageSettings.imageMode === EImageMode.dither) {\r\n    const brightnessMultiplier = imageSettings.invert ? -0.4 : 0.4;\r\n    await jimpImage.contrast(\r\n      imageSettings.contrast * brightnessMultiplier * -1\r\n    );\r\n    await jimpImage.brightness(imageSettings.brightness * brightnessMultiplier);\r\n    jimpImage.scaleToFit(width, height);\r\n    jimpImage.bitmap = fs(jimpImage.bitmap);\r\n    if (imageSettings.invert) jimpImage.invert();\r\n  } else if (imageSettings.imageMode === EImageMode.hybrid) {\r\n    // dither part\r\n    const brightnessMultiplier = imageSettings.invert ? -0.4 : 0.4;\r\n    const ditherImage = await jimp.create(jimpImage);\r\n    await ditherImage.contrast(\r\n      imageSettings.contrast * brightnessMultiplier * -2.5\r\n    );\r\n    await ditherImage.brightness(\r\n      imageSettings.brightness * brightnessMultiplier\r\n    );\r\n    ditherImage.scaleToFit(width, height);\r\n    ditherImage.bitmap = fs(ditherImage.bitmap);\r\n    if (imageSettings.invert) ditherImage.invert();\r\n    // end dither part\r\n\r\n    await jimpImage.grayscale();\r\n    await jimpImage.scaleToFit(width, height);\r\n    await jimpImage.contrast(imageSettings.contrast);\r\n    await jimpImage.brightness(imageSettings.brightness);\r\n    const factor = 50; // imageSettings.edgeSensitivity;\r\n    const background = await jimp.create(\r\n      width + 3,\r\n      height + 3,\r\n      imageSettings.invert ? \"white\" : \"black\"\r\n    );\r\n    jimpImage = background.composite(\r\n      jimpImage,\r\n      (width - jimpImage.getWidth()) / 2 + 3,\r\n      (height - jimpImage.getHeight()) / 2 + 3\r\n    );\r\n    // makes thicker edges\r\n    // await jimpImage.convolute([\r\n    //   [0, 0, factor, 0, 0],\r\n    //   [0, 0, factor, 0, 0],\r\n    //   [factor, factor, factor * 8 * -1, factor, factor],\r\n    //   [0, 0, factor, 0, 0],\r\n    //   [0, 0, factor, 0, 0],\r\n    // ]);\r\n    await jimpImage.convolute([\r\n      [0, factor, 0],\r\n      [factor, factor * 4 * -1, factor],\r\n      [0, factor, 0],\r\n    ]);\r\n    jimpImage.crop(3, 3, jimpImage.getWidth() - 3, jimpImage.getHeight() - 3);\r\n    // dither part\r\n    jimpImage.composite(\r\n      ditherImage,\r\n      (width - ditherImage.getWidth()) / 2,\r\n      (height - ditherImage.getHeight()) / 2,\r\n      {\r\n        mode: jimp.BLEND_ADD,\r\n        opacityDest: 1,\r\n        opacitySource: 1,\r\n      }\r\n    );\r\n    // dither part end\r\n  } else if (imageSettings.imageMode === EImageMode.normal) {\r\n    await jimpImage.threshold({\r\n      max: imageSettings.whiteThreshold,\r\n      replace: imageSettings.blackThreshold,\r\n      autoGreyscale: false,\r\n    });\r\n    if (imageSettings.invert) jimpImage.invert();\r\n  }\r\n  if (imageSettings.autoCrop) await jimpImage.autocrop();\r\n\r\n  const background = new jimp(width, height, \"black\");\r\n\r\n  if (textSettings.text?.length) {\r\n    const font = await jimp.loadFont(textSettings.font);\r\n\r\n    const fontSize = font.common.lineHeight - 2;\r\n    let lines = textSettings.text.split(/\\r?\\n/).filter((line) => line);\r\n    if (textSettings.position === ETextPosition.right) {\r\n      jimpImage.scaleToFit(\r\n        width * textWithIconSettings.iconWidthMultiplier,\r\n        height\r\n      );\r\n    } else {\r\n      jimpImage.scaleToFit(width, height - fontSize * lines.length);\r\n    }\r\n    const overAllLineHeight = lines.length * fontSize + (lines.length - 1) * 1;\r\n    const offset = (height - overAllLineHeight) / 2;\r\n    await Promise.all(\r\n      lines.map(async (line, index) => {\r\n        if (textSettings.position === ETextPosition.bottom) {\r\n          await background.print(\r\n            font,\r\n            (width - (fontSize / 2) * line.length) / 2,\r\n            height - fontSize * (lines.length - index),\r\n            line\r\n          );\r\n        } else {\r\n          const lineOffset = offset + fontSize * index;\r\n          const xOffset = jimpImage.getWidth() + 1;\r\n          await background.print(\r\n            font,\r\n            (width - xOffset - (fontSize / 2) * line.length) / 2 + xOffset,\r\n            lineOffset,\r\n            line\r\n          );\r\n        }\r\n      })\r\n    );\r\n    if (textSettings.position === ETextPosition.bottom) {\r\n      background.composite(jimpImage, width / 2 - jimpImage.getWidth() / 2, 0);\r\n    } else {\r\n      background.composite(\r\n        jimpImage,\r\n        0,\r\n        height / 2 - jimpImage.getHeight() / 2\r\n      );\r\n    }\r\n  } else {\r\n    jimpImage.scaleToFit(width, height);\r\n    background.composite(\r\n      jimpImage,\r\n      width / 2 - jimpImage.getWidth() / 2,\r\n      height / 2 - jimpImage.getHeight() / 2\r\n    );\r\n  }\r\n  const bitmapBuffer = await background.getBufferAsync(\"image/bmp\");\r\n  return await colorBitmapToMonochromeBitmap(bitmapBuffer, width, height);\r\n};\r\n\r\nexport const _composeText = async (\r\n  textSettings: Display[\"textSettings\"],\r\n  width = 128,\r\n  height = 64\r\n): Promise<Buffer> => {\r\n  const jimp = (await import(\"jimp\")).default;\r\n  const image = await jimp.create(width, height, \"black\");\r\n  const font = await jimp.loadFont(textSettings.font);\r\n  const fontSize = font.common.lineHeight - 2;\r\n  let lines = textSettings.text?.split(/\\r?\\n/).filter((line) => line) ?? [];\r\n  const overAllLineHeight = lines.length * fontSize + (lines.length - 1) * 1;\r\n  const offset = (height - overAllLineHeight) / 2;\r\n  await Promise.all(\r\n    lines.map(async (line, index) => {\r\n      const lineOffset = offset + fontSize * index;\r\n      await image.print(\r\n        font,\r\n        (width - (line.length * fontSize) / 2) / 2,\r\n        lineOffset,\r\n        line\r\n      );\r\n    })\r\n  );\r\n  const background = await jimp.create(width, height, \"black\");\r\n  background.composite(\r\n    image,\r\n    (width - image.getWidth()) / 2,\r\n    (height - image.getHeight()) / 2\r\n  );\r\n  const bitmapBuffer = await background.getBufferAsync(\"image/bmp\");\r\n  return await colorBitmapToMonochromeBitmap(bitmapBuffer, width, height);\r\n};\r\n\r\nexport const composeImage = debounce(_composeImage, 1, {\r\n  leading: true,\r\n  maxWait: 16,\r\n});\r\nexport const composeText = debounce(\r\n  (settings: Display) => _composeText(settings.textSettings),\r\n  1,\r\n  {\r\n    leading: true,\r\n    maxWait: 16,\r\n  }\r\n);\r\n","export enum EAction {\n  \"hotkeys\" = \"hotkeys\",\n  \"changePage\" = \"changePage\",\n  \"noop\" = \"noop\",\n  \"special_keys\" = \"special_keys\",\n  \"text\" = \"text\",\n  \"settings\" = \"settings\",\n}\n\nexport const ActionValue = {\n  [EAction.hotkeys]: 0,\n  [EAction.changePage]: 1,\n  [EAction.noop]: 2,\n  [EAction.special_keys]: 3,\n  [EAction.settings]: 5,\n  [EAction.text]: 6,\n};\n\nexport enum FDSettings {\n  absolute_brightness,\n  change_brightness,\n}\n\nexport enum ETextPosition {\n  right = \"right\",\n  bottom = \"bottom\",\n}\nexport enum EImageMode {\n  normal = \"normal\",\n  dither = \"dither\",\n  hybrid = \"hybrid\", // a mix of edge detect and dither\n}\n","import backImage from \"../definitions/back.png\";\nimport { createDefaultDisplay } from \"../definitions/defaultPage\";\nimport { Display } from \"../generated\";\nimport { generateAdditionalImagery } from \"../lib/configFile/parseConfig\";\nimport { stringToImage } from \"../lib/file/fileToImage\";\n\nexport const createDefaultBackDisplay = async function (\n  previousPage?: string\n): Promise<Display> {\n  const localDefaultBackDisplay = JSON.parse(\n    localStorage.getItem(\"defaultBackDisplay\") || \"{}\"\n  );\n  let display: Display = createDefaultDisplay();\n  if (Object.keys(localDefaultBackDisplay).length && previousPage !== \"dbd\") {\n    localDefaultBackDisplay.convertedImage = Buffer.from(\n      localDefaultBackDisplay.convertedImage\n    );\n    localDefaultBackDisplay.originalImage = Buffer.from(\n      localDefaultBackDisplay.originalImage\n    );\n    display = localDefaultBackDisplay;\n  } else {\n    display = {\n      ...display,\n      imageSettings: {\n        ...display.imageSettings,\n        invert: true,\n      },\n      originalImage: await stringToImage(backImage),\n      isGeneratedFromDefaultBackImage: true,\n    };\n  }\n  display = await generateAdditionalImagery(display);\n  return display;\n};\n","import { monochrome128by64BitmapHeader } from \"./headers\";\nexport const getEmptyConvertedImage = () => {\n  const header = new Buffer(monochrome128by64BitmapHeader());\n  return Buffer.concat([header, new Buffer(1024)]);\n};\n","const base64Encode = (input: Buffer) => {\r\n  var keyStr =\r\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\r\n  var output = \"\";\r\n  var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\r\n  var i = 0;\r\n\r\n  while (i < input.length) {\r\n    chr1 = input[i++];\r\n    chr2 = i < input.length ? input[i++] : Number.NaN; // Not sure if the index\r\n    chr3 = i < input.length ? input[i++] : Number.NaN; // checks are needed here\r\n\r\n    enc1 = chr1 >> 2;\r\n    enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\r\n    enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\r\n    enc4 = chr3 & 63;\r\n\r\n    if (isNaN(chr2)) {\r\n      enc3 = enc4 = 64;\r\n    } else if (isNaN(chr3)) {\r\n      enc4 = 64;\r\n    }\r\n    output +=\r\n      keyStr.charAt(enc1) +\r\n      keyStr.charAt(enc2) +\r\n      keyStr.charAt(enc3) +\r\n      keyStr.charAt(enc4);\r\n  }\r\n  return output;\r\n};\r\n\r\nexport const getBase64Image = (image: Buffer) => {\r\n  const prefix = \"data:image/bmp;base64,\";\r\n  return prefix + base64Encode(image);\r\n};\r\n","export const monochrome128by64BitmapHeader = () => [\r\n  0x42,\r\n  0x4d,\r\n  0x82,\r\n  0x04,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x82,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x6c,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x80,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0xc0,\r\n  0xff,\r\n  0xff,\r\n  0xff,\r\n  0x01,\r\n  0x00,\r\n  0x01,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x04,\r\n  0x00,\r\n  0x00,\r\n  0x23,\r\n  0x2e,\r\n  0x00,\r\n  0x00,\r\n  0x23,\r\n  0x2e,\r\n  0x00,\r\n  0x00,\r\n  0x02,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x02,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x42,\r\n  0x47,\r\n  0x52,\r\n  0x73,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x02,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0x00,\r\n  0xff,\r\n  0xff,\r\n  0xff,\r\n  0x00,\r\n];\r\n/*66,\r\n  77,\r\n  54,\r\n  96,\r\n  0,\r\n  0,\r\n  0,\r\n  0,\r\n  0,\r\n  0,\r\n  54,\r\n  0,\r\n  0,\r\n  0,\r\n  40,\r\n  0,\r\n  0,\r\n  0,\r\n  128, //width\r\n  0,\r\n  0,\r\n  0,\r\n  192, //height,\r\n  255,\r\n  255,\r\n  255,\r\n  1,\r\n  0,\r\n  24,\r\n  0,\r\n  0,\r\n  0,\r\n  0,\r\n  0,\r\n  0,\r\n  96,\r\n  0,\r\n  0,\r\n  0,\r\n  0,\r\n  0,\r\n  0,\r\n  0,\r\n  0,\r\n  0,\r\n  0,\r\n  0,\r\n  0,\r\n  0,\r\n  0,\r\n  0,\r\n  0,\r\n  0,\r\n  0\r\n];*/\r\n"],"sourceRoot":""}
(this["webpackJsonpfreedeck-configurator"]=this["webpackJsonpfreedeck-configurator"]||[]).push([[2],{109:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var r=n(3),a=n(6),c=n(93),s=function(){var t=Object(a.a)(Object(r.a)().mark((function t(n,a,s){var i,o,u,l,d,b,p,j,f,h,g,x;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i=n.slice(n.readUInt32LE(10)),o=[],u=0;u<a*s;u++)l=i.readUInt8(3*u),d=i.readUInt8(3*u+1),b=i.readUInt8(3*u+2),p=(l+d+b)/3>128?1:0,o.push(p);for(j=[],f=0;f<a*s/8;f++)h=8*f,g=o.slice(h,h+8).join(""),x=parseInt(g,2),j.push(x);return t.abrupt("return",e.concat([new e(Object(c.a)()),new e(j)]));case 6:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}).call(this,n(54).Buffer)},110:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return i}));var r=n(3),a=n(6),c=n(130),s=function(){var e=Object(a.a)(Object(r.a)().mark((function e(t){var a,c,s,i,o;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(0),n.e(1)]).then(n.t.bind(null,116,7));case 2:return a=e.sent.default,e.next=5,a.read(t);case 5:return c=e.sent,s=c.getMIME(),i="image/jpeg"===s?s:"image/gif",e.next=10,c.quality(70).scaleToFit(256,128,"").getBufferAsync(i);case 10:return o=e.sent,e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var t=Object(a.a)(Object(r.a)().mark((function t(a){var s,i,o,u,l,d;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.a)(a);case 2:return s=t.sent,t.next=5,Promise.all([n.e(0),n.e(1)]).then(n.t.bind(null,116,7));case 5:return i=t.sent.default,t.next=8,i.read(e.from(s));case 8:return o=t.sent,u=o.getMIME(),l="image/jpeg"===u?u:"image/gif",t.next=13,o.quality(70).scaleToFit(256,128,"").getBufferAsync(l);case 13:return d=t.sent,t.abrupt("return",d);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}).call(this,n(54).Buffer)},130:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return a}));var a=function(e){return new Promise((function(t,n){e&&((r=new FileReader).onloadend=function(){var e=r.result;null!==e&&void 0!==e&&e.byteLength&&t(e)},r.readAsArrayBuffer(e))}))}},132:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r}));var r=function(t){for(var n,r,a=e.alloc(0),c=0;c<8;c++)for(var s=0;s<8;s++){for(var i=2*s+16*c*8,o=new Array(16).fill(0),u=0;u<16;u+=8){r=1;for(var l=0;l<8;l++){n=t[i+16*l];for(var d=0;d<8;d++)128&n&&(o[u+d]|=r),n<<=1;r<<=1}i++}a=e.concat([a,e.from(o)])}return e.from(a)}}).call(this,n(54).Buffer)},136:function(e,t,n){"use strict";n.d(t,"b",(function(){return C})),n.d(t,"a",(function(){return S}));var r,a=n(9),c=n(19),s=n.n(c),i=n(71),o=n(10),u=n(8),l=s.a.object((r={},Object(o.a)(r,u.b.changePage,s.a.string().allow("")),Object(o.a)(r,u.b.hotkeys,s.a.array().items(s.a.number()).failover([]).required()),Object(o.a)(r,u.b.settings,s.a.object({setting:s.a.number().valid(u.e.absolute_brightness,u.e.change_brightness).failover(u.e.change_brightness).required(),value:s.a.number().failover(128).required()}).required()),Object(o.a)(r,u.b.special_keys,s.a.number().failover(0).required()),Object(o.a)(r,u.b.text,s.a.string().allow("").failover(" ")),r)).meta({className:"ButtonValues"}),d=s.a.object({enabled:s.a.boolean().failover(!1).required(),pageId:s.a.string()}).meta({className:"LeavePage"}),b=s.a.object({mode:s.a.string().valid(u.b.changePage,u.b.hotkeys,u.b.noop,u.b.settings,u.b.special_keys,u.b.text).failover(u.b.noop).strict().required(),values:l.required().failover(l),leavePage:d.required().failover(d)}).meta({className:"ButtonSetting"}),p=s.a.object({primary:b.required().failover(b),secondary:b.required().failover(b)}).meta({className:"Button"}),j=n(84),f=n(60),h=n(92),g=s.a.object({iconWidthMultiplier:s.a.number().min(0).max(1).failover(.35).required()}).meta({className:"TextWithIconSettings"}),x=s.a.object({font:s.a.string().valid(f.d,f.c,f.b,f.a).failover(f.b).required(),text:s.a.string().allow(""),position:s.a.number().valid(u.d.bottom,u.d.right).failover(u.d.bottom).required()}).meta({className:"TextSettings"}),m=s.a.object({blackThreshold:s.a.number().failover(192).required(),whiteThreshold:s.a.number().failover(64).required(),brightness:s.a.number().failover(0).required(),contrast:s.a.number().failover(0).required(),autoCrop:s.a.bool().failover(!0).required(),imageMode:s.a.valid(u.c.dither,u.c.normal,u.c.hybrid).failover(u.c.normal).required(),invert:s.a.bool().failover(!1).required()}).meta({className:"ImageSettings"}),O=s.a.object({convertedImage:s.a.any(),imageSettings:m.required().failover(m),isGeneratedFromDefaultBackImage:s.a.bool().required().failover(!1),originalImage:s.a.any(),previewImage:s.a.string().required().failover(Object(h.a)(Object(j.a)())),textSettings:x.required().failover(x),textWithIconSettings:g.required().failover(g)}).meta({className:"Display"}),v=s.a.string().required().allow("cpu_temp","gpu_temp","cpu_temp_graph","gpu_temp_graph","cpu_temp_line","gpu_temp_line","none").failover("none").meta({className:"LiveMode"}),y=s.a.object({top:v,bottom:v}).meta({className:"Live"}),w=s.a.object({display:O.required().failover(O),live:y.required().failover(y)}).meta({className:"DefaultBackDisplay"}),k=s.a.object({button:p.required().failover(p),display:O.required().failover(O),live:y.required().failover(y)}).meta({className:"DisplayButton"}),I=s.a.object({createdBy:s.a.string().required(),forkedFrom:s.a.string()}),C=s.a.object({name:s.a.string().allow(""),windowName:s.a.string().allow(""),publishData:I,isInCollection:s.a.string(),usePageNameAsWindowName:s.a.bool().failover(!0).required(),displayButtons:s.a.array().items(k).required().failover([])}).meta({className:"Page"}),N=s.a.object({byId:s.a.object().custom((function(e,t){var n={};return Object.entries(e).forEach((function(e){var t=Object(a.a)(e,2),r=t[0],c=t[1],s=C.validate(c,{stripUnknown:!0});if(n[r]=s.value,s.error)throw new Error(s.error.message)})),n})).meta({className:"Record<string,Page>"}).required().failover({}),sorted:s.a.array().items(s.a.string()).failover([]).required()}).meta({className:"Pages"}),P=(s.a.object({name:s.a.string(),pages:s.a.array().items(s.a.string()).failover([]).required(),windowName:s.a.string(),useCollectionNameAsWindowName:s.a.bool().failover(!0).required()}).meta({className:"Collection"}),s.a.object({byId:s.a.object().unknown(!0).meta({unknownType:"Collection"}).failover({}).required(),sorted:s.a.array().items(s.a.string()).failover([]).required()}).meta({className:"Collections"})),S=s.a.object({pages:N.required(),brightness:s.a.number().failover(128).required(),oledSpeed:s.a.number().failover(50).required(),oledDelay:s.a.number().failover(2).required(),preChargePeriod:s.a.number().failover(17).required(),clockFreq:s.a.number().failover(15).required(),clockDiv:s.a.number().failover(2).required(),saveJson:s.a.bool().failover(!0).required(),height:s.a.number().max(16).min(1).failover(2).required(),width:s.a.number().max(16).min(1).failover(3).required(),configVersion:s.a.string().failover(i.configFileVersion).required(),screenSaverTimeout:s.a.number().min(0).failover(0).required(),collections:P.required().failover(P),defaultBackDisplay:w.required().failover(w)}).required().meta({className:"Config"}).strict(!0)},159:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var r=n(160),a=n(214),c=n(216),s=function(t,n){var s=e.concat([Object(c.a)(t.width,t.height,t.brightness,t.screenSaverTimeout,t.oledSpeed,t.oledDelay,t.preChargePeriod,16*Math.min(15,t.clockFreq)+Math.min(15,t.clockDiv),t.saveJson,t.pages.sorted.length),Object(r.a)(t.pages),Object(r.b)(t.pages)]);return(t.saveJson||n)&&(s=e.concat([s,Object(a.a)(t)])),s}}).call(this,n(54).Buffer)},160:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(8),a=n(47),c=n(132),s=function(e,t,n,c,s){var i=s?t.button.secondary:t.button.primary,o=c+(s?a.a/2:0);switch(e.writeUInt8(r.a[i.mode],o),i.mode){case r.b.changePage:var u=n.sorted.findIndex((function(e){return e===i.values[r.b.changePage]}));e.writeUInt16LE(u,o+1);break;case r.b.hotkeys:i.values[r.b.hotkeys].forEach((function(t,n){e.writeUInt8(t,o+n+1)}));break;case r.b.special_keys:e.writeUInt8(i.values[r.b.special_keys],o+1);break;case r.b.settings:e.writeUInt8(i.values[r.b.settings].setting,o+1),i.values[r.b.settings].setting===r.e.absolute_brightness&&e.writeUInt8(i.values[r.b.settings].value,o+2)}var l=n.sorted.findIndex((function(e){return e===t.button[s?"secondary":"primary"].leavePage.pageId}));return e.writeUInt16LE(l+1,o+a.a/2-2),e},i=function(t){var n=t.sorted.length*t.byId[t.sorted[0]].displayButtons.length,r=new e(a.a*n);return t.sorted.forEach((function(e,n){var c=t.byId[e];c.displayButtons.forEach((function(e,i){var o=c.displayButtons.length*a.a*n+i*a.a;r=s(r,e,t,o,!1),r=s(r,e,t,o,!0)}))})),r},o=function(t){var n=new e(0),r=t.byId[t.sorted[0]].displayButtons[0].display.convertedImage.readUInt32LE(10);return console.log(r),t.sorted.forEach((function(a){t.byId[a].displayButtons.forEach((function(t){var a=new e(1);a.writeUInt8("none"!==t.live.top||"none"!==t.live.bottom?1:0,0),n=e.concat([n,a,Object(c.a)(t.display.convertedImage.slice(r))])}))})),n}}).call(this,n(54).Buffer)},161:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var r=n(3),a=n(6),c=n(130),s=n(59),i=function(){var t=Object(a.a)(Object(r.a)().mark((function t(n,a){var i,o;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.byteLength){t.next=4;break}t.t0=n,t.next=9;break;case 4:return t.t1=e,t.next=7,Object(c.a)(n[0]);case 7:t.t2=t.sent,t.t0=t.t1.from.call(t.t1,t.t2);case 9:return i=t.t0,t.prev=10,t.next=13,Object(s.c)(i);case 13:o=t.sent,a(o),t.next=20;break;case 17:t.prev=17,t.t3=t.catch(10),window.advancedAlert("Invalid config File",t.t3.message);case 20:case"end":return t.stop()}}),t,null,[[10,17]])})));return function(e,n){return t.apply(this,arguments)}}()}).call(this,n(54).Buffer)},206:function(e,t,n){"use strict";t.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH8AAAB/CAYAAADGvR0TAAAACXBIWXMAABFgAAARYAFbISxkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAEq9JREFUeJztnXtMk9cbx59eYECp1NWJ0haFiSgKXsak6iigMIb+hWPe5sySjU3nYpYZp/GWgZuL2y9B1M1l0+gcIhcBzXROd4kQcVkkqIg6hgWBqpkoBQul1LbP7w8sA4HSnve878ul3+Qkc3DOeZ7n8/BeznsuAkREGEZqaWmB8vJyqK2thYaGBtDpdPDgwQPQ6/Xw8OFDaG1tBZvNBq2trV11fH19QSgUwqhRo0Aul4NMJoNx48aBUqkEhUIBkyZNgpdeegkkEgmPntGXYCjDt1gscPHiRSgrK4Py8nKorKyE6upqMJlM1Pvy8fGBkJAQmDVrFqjVatBoNDB16lTq/XCpIQf/n3/+gXPnzkFxcTGUlJRAY2MjL3YIhUKYPHkyqNVqUKvVkJSUBIGBgbzYQqohAb+mpgYKCwvh9OnTcOnSJXjy5AnfJvWSl5cXREdHw6JFi2Dp0qUQEBDAt0kDCwepLBYL5ufnY3JyMnp5eSEADJni6+uLy5Ytw4KCArRarXyHsl8NOvhNTU345Zdf4pQpU3iHSKOEh4djRkYGNjc38x3aXho08P/991/csmULjhs3jndgbJSAgABMS0vDpqYmvkPdJd7hGwwGTEtLG7bQny0KhQJ37dqFbW1tfIeeX/jHjx/H0NBQ3oHwUUJCQvD7779Hm83GW/x5gV9VVYUpKSkoEAh4h8B3SUxMxOvXr/OBgVv4JpMJP/vsMxw9ejTvQR9Mxc/PD9PS0tBsNnOJgzv41dXVGBsby3ugB3OJjo7GyspKrpBwAz8vLw/Hjx/Pe3CHQpHL5Xjw4EEusLALv6OjA7ds2YIeHh68B3UoFYFAgKmpqWg0GtnEg6wN79bV1cHq1auhpKSEjeYdSiwWg1KphIkTJ8KLL74IQUFBEBQUBL6+vuDn5wcSiQQ8PT1BpVJBQ0MDmEwmMBqN0NraCnq9HnQ6HdTW1sLt27ehpqYGdDodWK1Wzv3QaDSQlZUFKpWKlfZZgX/z5k1YunQp3Lhxg3bTfUokEkFYWBhERkZCZGQkJCQkQEhICLX2dTodFBcXw+XLl6GsrAwuX74MZrOZWvuOFBoaCtnZ2TB79mz6jdO+lJSWlmJgYCDrl0axWIyxsbGYkZGBWq2WthsOpdVqcf/+/bhw4UJObmljx47F8+fPU/eDKvyzZ8/imDFjWA1EWFgY7tixg7d342d18+ZN3LFjB06fPp1Vv/38/LCoqIiq7dTg5+bmolQqZc15tVqNP/zwA1osFlomU5XVasXs7Gx85ZVXWIuBRCLBnJwcajZTgf/zzz+jr68vdWcFAgEmJCRQz3i2derUKYyPj2dlBFMikVCLB2P4paWlrFzqQ0ND8fjx4zR85E0FBQU4depUVm4B586dY2wfI/i3bt3C4OBgqo75+Pjg+vXrUa/XM3bOkbj6oGIwGHD79u3Ub4ljx47FsrIyRrYRw6+vr8ewsDCqDsXExHDyIGe1WnHNmjW4detW1vuyq6KiAhcsWED96lhfX09sExH89vZ2jI6OpuaEh4cHbty4kZMPGzabDdeuXYsAnc8UmzdvZr1Pu8xmM27atInq66FGo8H29nYie4jgf/TRR9SMVyqVWFhYSGS8q+oO3l64TgDEzgfkCRMmUIvh2rVriexwGX5eXh6KxWIqRkdFRWFNTQ2R4a6qL/B8JoBWq0W1Wk0ljkKhEA8dOuSyDS7B12q1qFQqqRickJCAjY2NLhtMIkfg+UwAvV6PixcvphJPuVzu8udgp+GbzWaMj4+nYmhycjIaDAaXg0UiZ8DzmQBGoxFTUlKoxHX+/PnY0dHhdN9Ow09PT6diYGpqKmejdK6A5zMBLBYLpqamUonvzp07ne7XKfi3b99GuVzO2LCUlJRBDZ7PBLBarfjWW28xjrFUKsUrV6441adT8F9//XXGRr366qucTVdmAp7PBGhra8PExETGsU5KSnKqvwHhFxYWMh6jjoqKGlQPd4M5AZqamqh8HPrxxx8H7MshfIPBwHgUT6VScfY6Z7Va8d1336UCvnsCFBQUcGK/XTTeqsLCwga80jqEn5aWxsgADw8PPHnyJNXA9Ceaf/Hdy7p163hZWHHy5EnGI4FffPGFwz76hd/Y2Mh4xu3GjRupB6UvDTfwdm3cuJGR/QqFwuHawH7hb926lVHHMTExLr1zkmq4gkfsHFuJi4tj5Ed6enq/7fcJ/9GjR+jv70/coVQq5eTr3HAGb9fVq1cZTZRRKBT9Lg/vE/7u3bsZBY+LT6UjAbxdmzdvZuTTnj17+my3F3yLxcJo9kloaCg+fvyY1WCMJPCInW9dTDariIiI6HOHkF7w8/PziTsRCASsT70aaeDtys/PZzTe0te8v17wlyxZQtxBQkICqwEYqeDtWrhwIbGPy5cv79VeD/g1NTXo7e1NNbtoaaSDR+x89yf1UyqV4r1793q01wP+V199Rdz43LlzWQuiG/x/mjdvHrG/e/fu7dFWD/gxMTHEDWdlZbHirBt8T2VlZRH7nJiY2KOtLvhVVVXEw4lhYWGsfKp1g+8tq9WK06ZNI/Lby8sLGxoautoSwlP98ssvxDtbpqSkgEgkIqrbnxAR1q1bBwcOHKDa7rp162Dfvn0gEAiotsuVhEIhJCcnE9U1mUxw5syZ//6HPQtIn/LFYjFWVFRQzW73X7xjXb9+nfgq/eabb3a1A4idGyW98MILRI3FxMRQdcwN3jmRjvkrlcquWzQgIv7xxx/EQc3IyKDmkBu888rMzCSOR2lpKSI+hU/6iicWi6ltjOAG75qqqqpQJBIRxSQzMxMRn8JfsWIFUSMRERFUHHGDJ1N4eDhRXFavXo2IT+FHREQQNfLee+8xdsANnlzvv/8+UWxmzpyJiIjQ0tJCvJ/94cOHGRlvsVioz7kbKeAREY8cOUIUH4lEgkajEeH3338nakAkEjG63zMZrHCD71RdXR3xff/ixYsovHPnDpBIpVJBcHAwUV2bzQYRERHUt2ob6gM4riowMBAUCgVRXa1WC8KGhgaiym7wg0OkHBoaGkCs0+k465Qt8J6ennD06FE4evQo1Xa5UlJSEuTm5hLVDQ4OhgsXLrhc7+7duyB+8OABUacTJ0506ffZAg8AYDabOdsRkw0x2dqV9C//3r17INTr9USVXYHPJviRrgkTJhDVa25uBuGjR4+IKstkMqd+zw2eXUmlUqJ6er0ehN3PlHVFzpwr6wbPvnx9fYnqPX78GISk98qB4LvBcyPSw507OjpASDqBw9Hlxg2eO40aNYqontlsJofv5+fX78/S09Pd4DnS6NGjiepZLBYQenh4EFVuaWnp92effvoprFixgqhdt1xTU1MTUT2xWEwO//Hjxw5/np2d7U4ADmQwGIjqPffccyD09PQkqtzW1jbg77gTgH05w6EveXp6gpD0gcHZV0R3ArAr0ld1Pz8/EJI+MAx02e8udwKwJ1c4dJdMJiOHX19f79LvuxOAHdXV1RHVk8lkIB43bhxRZa1W63Kd7OxsAAA4fvw4UZ/9SSQSgbe395D9nMtkwQsJBwCAgIAAECuVSqLKtbW1RPXYSACr1QqRkZFQWFhI/N47VFVTU0NUT6lUgpAUPmmnAOzcAi5cuABLliwB0q+UQ1Wkf4RKpRKguLiYeA5f90V/JFq2bBkKhUKqc/hiY2Mdbj82nFRbW0scv9LSUoTW1lb08fEhasCZLT4H0oEDB6gd3jDSEuDw4cNE8ZFIJNje3o5CiURCfO7spUuXiOp115o1a2Dfvn0gFosZt2XXSLkFkMZ/8uTJ4OXlBUIAgFmzZhE18ueffxLVe1buBCATafxnzJjR+R+IiN9++y3R5YPmWj1E9y3AFTFZq7dv3z5EfLpc68aNG8QPDvv376fqlDsBnNOePXuI43Hp0iVE7LYtC+kmf/Hx8dQdcyfAwCLdP0mlUnVtyNgF/+233yZqTCwWu3yqkzNyJ0D/qqysJI7NqlWrutrp2pNHrVYDiSwWC+Tl5RHVdST3Q2D/ysnJAYvFQlQ3Ojr6v3/Ys+DOnTvEq3WnT5/e596uNOS+AvSU1WolPv3E29sbdTpdV1s99uFLSEggDmhubi5rDrsT4D8dPXqU2OdnD17qAT8jI4O44fnz57PqtDsBOjeymDt3LrG/9lc8u3rAv3fvHqON/dk+T+ebb74Z0QlQUFBA7KdUKsX79+/3aK/XrtvLli0j7mDhwoWsB2AkJwCTI1dWrlzZq71e8AsLC4k7EAgEmJ+fz3oQRmIC5ObmMtpvv6+rci/4NpsNZ86cSdxJaGgotrS0sB6MkZQABoOB0ekn4eHhzp20gcjswQ+AmzN2EEdOAmzatImRT89utW5Xn/Cbm5sxICCAuDOpVEp9P97+NNwToLy8HCUSCbEvSqWy3zOP+j1Xj+lpmgsWLECz2cxaULpruCaAyWRCjUbDyA9HR6r3C1+v16NKpWLU8aZNm1gJSl8ajgnw8ccfM7Kf+ERNRMRdu3Yx6pzLs3QRh1cCnDhxgrEvu3fvdtiHQ/hGo5F4f1d7CQgIwNu3b1MNjCNlZmZSTQAfHx88e/YsZ/Yj0jlFe8aMGWgymRz24xA+IrOxZHuJiorCxsZGasEZSLSuAD4+PpiTk8OZ3YidB1i//PLLjOwWCoX4008/DdjXgPBtNhu+9tprjAOZmJg44HnuNMU0AfgA39bWhvHx8Yxj3ddoXl8aED5i57Eefn5+jI1KSUlh5SCm/kSaAHyAf/LkCS5dupRxjJ9//nmsqqpyqk+n4CMyf/Wzl9TU1EGdAHyBf+edd6jE9/PPP3e6X6fh0zjL3V6Sk5PRYDAQBYpEziYAH+CNRiOVv3gAQI1Gg0+ePHG6b6fhIyL+/fffxAcxPVsSEhLw4cOHLgeLVAMlAB/g9Xo9JiUlUYmnXC7H69evu9S/S/AREQ8ePEhtfZ1araY6738g9ZcAfICvrq7GOXPmUImjUCjEI0eOuGyDy/ARET/44AMqRgN0jkIVFhaSmEGkZxOAD/CnT5/GwMBAajH88MMPiewggt/e3s54zLl78fDwwE8++YTzbwFcg+/o6MANGzZQHYSKiYnB9vZ2InuI4CMi1tfXEy/06K/ExcXhtWvXSE1ySXv37uUU/JUrV6j+wQAATpkyhdEyeWL4iIhXr17F8ePHU3XI29sb169fj3q9nolpg0YGgwG3b9/OaG5kX8Xf3x/LysoY2cYIPiLi+fPnqQwA9ZXVJ06cYGoer8rNzcXQ0FDqsZHJZPjrr78yto8xfETEU6dOUc9se5k/fz4WFRXRMJMT2Ww2LCgowAULFjCac+foykjrAZkKfETEnJwcRjNOBirz5s3DY8eOsbYyiKmsViseO3aM0bz6gYpEIqH6nEINPiJiUVERK7eA7mXatGm4bds2lwc02FJFRQVu27aNeAmVs0Umk1GfG0EVPiLiuXPncOzYsawGAqBzdXBcXBxmZmY6/SGDlm7duoV79uzB2NhY4g0SXCn+/v7422+/UfeDOnxExGvXrrFyWmZ/RSgUYkhICK5YsQK//vpr6qOGdXV1mJWVhWvWrMHIyEj08PDgzLcpU6ZgeXk5VX/sEiAiAgtqaGiAVatWQUlJCRvNO5RIJAKFQgFBQUEwadIkCAoKAqVSCXK5HCQSCfj4+IC3tzeoVCqor6+H9vZ2MBqN0NraCk1NTaDT6aCmpga0Wi3U1tbC3bt3wWazce5HTEwMZGVlAeleiQOKlZR6KpPJhBs2bKC+195wLwKBAFNTU4lH7pwVq/DtOnToEI4ZM4b3oA6FMmbMGKKPNCTiBD5i5+5RtOYDDNei0WhY2eKmP3EGH7FzQkh6ejrrr4NDrcjlcty1a5dLEzFoiFP4dlVWVlKbxDCUi0gkwpUrV3I6p6G7eIFvV15eHqevhIOphIeHc7qgpS/xCh+xc7ryF198wXiRwlApKpUKd+/ejR0dHXyHnn/4djU1NWF6ejoqFAreAbFRlEol7ty5c1B9qh408O0yGo343Xff4ezZs3kHRqOEh4fj//73P2xubuY7tL006ODbZbVasaioCJcvX45SqZR3iK6UUaNG4cqVK/HkyZOD9iskIovDuzR1//59OHHiBJw5cwaKi4vBZDLxbVIveXl5QVxcHCxatAjeeOMN8Pf359ukATUk4HeXTqeDM2fOQElJCZSUlIBOp+PNlsDAQIiOjgaNRgOLFy8GhULBmy0kGnLwu8tqtcJff/0Fly9fhvLycqioqIDq6mriI0YdydfXF0JCQiA8PBxmz54Nc+bMgaioKBAKhQNXHqQa0vD7kslkgrKyMtBqtaDT6UCn08H9+/ehubkZmpubQa/XAyL2OInSfhz86NGjQSaTgUwmg/Hjx4NSqQSVSgXBwcEQGRkJXl5efLnFiv4PiKmJCycGSMgAAAAASUVORK5CYII="},210:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return I}));var r=n(16),a=n(3),c=n(6),s=n(24),i=n(25),o=n(71),u=n(47),l=n(132),d=n(79),b=n(33),p=n(211),j=n(212),f=n(53),h=3,g=16,x=32,m=33,O=34,v=48,y=49,w=67,k=68,I=function(){function t(){var e=this;Object(s.a)(this,t),this.Serial=void 0,this.connected=f.a.disconnect,this.portsChangedCallbacks={},this.ports=[],this.connectedPortIndex=-1,this.calls=[],this.onPortsChanged=function(){var t=Object(c.a)(Object(a.a)().mark((function t(n,r){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.ports=n,e.connectedPortIndex=r,-1===e.connectedPortIndex?e.connected=f.a.disconnect:e.connected=f.a.connect,Object.values(e.portsChangedCallbacks).forEach((function(e){return e(n,r)}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),this.waitForTurn=function(){var t=Object(c.a)(Object(a.a)().mark((function t(n){var r;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.calls.length?e.calls[e.calls.length-1].id+1:0,e.calls.push({id:r,name:n});case 2:if(e.calls[0].id===r){t.next=7;break}return t.next=5,Object(b.e)(100);case 5:t.next=2;break;case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.nextCall=function(){e.calls.shift()},this.throwError=function(t){throw e.nextCall(),new Error(t)},window.__TAURI_IPC__?this.Serial=new p.a(this.onPortsChanged):this.Serial=new j.a(this.onPortsChanged)}return Object(i.a)(t,[{key:"connect",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Serial.connect(t,!0);case 2:this.connected=f.a.connect;case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Serial.disconnect();case 2:this.connected=f.a.disconnect;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestNewPort",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Serial.requestNewPort();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFirmwareVersion",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(){var t,n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForTurn("getFirmwareVersion");case 2:return this.connected===f.a.disconnect&&this.throwError("not connected"),this.Serial.flush(),e.next=6,this.write([h,g]);case 6:return e.next=8,this.readAsciiLine();case 8:if(""!==(t=e.sent)){e.next=13;break}return e.abrupt("return",this.throwError("could not get firmware version"));case 13:n=t;case 14:return this.nextCall(),e.abrupt("return",n);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHasJson",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(){var t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForTurn("getHasJson");case 2:return this.connected===f.a.disconnect&&this.throwError("not connected"),this.Serial.flush(),e.next=6,this.write([h,O]);case 6:return e.next=8,this.readAsciiLine();case 8:return t=e.sent,this.nextCall(),e.abrupt("return","1"===t);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCurrentPage",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(){var t,n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForTurn("getCurrentPage");case 2:return this.connected===f.a.disconnect&&this.throwError("not connected"),this.Serial.flush(),e.next=6,this.write([h,v]);case 6:return e.next=8,this.readAsciiLine();case 8:return t=e.sent,n=parseInt(t),this.nextCall(),e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCurrentPage",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForTurn("setCurrentPage");case 2:return this.connected===f.a.disconnect&&this.throwError("not connected"),this.Serial.flush(),e.next=6,this.write([h,y,t.toString()]);case 6:this.nextCall();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendImageToScreen",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n,c,s,i=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:0,e.next=3,this.waitForTurn("imageToScreen");case 3:return c=t.readUInt32LE(10),s=Object(l.a)(t.slice(c)),e.next=7,this.write([h,w,n]);case 7:return e.next=9,this.Serial.write(Object(r.a)(s));case 9:return e.next=11,this.nextCall();case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"writeToScreen",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n,r,c=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:0,c.length>2&&void 0!==c[2]?c[2]:1,e.next=4,this.waitForTurn("writeToScreen");case 4:return this.connected===f.a.disconnect&&this.throwError("not connected"),this.Serial.flush(),e.next=8,Object(d.b)({font:"fonts/medium.fnt",text:t,position:"bottom"});case 8:return r=e.sent,this.nextCall(),e.next=12,this.sendImageToScreen(r,n);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"registerOnPortsChanged",value:function(e){var t=Object.keys(this.portsChangedCallbacks).length;return this.portsChangedCallbacks[t]=e,this.onPortsChanged(this.ports,this.connectedPortIndex),t}},{key:"clearOnPortsChanged",value:function(e){delete this.portsChangedCallbacks[e]}},{key:"readConfigFromSerial",value:function(){var t=Object(c.a)(Object(a.a)().mark((function t(n){var c,s,i,o,u,l,d,b;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getFirmwareVersion();case 2:return c=t.sent,t.next=5,this.waitForTurn("readConfigFromSerial");case 5:if("1"!==c.split(".")[0]){t.next=9;break}this.throwError("unsupported 1.x firmware"),t.next=11;break;case 9:return t.next=11,this.write([3,x]);case 11:return t.next=13,this.readAsciiLine();case 13:"unavailable"===(s=t.sent)&&this.throwError("no config available"),s.length||this.throwError("could not receive filesize"),i=parseInt(s),o=[],u=new Date,null===n||void 0===n||n(o.length,i,u),l=0;case 21:if(!(o.length<i)){t.next=31;break}return t.next=24,this.read();case 24:if(d=t.sent,l++%8||null===n||void 0===n||n(o.length,i,u),0!==d.length){t.next=28;break}return t.abrupt("break",31);case 28:o.push.apply(o,Object(r.a)(d)),t.next=21;break;case 31:return null===n||void 0===n||n(o.length,i,u),b=e.from(o.slice(0,i)),this.nextCall(),t.abrupt("return",b);case 35:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"writeConfigOverSerial",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(t,n){var c,s,i,l,d,p,j,f;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getFirmwareVersion();case 2:return c=e.sent,e.next=5,this.waitForTurn("writeConfigOverSerial");case 5:return-1===Object(b.a)(c,o.minFWVersion)&&this.throwError("".concat(c,": Unsupported firmware. Please update to version ").concat(o.minFWVersion," or newer. Check the help page for more information.")),s=t.length.toString(),e.next=9,this.write([3,m]);case 9:return e.next=11,this.write([s]);case 11:i=new Date,l=0,d=Math.pow(2,13);case 14:if(!(l<t.length)){e.next=24;break}return p=Math.min(t.length,l+u.b),j=t.slice(l,p),f=Object(r.a)(j),l+=f.length,e.next=21,this.Serial.write(Object(r.a)(f));case 21:l%d===0&&(null===n||void 0===n||n(l,t.length,i)),e.next=14;break;case 24:setTimeout((function(){return null===n||void 0===n?void 0:n(l,t.length,i)}),0),this.nextCall();case 26:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"testOledParameters",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(t,n,r,c,s){var i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForTurn("testOledParameters");case 2:return this.connected===f.a.disconnect&&this.throwError("not connected"),this.Serial.flush(),i=16*Math.min(15,c)+Math.min(15,s),e.next=7,this.write([h,k,t.toString(),n.toString(),r.toString(),i.toString()]);case 7:this.nextCall();case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,c){return e.apply(this,arguments)}}()},{key:"readSerialCommand",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(){var t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForTurn("readSerialCommand");case 2:return t=this.Serial.readSerialCommand(),this.nextCall(),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readAsciiLine",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(){var t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Serial.readLine(3e3);case 2:return t=e.sent,e.abrupt("return",String.fromCharCode.apply(String,Object(r.a)(t)).replace("\r","").replace("\n",""));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.Serial.read(1e3));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"write",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],t.forEach((function(e){if("string"===typeof e){var t=new TextEncoder,a=Object(r.a)(t.encode(e));n.push.apply(n,Object(r.a)(a))}else n.push(e);n.push(10)})),e.next=4,this.Serial.write(n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}()}).call(this,n(54).Buffer)},211:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(16),a=n(3),c=n(6),s=n(24),i=n(25),o=n(45),u=n(76),l=function(){function e(t){var n=this;Object(s.a)(this,e),this.portsChangedCallback=void 0,this.port="",this.ports=[],this.portsChangedCallback=t,this.port="",this.refreshPorts(!0).then((function(){return Object(u.a)("ports_changed",(function(e){var t=e.payload;n.refreshPorts(!0,t)}))}))}return Object(i.a)(e,[{key:"connect",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n,r=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]&&r[1],e.prev=1,e.next=4,Object(o.a)("open",{path:this.ports[t],baudRate:4e6});case 4:this.port=this.ports[t],this.portsChangedCallback(this.ports,t),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(1),n&&alert("".concat(this.ports[t]," - ").concat(e.t0)),e.t0;case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.a)("close",{path:this.port});case 2:this.port="",this.portsChangedCallback(this.ports,-1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"refreshPorts",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(t,n){var r,c,s,i=this;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===n||void 0===n||!n.length){e.next=4;break}e.t0=n,e.next=7;break;case 4:return e.next=6,Object(o.a)("get_ports");case 6:e.t0=e.sent;case 7:if(r=e.t0,this.ports=r,0!==this.ports.length){e.next=11;break}return e.abrupt("return",this.portsChangedCallback(r,-1));case 11:if(-1!==(c=this.ports.findIndex((function(e){return e===i.port})))||!t){e.next=24;break}s=0;case 14:return e.prev=14,e.next=17,this.connect(s);case 17:return e.abrupt("return",this.portsChangedCallback(r,s));case 20:e.prev=20,e.t1=e.catch(14),s++;case 23:if(s<r.length){e.next=14;break}case 24:this.portsChangedCallback(r,c);case 25:case"end":return e.stop()}}),e,this,[[14,20]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestNewPort",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"write",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.a)("write",{data:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"flush",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.a)("flush");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(){var t,n=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.length>0&&void 0!==n[0]?n[0]:1e3,t=[];case 2:return e.next=4,Object(o.a)("read");case 4:t=e.sent;case 5:if(0===t.length){e.next=2;break}case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"readLine",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(){var t,n=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.length>0&&void 0!==n[0]?n[0]:1e3,t=[];case 2:return e.next=4,Object(o.a)("read_line").catch((function(){return[]}));case 4:t=e.sent;case 5:if(0===t.length){e.next=2;break}case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"readSerialCommand",value:function(){var e=Object(c.a)(Object(a.a)().mark((function e(){var t,n,c,s;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.readLine();case 2:if(3===(t=e.sent.filter((function(e){return 13!==e&&10!==e})))[0]){e.next=11;break}return e.t0=console,e.t1=t,e.next=8,this.readLine();case 8:throw e.t2=e.sent,e.t0.log.call(e.t0,e.t1,e.t2),new Error("wrong start byte");case 11:return e.next=13,this.readLine();case 13:if(!((n=e.sent.filter((function(e){return 13!==e&&10!==e}))[0])<16)){e.next=16;break}throw new Error("invalid command");case 16:return e.next=18,this.readLine();case 18:return c=e.sent.filter((function(e){return 13!==e&&10!==e})),s=String.fromCharCode.apply(String,Object(r.a)(c)).split("\t").map((function(e){return parseInt(e)})),e.abrupt("return",{command:n,args:s});case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()},212:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(26),a=n(16),c=n(3),s=n(6),i=n(24),o=n(25),u=n(47),l=n(33),d=n(53),b=function(){function t(e){var n=this;Object(i.a)(this,t),this.buffer=void 0,this.port=void 0,this.writer=void 0,this.bufferWrite=void 0,this.abortController=void 0,this.reader=void 0,this.portsChangedCallback=void 0,this.readLoop=void 0,this.connectedPortIndex=-1,this.ports=[],this.devicesChanged=Object(s.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.refreshPorts();case 2:return e.next=4,e.sent.connectedPortIndex;case 4:return t=e.sent,n.ports.length>0?n.connect(t):n.closePort(),e.t0=n,e.next=9,n.filterPorts();case 9:e.t1=e.sent,e.t2=n.connectedPortIndex,e.t0.portsChangedCallback.call(e.t0,e.t1,e.t2);case 12:case"end":return e.stop()}}),e)}))),this.buffer=[],this.portsChangedCallback=e,navigator.serial.addEventListener("connect",(function(){return n.devicesChanged()})),navigator.serial.addEventListener("disconnect",(function(){return n.devicesChanged()})),this.devicesChanged()}return Object(o.a)(t,[{key:"connect",value:function(){var e=Object(s.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===this.connectedPortIndex){e.next=3;break}return e.next=3,this.closePort();case 3:return e.next=5,this.openPort(this.ports[t]);case 5:return this.connectedPortIndex=t,e.t0=this,e.next=9,this.filterPorts();case 9:e.t1=e.sent,e.t2=this.connectedPortIndex,e.t0.portsChangedCallback.call(e.t0,e.t1,e.t2);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=Object(s.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.filterPorts();case 3:return e.t1=e.sent,e.t2=-1,e.t0.portsChangedCallback.call(e.t0,e.t1,e.t2),e.next=8,this.closePort();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"refreshPorts",value:function(){var e=Object(s.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.serial.getPorts();case 2:if(t=e.sent,this.ports=t,0!==this.ports.length){e.next=8;break}return e.abrupt("return",{status:d.a.disconnect,connectedPortIndex:-1});case 8:return e.abrupt("return",{status:d.a.connect,connectedPortIndex:0});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestNewPort",value:function(){var e=Object(s.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.serial.requestPort({filters:[{usbVendorId:9025,usbProductId:16400}]});case 2:return e.next=4,this.devicesChanged();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"write",value:function(){var t=Object(s.a)(Object(c.a)().mark((function t(n){var r,s,i;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.writer){t.next=2;break}throw new Error("no writer exists for this connection");case 2:if(!l.d){t.next=19;break}if(!(n.length>62)){t.next=12;break}r=0;case 5:if(!(r<n.length)){t.next=11;break}return t.next=8,this.write(n.slice(r,r+62));case 8:r+=62,t.next=5;break;case 11:return t.abrupt("return");case 12:return s=e.from(Object(a.a)(n)),t.next=15,this.writer.write(s);case 15:return t.next=17,Object(l.e)(1);case 17:t.next=23;break;case 19:return i=new e(Object(a.a)(n)),t.next=22,this.writer.write(i);case 22:return t.abrupt("return");case 23:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"flush",value:function(){this.buffer=[]}},{key:"read",value:function(){var e=Object(s.a)(Object(c.a)().mark((function e(){var t,n,r=arguments;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.length>0&&void 0!==r[0]?r[0]:1e3,t=(new Date).getTime();case 2:if(this.buffer.length||!((new Date).getTime()-t<1e4)){e.next=7;break}return e.next=5,Object(l.e)(10);case 5:e.next=2;break;case 7:if(this.buffer.length){e.next=9;break}return e.abrupt("return",[]);case 9:return n=Object(a.a)(this.buffer.splice(0,Math.min(this.buffer.length,2560))),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readSerialCommand",value:function(){var e=Object(s.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("not implemented");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"readLine",value:function(){var e=Object(s.a)(Object(c.a)().mark((function e(){var t,n,r,a,s=arguments;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.length>0&&void 0!==s[0]?s[0]:1e3,n=(new Date).getTime();case 2:if(this.buffer.find((function(e){return 10===e}))||!((new Date).getTime()-n<t)){e.next=7;break}return e.next=5,Object(l.e)(10);case 5:e.next=2;break;case 7:if(this.buffer.length&&this.buffer.find((function(e){return 10===e}))){e.next=9;break}return e.abrupt("return",[]);case 9:return r=this.buffer.findIndex((function(e){return 10===e})),a=this.buffer.slice(0,r-1),this.buffer=this.buffer.slice(r+1),e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"filterPorts",value:function(){var e=Object(s.a)(Object(c.a)().mark((function e(){var t,n,a,s,i,o;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=0,a=Object(r.a)(this.ports),e.prev=3,a.s();case 5:if((s=a.n()).done){e.next=14;break}return i=s.value,e.next=9,i.getInfo();case 9:9025===(o=e.sent).usbVendorId&&16400===o.usbProductId?t.push("Fresh-FreeDeck-Micro-"+n):61936===o.usbVendorId&&16389===o.usbProductId&&t.push("FreeDeck-Pico-"+n),n++;case 12:e.next=5;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),a.e(e.t0);case 19:return e.prev=19,a.f(),e.finish(19);case 22:return e.abrupt("return",t);case 23:case"end":return e.stop()}}),e,this,[[3,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"openPort",value:function(){var e=Object(s.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.open({baudRate:4e6,bufferSize:u.b});case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return");case 8:if(t.writable){e.next=10;break}throw new Error("port is not writable");case 10:if(this.port=t,this.writer=t.writable.getWriter(),this.buffer=[],n=this,this.abortController=new AbortController,this.bufferWrite=new WritableStream({write:function(e){n.buffer=[].concat(Object(a.a)(n.buffer),Object(a.a)(e))}}),t.readable){e.next=18;break}throw new Error("port is not readable");case 18:this.reader=t.readable.pipeTo(this.bufferWrite,{signal:this.abortController.signal});case 19:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"closePort",value:function(){var e=Object(s.a)(Object(c.a)().mark((function e(){var t,n,r,a,s,i,o,u,l,d,b,p,j;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.connectedPortIndex=-1,e.next=3,null===(t=this.writer)||void 0===t?void 0:t.releaseLock();case 3:return null===(n=this.abortController)||void 0===n||n.abort(),e.next=6,null===(r=this.writer)||void 0===r?void 0:r.abort().catch((function(){}));case 6:return e.next=8,null===(a=this.writer)||void 0===a?void 0:a.close().catch((function(){}));case 8:return e.next=10,null===(s=this.writer)||void 0===s?void 0:s.releaseLock();case 10:return e.next=12,null===(i=this.bufferWrite)||void 0===i?void 0:i.abort().catch((function(){}));case 12:return e.next=14,null===(o=this.bufferWrite)||void 0===o?void 0:o.close().catch((function(){}));case 14:return e.next=16,null===(u=this.port)||void 0===u||null===(l=u.readable)||void 0===l?void 0:l.cancel().catch((function(){}));case 16:return e.next=18,null===(d=this.bufferWrite)||void 0===d?void 0:d.abort().catch((function(){}));case 18:return e.next=20,null===(b=this.bufferWrite)||void 0===b?void 0:b.close().catch((function(){}));case 20:return e.next=22,null===(p=this.reader)||void 0===p?void 0:p.catch((function(){}));case 22:null===(j=this.port)||void 0===j||j.close().catch((function(){})),this.buffer=[],this.port=void 0,this.reader=void 0;case 26:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}()}).call(this,n(54).Buffer)},214:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var r=n(26),a=n(215),c=n(129),s=function(t){var n=function(e){for(var t=Object(a.cloneDeep)(e),n=0;n<t.pages.sorted.length;n++){var c,s=t.pages.sorted[n],i=t.pages.byId[s],o=Object(r.a)(i.displayButtons);try{for(o.s();!(c=o.n()).done;){var u=c.value;delete u.display.convertedImage,delete u.display.previewImage}}catch(l){o.e(l)}finally{o.f()}}return t}(t),s=JSON.stringify(n),i=Object(c.a)(s);return e.from(i)}}).call(this,n(54).Buffer)},216:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n(47),a=function(t,n,a,c,s,i,o,u,l,d){var b=e.alloc(r.a);if(b.writeUInt8(t,0),b.writeUInt8(n,1),Math.pow(2,16)-1<d)throw alert("too many pages"),new Error("too many pages");return b.writeUInt16LE(d*t*n+1,2),b.writeUInt8(a,4),b.writeUInt16LE(c,5),b.writeUInt8(s,7),b.writeUInt8(i,8),b.writeUInt8(o,9),b.writeUInt8(u,10),b.writeUInt8(l?1:0,11),b}}).call(this,n(54).Buffer)},218:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return g}));var r=n(26),a=n(3),c=n(6),s=n(0),i=n(98),o=n(84),u=n(93),l=n(109),d=n(79),b=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t,r,c,s){var i,o,u,d,b,p,j,f,h,g,x,m,O,v,y,w=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=w.length>4&&void 0!==w[4]&&w[4],e.next=3,Promise.all([n.e(0),n.e(1)]).then(n.t.bind(null,116,7));case 3:return o=e.sent.default,u=new o(128,i?32:64,"#000000"),e.next=7,o.loadFont("fonts/medium.fnt");case 7:for(d=e.sent,b=0;b<r.length;b++)p=r[b],j=Math.round(p/105*(i?32:64)),s?(u.setPixelColor(16777215,2*b,i?32-j:64-j),u.setPixelColor(16777215,2*b,i?32-j-1:64-j-1),u.setPixelColor(16777215,2*b+1,i?32-j:64-j),u.setPixelColor(16777215,2*b+1,i?32-j-1:64-j-1)):(f=new o(2,j,"#ffffff"),u.composite(f,2*b,i?32-j:64-j));for((h=new o(128,i?32:64)).print(d,4,i?10:40,"".concat(t,": ").concat(r[r.length-1].toFixed(1)).concat(c)),g=0;g<u.getWidth();g++)for(x=0;x<u.getHeight();x++)m=o.intToRGBA(h.getPixelColor(g,x)),m.r>=128&&m.g>=128&&m.b>=128&&(O=o.intToRGBA(u.getPixelColor(g,x)),v=O.r>=128&&O.g>=128&&O.b>=128,u.setPixelColor(v?0:16777215,g,x));return e.next=14,u.getBufferAsync("image/bmp");case 14:return y=e.sent,e.next=17,Object(l.a)(y,128,i?32:64);case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),p=function(){var t=Object(c.a)(Object(a.a)().mark((function t(n,r,c){var s,i,o,l,d,b;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j(n,c,!0);case 2:return s=t.sent,t.next=5,j(r,c,!0);case 5:return i=t.sent,o=s.readUInt32LE(10),l=s.slice(o),d=i.slice(o),b=e.concat([e.from(Object(u.a)()),l,d]),t.abrupt("return",b);case 11:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),j=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t,n){var r,c=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>2&&void 0!==c[2]&&c[2],"cpu_temp"!==t){e.next=5;break}return e.next=4,Object(d.b)({font:"fonts/medium.fnt",position:"bottom",text:"CPU: ".concat(n.cpuTemp[n.cpuTemp.length-1].toFixed(1),"C")},128,r?32:64);case 4:case 8:case 12:case 16:case 20:case 24:return e.abrupt("return",e.sent);case 5:if("gpu_temp"!==t){e.next=9;break}return e.next=8,Object(d.b)({font:"fonts/medium.fnt",position:"bottom",text:"GPU: ".concat(n.gpuTemp[n.gpuTemp.length-1].toFixed(1),"C")},128,r?32:64);case 9:if("cpu_temp_graph"!==t){e.next=13;break}return e.next=12,b("CPU",n.cpuTemp,"C",!1,r);case 13:if("gpu_temp_graph"!==t){e.next=17;break}return e.next=16,b("GPU",n.gpuTemp,"C",!1,r);case 17:if("cpu_temp_line"!==t){e.next=21;break}return e.next=20,b("CPU",n.cpuTemp,"C",!0,r);case 21:if("gpu_temp_line"!==t){e.next=25;break}return e.next=24,b("GPU",n.gpuTemp,"C",!0,r);case 25:return e.abrupt("return",Object(o.a)());case 26:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t,n){var r;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.live){e.next=2;break}return e.abrupt("return");case 2:if(!("none"!==t.live.top&&"none"===t.live.bottom||"none"===t.live.top&&"none"!==t.live.bottom)){e.next=9;break}return r="none"===t.live.top?t.live.bottom:t.live.top,e.next=6,j(r,n);case 6:case 12:return e.abrupt("return",e.sent);case 9:if("none"===t.live.top||"none"===t.live.bottom){e.next=13;break}return e.next=12,p(t.live.top,t.live.bottom,n);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t,n,c){var s,i,o,u,l,d,b,p,j,h;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(i=c.current.deck)&&!i.dontSwitchPage&&null!==i.currentPage){e.next=3;break}return e.abrupt("return");case 3:if(o=t.pages.sorted[i.currentPage],u=t.pages.byId[o]){e.next=7;break}return e.abrupt("return");case 7:if(null!==(s=n.serialApi)&&void 0!==s&&s.connected){e.next=9;break}return e.abrupt("return");case 9:l=0,d=Object(r.a)(u.displayButtons),e.prev=11,d.s();case 13:if((b=d.n()).done){e.next=24;break}return p=b.value,e.next=17,f(p,n.system);case 17:if(!(j=e.sent)){e.next=21;break}return e.next=21,null===(h=n.serialApi)||void 0===h?void 0:h.sendImageToScreen(j,l).catch((function(){}));case 21:l++;case 22:e.next=13;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(11),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[11,26,29,32]])})));return function(t,n,r){return e.apply(this,arguments)}}(),g=function(e,t,n){Object(s.useEffect)((function(){if(window.__TAURI_IPC__){var r,s=!1,o=function(){var o=Object(c.a)(Object(a.a)().mark((function o(){return Object(a.a)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!s){o.next=2;break}return o.abrupt("return");case 2:setTimeout((function(){h(e,t,n)})),r=i.setInterval(Object(c.a)(Object(a.a)().mark((function r(){return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:h(e,t,n);case 1:case"end":return r.stop()}}),r)}))),1e3);case 4:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}();return o(),function(){s=!0,r&&i.clearInterval(r)}}}),[e,t.serialApi,t.deck])}}).call(this,n(54).Buffer)},232:function(e,t,n){},33:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return i}));var r=function(e,t){return null!==t&&void 0!==t&&t.name?t.name:e.slice(-4)},a=function(e,t){return null!==t&&void 0!==t&&t.name?t.name:e.slice(-4)},c=-1!==navigator.userAgent.indexOf("Mac OS X");function s(e){return new Promise((function(t){return setTimeout((function(){try{t()}catch(e){console.log(e)}}),e)}))}function i(e,t){for(var n=e.split("."),r=t.split("."),a=0;a<Math.max(n.length,r.length);a++){var c=parseInt(n[a]||"0"),s=parseInt(r[a]||"0");if(c<s)return-1;if(c>s)return 1}return 0}},337:function(e,t,n){"use strict";n.r(t),n.d(t,"client",(function(){return he}));var r,a,c,s,i,o,u,l=n(3),d=n(6),b=(n(232),n(39)),p=n(364),j=n(128),f=n.n(j),h=n(9),g=n(155),x=n(0),m=n(382),O=n(220),v=n(55),y=n(359),w=n(349),k=n(385),I=n(77),C=n.n(I),N=n(13),P=n(14),S=n(1),A=function(e){var t=e.className,n=e.children,r=e.title,a=e.center,c=void 0!==a&&a;return Object(S.jsxs)("div",{className:Object(P.a)("p-6 rounded-xl bg-gradient-to-b bg-gray-800 shadow-2xl",t),children:[Object(S.jsx)("div",{className:Object(P.a)("text-2xl","mb-8",c&&"flex justify-center"),children:r}),Object(S.jsx)("div",{children:n})]})},D=n(16),B=n(4),F=n(64),T=n.n(F),E=n(386),q=n(83),U=n(78),L=n(8),W=n(80),R={},V=Object(b.gql)(r||(r=Object(W.a)(["\n    fragment PageFields on Page {\n  id\n  data\n  width\n  height\n  createdBy {\n    id\n    avatar\n    displayName\n  }\n  forkedFrom {\n    id\n  }\n  upvotes\n  tags\n}\n    "])));Object(b.gql)(a||(a=Object(W.a)(["\n    query searchPages($searchTerm: String!, $before: String, $after: String) {\n  searchPages(\n    searchTerm: $searchTerm\n    pagination: {before: $before, after: $after}\n  ) {\n    hasNext\n    pages {\n      ...PageFields\n    }\n  }\n}\n    ",""])),V);var H=Object(b.gql)(c||(c=Object(W.a)(["\n    query me {\n  user {\n    id\n    avatar\n    displayName\n  }\n}\n    "])));function G(e){var t=Object(B.a)(Object(B.a)({},R),e);return b.useQuery(H,t)}Object(b.gql)(s||(s=Object(W.a)(["\n    query myPages {\n  myPages {\n    ...PageFields\n  }\n}\n    ",""])),V);var _=Object(b.gql)(i||(i=Object(W.a)(["\n    query page($id: String!) {\n  page(id: $id) {\n    ...PageFields\n  }\n}\n    ",""])),V);Object(b.gql)(o||(o=Object(W.a)(["\n    mutation pageCreate($input: PageCreateInput!) {\n  pageCreate(input: $input)\n}\n    "])));Object(b.gql)(u||(u=Object(W.a)(["\n    mutation pageUpdate($input: PageUpdateInput!) {\n  pageUpdate(input: $input) {\n    id\n  }\n}\n    "])));var M,J=n(59),z=n(136),K=function(e){return setTimeout((function(){return localStorage.setItem("config",JSON.stringify(e))})),Object(B.a)({},e)},Q=function(){var e=Object(d.a)(Object(l.a)().mark((function e(t,n,r){var a,c;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r>n)){e.next=14;break}a=r-n,c=0;case 3:if(!(c<a)){e.next=12;break}return e.t0=t.displayButtons,e.next=7,Object(U.b)();case 7:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 9:c++,e.next=3;break;case 12:e.next=15;break;case 14:r<n&&(t.displayButtons=t.displayButtons.slice(0,r));case 15:return e.abrupt("return",Object(B.a)({},t));case 16:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),X=function(){var e=Object(d.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(null,71,3));case 2:return e.t0=e.sent.configFileVersion,e.t1=6e4,e.t2={byId:{},sorted:[]},e.t3={byId:{},sorted:[]},e.next=8,Object(q.a)();case 8:return e.t4=e.sent,e.t5={bottom:"none",top:"none"},e.t6={display:e.t4,live:e.t5},e.abrupt("return",{configVersion:e.t0,brightness:100,screenSaverTimeout:e.t1,oledSpeed:50,oledDelay:2,preChargePeriod:17,clockFreq:15,clockDiv:2,saveJson:!0,width:3,height:2,pages:e.t2,collections:e.t3,defaultBackDisplay:e.t6});case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y={setBrightness:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.brightness=t,n.abrupt("return",K(e));case 2:case"end":return n.stop()}}),n)})))()},setScreenSaver:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.screenSaverTimeout=t,n.abrupt("return",K(e));case 2:case"end":return n.stop()}}),n)})))()},setOledSpeed:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.oledSpeed=t,n.abrupt("return",K(e));case 2:case"end":return n.stop()}}),n)})))()},setOledDelay:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.oledDelay=t,n.abrupt("return",K(e));case 2:case"end":return n.stop()}}),n)})))()},setPreChargePeriod:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preChargePeriod=t,n.abrupt("return",K(e));case 2:case"end":return n.stop()}}),n)})))()},setClockFreq:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.clockFreq=t,n.abrupt("return",K(e));case 2:case"end":return n.stop()}}),n)})))()},setClockDiv:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.clockDiv=t,n.abrupt("return",K(e));case 2:case"end":return n.stop()}}),n)})))()},setSaveJson:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.saveJson=t,n.abrupt("return",K(e));case 2:case"end":return n.stop()}}),n)})))()},setDimensions:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r,a,c,s,i,o,u;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c=null!==(r=t.width)&&void 0!==r?r:e.width,s=null!==(a=t.height)&&void 0!==a?a:e.height,i=0;case 3:if(!(i<e.pages.sorted.length)){n.next=12;break}return o=e.pages.sorted[i],u=e.pages.byId[o],n.next=8,Q(u,e.width*e.height,c*s);case 8:e.pages.byId[o]=n.sent;case 9:i++,n.next=3;break;case 12:return e.width=c,e.height=s,n.abrupt("return",K(e));case 15:case"end":return n.stop()}}),n)})))()},addPage:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r,a,c,s,i,o;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(U.c)(e.width*e.height,t.previousPage);case 2:return r=n.sent,a=Object(E.a)(),e.pages.byId[a]=r,e.pages.sorted.push(a),c=t.previousPage,s=t.previousDisplay,i=t.secondary,o=void 0!==i&&i,void 0!==c&&void 0!==s&&void 0!==o?e.pages.byId[c].displayButtons[s].button[o?"secondary":"primary"].values[L.b.changePage]=a:1===e.pages.sorted.length&&(e.pages.byId[a].name="Start"),n.abrupt("return",K(e));case 9:case"end":return n.stop()}}),n)})))()},setStartPage:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.pageId,e.pages.sorted=Object(D.a)(e.pages.sorted.filter((function(e){return e!==r}))),e.pages.sorted.unshift(r),n.abrupt("return",K(e));case 4:case"end":return n.stop()}}),n)})))()},downloadPage:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r,a,c,s,i,o,u;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=t.id,n.next=3,null===he||void 0===he?void 0:he.query({query:_,variables:{id:c}});case 3:if(s=n.sent){n.next=7;break}return window.advancedAlert("Error","There was an error receiving this page"),n.abrupt("return",Object(B.a)({},e));case 7:if(!(i=z.b.validate(null===s||void 0===s||null===(r=s.data.page)||void 0===r?void 0:r.data,{stripUnknown:!0})).error){n.next=11;break}return window.advancedAlert("This page is not compatible",i.error.message),n.abrupt("return",Object(B.a)({},e));case 11:return o=i.value,n.next=14,Q(Object(B.a)(Object(B.a)({},T()(o)),{},{publishData:{createdBy:s.data.page.createdBy.id,forkedFrom:null===(a=s.data.page.forkedFrom)||void 0===a?void 0:a.id}}),o.displayButtons.length,e.width*e.height);case 14:e.pages.byId[c]=n.sent,u=0;case 16:if(!(u<e.pages.byId[c].displayButtons.length)){n.next=27;break}if(!e.pages.byId[c].displayButtons[u].display.isGeneratedFromDefaultBackImage){n.next=21;break}e.pages.byId[c].displayButtons[u].display=T()(e.defaultBackDisplay.display),n.next=24;break;case 21:return n.next=23,Object(J.b)(e.pages.byId[c].displayButtons[u].display);case 23:e.pages.byId[c].displayButtons[u].display=n.sent;case 24:u++,n.next=16;break;case 27:return!!e.pages.sorted.find((function(e){return e===c}))||e.pages.sorted.push(c),n.abrupt("return",K(e));case 30:case"end":return n.stop()}}),n)})))()},renamePage:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r,a;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.pageId,a=t.name,e.pages.byId[r].name=a,n.abrupt("return",K(e));case 3:case"end":return n.stop()}}),n)})))()},changePageWindowName:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r,a;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.pageId,a=t.windowName,e.pages.byId[r].windowName=a,n.abrupt("return",K(e));case 3:case"end":return n.stop()}}),n)})))()},setUsePageName:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r,a;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.pageId,a=t.value,e.pages.byId[r].usePageNameAsWindowName=a,n.abrupt("return",K(e));case 3:case"end":return n.stop()}}),n)})))()},switchPages:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r,a,c,s,i,o,u;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.pageAId,a=t.pageBId,c=e.pages.sorted.findIndex((function(e){return e===r})),s=e.pages.sorted.findIndex((function(e){return e===a})),e.pages.byId[r].isInCollection===e.pages.byId[a].isInCollection&&e.pages.byId[r].isInCollection&&(i=e.pages.byId[r].isInCollection,o=e.collections.byId[i].pages.findIndex((function(e){return e===r})),u=e.collections.byId[i].pages.findIndex((function(e){return e===a})),e.collections.byId[i].pages[o]=a,e.collections.byId[i].pages[u]=r),e.pages.sorted[c]=a,e.pages.sorted[s]=r,n.abrupt("return",K(e));case 7:case"end":return n.stop()}}),n)})))()},deleteDisplayButton:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r,a;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.pageId,a=t.buttonIndex,n.next=3,Object(U.b)();case 3:return e.pages.byId[r].displayButtons[a]=n.sent,n.abrupt("return",K(e));case 5:case"end":return n.stop()}}),n)})))()},deletePage:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.pages.byId[t].isInCollection,e.pages.sorted=Object(D.a)(e.pages.sorted.filter((function(e){return e!==t}))),delete e.pages.byId[t],r&&(e.collections.byId[r].pages=Object(D.a)(e.collections.byId[r].pages.filter((function(e){return e!==t})))),Object.entries(e.pages.byId).forEach((function(n){var r=Object(h.a)(n,2),a=r[0];r[1].displayButtons.forEach((function(n,r){n.button.primary.values[L.b.changePage]===t&&(e.pages.byId[a].displayButtons[r].button.primary.values[L.b.changePage]=""),n.button.secondary.values[L.b.changePage]===t&&(e.pages.byId[a].displayButtons[r].button.secondary.values[L.b.changePage]="")}))})),n.abrupt("return",K(e));case 6:case"end":return n.stop()}}),n)})))()},setPagePublished:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r,a,c,s,i;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.pageId,a=t.forkedId,he){n.next=4;break}return window.advancedAlert("Problem with connection to server","We could not reach the FreeDeck Hub server"),n.abrupt("return",Object(B.a)({},e));case 4:if(!a){n.next=15;break}return(c=T()(e)).pages.sorted=Object(D.a)(e.pages.sorted.map((function(e){return e===a?r:e}))),delete c.pages.byId[a],n.t0=K,n.next=11,Y.downloadPage(Object(B.a)({},c),{id:r});case 11:return n.t1=n.sent,n.abrupt("return",(0,n.t0)(n.t1));case 15:return n.next=17,null===he||void 0===he?void 0:he.query({query:_,variables:{id:r},fetchPolicy:"network-only"});case 17:return i=n.sent,e.pages.byId[r]=Object(B.a)(Object(B.a)({},T()(i.data.page.data)),{},{publishData:{createdBy:i.data.page.createdBy.id,forkedFrom:null===(s=i.data.page.forkedFrom)||void 0===s?void 0:s.id}}),n.abrupt("return",K(e));case 20:case"end":return n.stop()}}),n)})))()},setPageCollection:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r,a,c,s;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.pageId,a=t.collectionId,c=e.collections.byId[a],e.pages.byId[r].isInCollection?(s=e.pages.byId[r].isInCollection,e.collections.byId[s].pages=Object(D.a)(e.collections.byId[s].pages.filter((function(e){return e!==r}))),e.pages.byId[r].isInCollection=void 0):(0!==c.pages.length||c.windowName||(c.windowName=e.pages.byId[r].windowName),0!==c.pages.length||c.name||(c.name=e.pages.byId[r].name),c.pages.push(r),e.pages.byId[r].isInCollection=a),n.abrupt("return",K(e));case 4:case"end":return n.stop()}}),n)})))()},createCollection:function(e){return Object(d.a)(Object(l.a)().mark((function t(){var n;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(E.a)(),e.collections.byId[n]={pages:[],useCollectionNameAsWindowName:!0},e.collections.sorted.push(n),t.abrupt("return",K(e));case 4:case"end":return t.stop()}}),t)})))()},deleteCollection:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.collectionId,e.collections.byId[r].pages.forEach((function(t){return e.pages.byId[t].isInCollection=void 0})),delete e.collections.byId[r],e.collections.sorted=Object(D.a)(e.collections.sorted.filter((function(e){return e!==r}))),n.abrupt("return",K(e));case 5:case"end":return n.stop()}}),n)})))()},setUseCollectionName:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r,a;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.collectionId,a=t.value,e.collections.byId[r].useCollectionNameAsWindowName=a,n.abrupt("return",K(e));case 3:case"end":return n.stop()}}),n)})))()},renameCollection:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r,a;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.collectionId,a=t.name,e.collections.byId[r].name=a,n.abrupt("return",K(e));case 3:case"end":return n.stop()}}),n)})))()},changeCollectionWindowName:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r,a;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.collectionId,a=t.windowName,e.collections.byId[r].windowName=a,n.abrupt("return",K(e));case 3:case"end":return n.stop()}}),n)})))()},setButtonSettings:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r,a,c,s;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.pageId,a=t.buttonIndex,c=t.priOrSec,s=t.buttonSettings,e.pages.byId[r].displayButtons[a].button[c]=s,n.abrupt("return",K(e));case 3:case"end":return n.stop()}}),n)})))()},setLeavePage:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r,a,c,s,i;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.pageId,a=t.buttonIndex,c=t.targetPageId,s=t.enabled,i=t.primary,e.pages.byId[r].displayButtons[a].button[i?"primary":"secondary"].leavePage={pageId:c,enabled:s},n.abrupt("return",K(e));case 3:case"end":return n.stop()}}),n)})))()},setDisplaySettings:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r,a,c;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.pageId,a=t.buttonIndex,c=t.displaySettings,"dbd"!==r){n.next=15;break}return e.defaultBackDisplay.display=Object(B.a)({},c),n.next=5,Object(J.b)(e.defaultBackDisplay.display);case 5:return e.defaultBackDisplay.display=n.sent,e.defaultBackDisplay.display.isGeneratedFromDefaultBackImage=!0,localStorage.setItem("defaultBackDisplay",JSON.stringify(e.defaultBackDisplay)),n.t0=K,n.next=11,Y.updateAllDefaultBackImages(e);case 11:return n.t1=n.sent,n.abrupt("return",(0,n.t0)(n.t1));case 15:return e.pages.byId[r].displayButtons[a].display=Object(B.a)(Object(B.a)({},c),{},{isGeneratedFromDefaultBackImage:!1}),n.next=18,Object(J.b)(e.pages.byId[r].displayButtons[a].display);case 18:e.pages.byId[r].displayButtons[a].display=n.sent;case 19:return n.abrupt("return",K(e));case 20:case"end":return n.stop()}}),n)})))()},setOriginalImage:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r,a,c;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.buttonIndex,a=t.pageId,c=t.originalImage,"dbd"!==a){n.next=8;break}return e.defaultBackDisplay.display.originalImage=c,n.next=5,Object(J.b)(e.defaultBackDisplay.display);case 5:e.defaultBackDisplay.display=n.sent,n.next=12;break;case 8:return e.pages.byId[a].displayButtons[r].display.originalImage=c,n.next=11,Object(J.b)(e.pages.byId[a].displayButtons[r].display);case 11:e.pages.byId[a].displayButtons[r].display=n.sent;case 12:if("dbd"!==a){n.next=20;break}return n.t0=K,n.t1=T.a,n.next=17,Y.updateAllDefaultBackImages(e);case 17:return n.t2=n.sent,n.t3=(0,n.t1)(n.t2),n.abrupt("return",(0,n.t0)(n.t3));case 20:return n.abrupt("return",K(e));case 21:case"end":return n.stop()}}),n)})))()},deleteImage:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r,a;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.buttonIndex,a=t.pageId,delete e.pages.byId[a].displayButtons[r].display.originalImage,n.next=4,Object(J.b)(e.pages.byId[a].displayButtons[r].display);case 4:return e.pages.byId[a].displayButtons[r].display=n.sent,n.abrupt("return",K(e));case 6:case"end":return n.stop()}}),n)})))()},switchButtons:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r,a,c,s,i;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.pageAId,a=t.pageBId,c=t.buttonAIndex,s=t.buttonBIndex,i=e.pages.byId[r].displayButtons[c],e.pages.byId[r].displayButtons[c]=T()(e.pages.byId[a].displayButtons[s]),e.pages.byId[a].displayButtons[s]=T()(i),n.abrupt("return",K(e));case 5:case"end":return n.stop()}}),n)})))()},copyButton:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r,a,c,s;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.pageSrcId,a=t.pageDestId,c=t.buttonSrcIndex,s=t.buttonDestIndex,e.pages.byId[a].displayButtons[s]=T()(e.pages.byId[r].displayButtons[c]),n.abrupt("return",K(e));case 3:case"end":return n.stop()}}),n)})))()},updateAllDefaultBackImages:function(e){return Object(d.a)(Object(l.a)().mark((function t(){return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object.entries(e.pages.byId).forEach((function(t){var n=Object(h.a)(t,2),r=n[0];n[1].displayButtons.forEach((function(t,n){t.display.isGeneratedFromDefaultBackImage&&(e.pages.byId[r].displayButtons[n].display=T()(e.defaultBackDisplay.display),e.pages.byId[r].displayButtons[n].live=T()(e.defaultBackDisplay.live))}))})),t.abrupt("return",K(e));case 2:case"end":return t.stop()}}),t)})))()},makeDefaultBackButton:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r,a;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.buttonIndex,a=t.pageId,e.pages.byId[a].displayButtons[r].display=e.defaultBackDisplay.display,e.pages.byId[a].displayButtons[r].live=e.defaultBackDisplay.live,n.abrupt("return",K(e));case 4:case"end":return n.stop()}}),n)})))()},resetDefaultBackButton:function(e){return Object(d.a)(Object(l.a)().mark((function t(){return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(q.a)("dbd");case 2:return e.defaultBackDisplay.display=t.sent,t.abrupt("return",K(e));case 4:case"end":return t.stop()}}),t)})))()},setLive:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r,a,c,s;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.buttonIndex,a=t.mode,c=t.pageId,s=t.position,"dbd"!==c){n.next=10;break}return e.defaultBackDisplay.live[s]=a,n.t0=T.a,n.next=6,Y.updateAllDefaultBackImages(e);case 6:n.t1=n.sent,e=(0,n.t0)(n.t1),n.next=11;break;case 10:e.pages.byId[c].displayButtons[r].live[s]=a;case 11:return n.abrupt("return",K(e));case 12:case"end":return n.stop()}}),n)})))()},setState:function(e,t){return Object(d.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",K(t));case 1:case"end":return e.stop()}}),e)})))()}},Z=Object(x.createContext)({}),$=Object(x.createContext)(Y),ee=function(e){var t=e.className,n=e.children,r=e.hint;return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:Object(P.a)("text-xl mr-4",t),children:n}),r&&Object(S.jsx)("div",{className:"text-sm text-gray-300 ",children:r})]})},te=function(e){var t=e.className,n=e.children;return Object(S.jsx)("div",{className:Object(P.a)("text-xl font-bold",t),children:n})},ne=function(e){var t=e.className,n=e.children,r=e.onChange,a=e.onEnter,c=e.value,s=e.placeholder,i=e.disabled;return Object(S.jsx)("input",{type:"text",disabled:i,placeholder:s,className:Object(P.a)("text-xl appearance-none py-1 px-2 placeholder-gray-100 resize-none rounded-md","bg-gray-50 bg-opacity-0 focus:bg-gray-700 focus:bg-opacity-100",i?"text-gray-50":"text-white",t),onChange:function(e){r(e.currentTarget.value)},onKeyDown:function(e){return"Enter"===e.key&&a&&a()},value:c,children:n})},re=n(384),ae=n(45),ce=n(210),se=function(){var e=Object(d.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{autoPageSwitcherEnabled:!0,ctrlDown:!1,serialApi:navigator.serial||window.__TAURI_IPC__?new ce.a:void 0,devLog:{},availablePorts:[],connectedPortIndex:-1,hasJson:!0,alert:{isOpen:!1,text:"",title:""},confirm:{isOpen:!1,text:"",title:""},deck:{currentPage:null,dontSwitchPage:!1},system:{cpuTemp:[0],gpuTemp:[0]}});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(e,t){var n=t.gpuTemp,r=t.cpuTemp;return e.system.cpuTemp.length>=64&&e.system.cpuTemp.shift(),e.system.cpuTemp.push(r),e.system.gpuTemp.length>=64&&e.system.gpuTemp.shift(),e.system.gpuTemp.push(n),Object(B.a)({},e)},oe={setCtrl:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(B.a)(Object(B.a)({},e),{},{ctrlDown:t}));case 1:case"end":return n.stop()}}),n)})))()},setDeck:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r,a;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.currentPage,a=t.dontSwitchPage,n.abrupt("return",Object(B.a)(Object(B.a)({},e),{},{deck:{currentPage:r,dontSwitchPage:a}}));case 2:case"end":return n.stop()}}),n)})))()},setTemps:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",ie(e,t));case 1:case"end":return n.stop()}}),n)})))()},toggleAutoPageSwitcher:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=void 0===t?!e.autoPageSwitcherEnabled:t,setTimeout((function(){return localStorage.setItem("autoPageSwitcherEnabled",r.toString())})),Object(ae.a)("set_aps_state",{apsState:r}),n.abrupt("return",Object(B.a)(Object(B.a)({},e),{},{autoPageSwitcherEnabled:r}));case 4:case"end":return n.stop()}}),n)})))()},setDevLog:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){var r,a,c;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.path,a=t.data,(c=Object(B.a)({},e.devLog))[r]=a,n.abrupt("return",Object(B.a)(Object(B.a)({},e),{},{devLog:c}));case 4:case"end":return n.stop()}}),n)})))()},setHasJson:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(B.a)(Object(B.a)({},e),{},{hasJson:t}));case 1:case"end":return n.stop()}}),n)})))()},closeAlert:function(e){return Object(d.a)(Object(l.a)().mark((function t(){return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(B.a)(Object(B.a)({},e),{},{alert:Object(B.a)(Object(B.a)({},e.alert),{},{isOpen:!1})}));case 1:case"end":return t.stop()}}),t)})))()},openAlert:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(B.a)(Object(B.a)({},e),{},{alert:Object(B.a)(Object(B.a)({},t),{},{isOpen:!0})}));case 1:case"end":return n.stop()}}),n)})))()},closeConfirm:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.value||!e.confirm.onAccept){n.next=5;break}return n.next=3,e.confirm.onAccept();case 3:n.next=8;break;case 5:if(t.value||!e.confirm.onAbort){n.next=8;break}return n.next=8,e.confirm.onAbort();case 8:return e.confirm.onAccept=void 0,e.confirm.onAbort=void 0,n.abrupt("return",Object(B.a)(Object(B.a)({},e),{},{confirm:Object(B.a)(Object(B.a)({},e.confirm),{},{isOpen:!1})}));case 11:case"end":return n.stop()}}),n)})))()},openConfirm:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(B.a)(Object(B.a)({},e),{},{confirm:Object(B.a)(Object(B.a)({},t),{},{isOpen:!0})}));case 1:case"end":return n.stop()}}),n)})))()},setAvailablePorts:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(B.a)(Object(B.a)({},e),{},{availablePorts:t}));case 1:case"end":return n.stop()}}),n)})))()},setConnectedPortIndex:function(e,t){return Object(d.a)(Object(l.a)().mark((function n(){return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(B.a)(Object(B.a)({},e),{},{connectedPortIndex:t}));case 1:case"end":return n.stop()}}),n)})))()}},ue=Object(x.createContext)({}),le=Object(x.createContext)(oe),de=function(e){var t=e.children,n=Object(x.useContext)(ue).ctrlDown;return Object(S.jsx)(S.Fragment,{children:n?t[1]:t[0]})},be=n(344),pe=n(341),je=n(342),fe={Ctrl:{hid:224,js:"ControlLeft"},Shift:{hid:225,js:"ShiftLeft"},Alt:{hid:226,js:"AltLeft"},Win:{hid:227,js:"MetaLeft"},CtrlRight:{hid:228,js:"ControlRight"},ShiftRight:{hid:229,js:"ShiftRight"},AltGr:{hid:230,js:"AltRight"},WinRight:{hid:231,js:"MetaRight"},"#1":{hid:30,js:"Digit1"},"#2":{hid:31,js:"Digit2"},"#3":{hid:32,js:"Digit3"},"#4":{hid:33,js:"Digit4"},"#5":{hid:34,js:"Digit5"},"#6":{hid:35,js:"Digit6"},"#7":{hid:36,js:"Digit7"},"#8":{hid:37,js:"Digit8"},"#9":{hid:38,js:"Digit9"},"#0":{hid:39,js:"Digit0"},F1:{hid:58,js:"F1"},F2:{hid:59,js:"F2"},F3:{hid:60,js:"F3"},F4:{hid:61,js:"F4"},F5:{hid:62,js:"F5"},F6:{hid:63,js:"F6"},F7:{hid:64,js:"F7"},F8:{hid:65,js:"F8"},F9:{hid:66,js:"F9"},F10:{hid:67,js:"F10"},F11:{hid:68,js:"F11"},F12:{hid:69,js:"F12"},F13:{hid:104,js:"F13"},F14:{hid:105,js:"F14"},F15:{hid:106,js:"F15"},F16:{hid:107,js:"F16"},F17:{hid:108,js:"F17"},F18:{hid:109,js:"F18"},F19:{hid:110,js:"F19"},F20:{hid:111,js:"F20"},F21:{hid:112,js:"F21"},F22:{hid:113,js:"F22"},F23:{hid:114,js:"F23"},F24:{hid:115,js:"F24"},A:{hid:4,js:"KeyA"},B:{hid:5,js:"KeyB"},C:{hid:6,js:"KeyC"},D:{hid:7,js:"KeyD"},E:{hid:8,js:"KeyE"},F:{hid:9,js:"KeyF"},G:{hid:10,js:"KeyG"},H:{hid:11,js:"KeyH"},I:{hid:12,js:"KeyI"},J:{hid:13,js:"KeyJ"},K:{hid:14,js:"KeyK"},L:{hid:15,js:"KeyL"},M:{hid:16,js:"KeyM"},N:{hid:17,js:"KeyN"},O:{hid:18,js:"KeyO"},P:{hid:19,js:"KeyP"},Q:{hid:20,js:"KeyQ"},R:{hid:21,js:"KeyR"},S:{hid:22,js:"KeyS"},T:{hid:23,js:"KeyT"},U:{hid:24,js:"KeyU"},V:{hid:25,js:"KeyV"},W:{hid:26,js:"KeyW"},X:{hid:27,js:"KeyX"},Y:{hid:28,js:"KeyY"},Z:{hid:29,js:"KeyZ"},Enter:{hid:40,js:"Enter"},Esc:{hid:41,js:"Escape"},BackSpace:{hid:42,js:"Backspace"},Tab:{hid:43,js:"Tab"},Space:{hid:44,js:"Space"},Minus:{hid:45,js:"Minus"},Equal:{hid:46,js:"Equal"},"Left Brace":{hid:47,js:"BracketLeft"},"Right Brace":{hid:48,js:"BracketRight"},Backslash:{hid:49,js:"Backslash"},NonUSBackslash:{hid:50,js:"IntlBackslash"},Semicolon:{hid:51,js:"Semicolon"},Quote:{hid:52,js:"Quote"},Tilde:{hid:53,js:"Backquote"},Comma:{hid:54,js:"Comma"},Period:{hid:55,js:"Period"},Slash:{hid:56,js:"Slash"},"Caps Lock":{hid:57,js:"CapsLock"},Print:{hid:70,js:"Print"},"Scroll Lock":{hid:71,js:"ScrollLock"},Pause:{hid:72,js:"Pause"},Insert:{hid:73,js:"Insert"},Home:{hid:74,js:"Home"},"Page Up":{hid:75,js:"PageUp"},Delete:{hid:76,js:"Delete"},End:{hid:77,js:"End"},"Page Down":{hid:78,js:"PageDown"},"Right Arrow":{hid:79,js:"ArrowRight"},"Left Arrow":{hid:80,js:"ArrowLeft"},"Down Arrow":{hid:81,js:"ArrowDown"},"Up Arrow":{hid:82,js:"ArrowUp"},"Num Lock":{hid:83,js:"NumLock"},"Num Divide":{hid:84,js:"NumpadDivide"},"Num Multiply":{hid:85,js:"NumpadMultiply"},"Num Subtract":{hid:86,js:"NumpadSubtract"},"Num Add":{hid:87,js:"NumpadAdd"},"Num Enter":{hid:88,js:"NumpadEnter"},"Num 1":{hid:89,js:"Numpad1"},"Num 2":{hid:90,js:"Numpad2"},"Num 3":{hid:91,js:"Numpad3"},"Num 4":{hid:92,js:"Numpad4"},"Num 5":{hid:93,js:"Numpad5"},"Num 6":{hid:94,js:"Numpad6"},"Num 7":{hid:95,js:"Numpad7"},"Num 8":{hid:96,js:"Numpad8"},"Num 9":{hid:97,js:"Numpad9"},"Num 0":{hid:98,js:"Numpad0"},"Num Dot":{hid:99,js:"NumpadDecimal"}};!function(e){e[e.Power=48]="Power",e[e.Sleep=50]="Sleep",e[e.Record=178]="Record",e[e["Fast Forward"]=179]="Fast Forward",e[e.Rewind=180]="Rewind",e[e.Next=181]="Next",e[e.Previous=182]="Previous",e[e.Stop=183]="Stop",e[e["Play/Pause"]=205]="Play/Pause",e[e.Pause=176]="Pause",e[e["Vol. Mute"]=226]="Vol. Mute",e[e["Vol. Up"]=233]="Vol. Up",e[e["Vol. Down"]=234]="Vol. Down"}(M||(M={}));var he,ge=Object.keys(M).filter((function(e){return!parseInt(e)})),xe=function(e){var t=!navigator.keyboard,n=Object(x.useState)([]),r=Object(h.a)(n,2),a=r[0],c=r[1];return Object(x.useEffect)((function(){e&&e.length?t?c(e.map((function(e){return Object.keys(fe).find((function(t){var n;return(null===(n=fe[t])||void 0===n?void 0:n.hid)===e}))||""}))):navigator.keyboard.getLayoutMap().then((function(t){var n=e.map((function(e){var n,r=Object.keys(fe).find((function(t){var n;return(null===(n=fe[t])||void 0===n?void 0:n.hid)===e}))||"",a=null===(n=fe[r])||void 0===n?void 0:n.js,c=t.get(a);return null!==c&&void 0!==c?c:r}));c(n)})):c([])}),[e]),a},me=n(33),Oe=function(e){var t,n=e.className,r=e.button,a=e.hideChangePage,c=void 0!==a&&a,s=Object(x.useContext)(Z).pages,i=xe(r.values[L.b.hotkeys]),o="flex px-2 justify-center items-center gap-1 align-middle text-base shadow-lg rounded-md overflow-hidden";return Object(S.jsxs)("div",{className:Object(P.a)("flex justify-center whitespace-nowrap",n),children:[r.mode===L.b.changePage&&!c&&!!r.values[L.b.changePage]&&Object(S.jsxs)("div",{className:Object(P.a)(o,"bg-gray-500"),children:[Object(S.jsx)(pe.a,{className:"w-4 h-4"}),Object(S.jsx)("span",{className:"overflow-ellipsis overflow-hidden",children:Object(me.c)(r.values[L.b.changePage],s.byId[r.values[L.b.changePage]])})]}),r.mode===L.b.hotkeys&&!!r.values[L.b.hotkeys].length&&Object(S.jsx)("div",{className:Object(P.a)(o,"bg-gray-500"),children:Object(S.jsx)("span",{children:i.join("+")})}),r.mode===L.b.text&&!(null===(t=r.values[L.b.text])||void 0===t||!t.length)&&Object(S.jsx)("div",{className:Object(P.a)(o,"bg-gray-500"),children:Object(S.jsx)("span",{className:"min-w-0 overflow-ellipsis overflow-hidden",children:r.values[L.b.text]})}),r.mode===L.b.special_keys&&!!r.values[L.b.special_keys]&&Object(S.jsx)("div",{className:Object(P.a)(o,"bg-gray-500"),children:Object(S.jsx)("span",{children:M[r.values[L.b.special_keys]].toString()})}),r.mode===L.b.settings&&!!r.values[L.b.settings].setting&&Object(S.jsxs)("div",{className:Object(P.a)(o,"bg-gray-500"),children:[Object(S.jsx)("span",{children:r.values[L.b.settings].value}),r.values[L.b.settings].setting===L.e.absolute_brightness&&void 0!==r.values[L.b.settings].value&&Object(S.jsx)("span",{children:(r.values[L.b.settings].value/255*100).toFixed(0)})]}),r.mode!==L.b.noop&&!r.values[r.mode]&&Object(S.jsxs)("div",{className:Object(P.a)(o,"bg-danger-500"),children:[Object(S.jsx)(je.a,{className:"w-4 h-4"}),Object(S.jsx)("span",{title:"check the button settings for completeness",children:"Error"})]})]})},ve=function(e){var t=e.page,n=e.displayIndex,r=(e.children,e.className),a=e.hideChangePage,c=void 0!==a&&a,s=t.displayButtons[n].button;return Object(S.jsx)("div",{className:Object(P.a)("h-6 overflow-hidden w-32",r),children:Object(S.jsxs)(de,{children:[Object(S.jsx)(Oe,{button:s.primary,hideChangePage:c}),Object(S.jsx)(Oe,{button:s.secondary,hideChangePage:c})]})})},ye=function(e){var t=e.$ref,n=e.className,r=e.onClick,a=e.size,c=void 0===a?2:a,s=e.previewImage,i=e.clickable,o=void 0===i||i;return Object(S.jsx)("div",{children:Object(S.jsx)("img",{alt:"",src:s,ref:t,onClick:r,className:Object(P.a)(o&&"cursor-pointer",1===c&&"w-24 h-12",2===c&&"w-32 h-16",3===c&&"w-64 h-32",n),style:{imageRendering:"pixelated"}})})},we=function(e){var t=e.pageId,n=e.displayIndex,r=Object(x.useContext)(Z),a=Object(x.useContext)(ue),c=Object(x.useContext)($),s=Object(x.useContext)(le),i=r.pages.byId[t],o="dbd"===t?r.defaultBackDisplay.display:r.pages.byId[t].displayButtons[n].display,u=Object(re.a)((function(){return{type:"display",item:{pageId:t,displayIndex:n,brightness:r.brightness},collect:function(e){return{isDragging:e.isDragging()}}}})),b=Object(h.a)(u,2),p=b[0].isDragging,j=b[1],f=Object(k.a)((function(){return{accept:"display",drop:function(e,t){console.log("DROPPING"),a.ctrlDown?c.copyButton({pageDestId:y,buttonDestIndex:O,pageSrcId:t.getItem().pageId,buttonSrcIndex:t.getItem().displayIndex}):c.switchButtons({pageAId:y,buttonAIndex:O,pageBId:t.getItem().pageId,buttonBIndex:t.getItem().displayIndex})},collect:function(){return{targetDisplayIndex:n,targetPageId:t}}}}),[t,n,c]),g=Object(h.a)(f,2),m=g[0],O=m.targetDisplayIndex,y=m.targetPageId,w=g[1];return Object(S.jsxs)("div",{ref:j,className:"relative",children:[Object(S.jsxs)(de,{children:[Object(S.jsx)(S.Fragment,{}),Object(S.jsx)(be.a,{onClick:Object(d.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.openConfirm({title:"Delete this display button?",text:"Do you want to delete this display button? It will be gone forever.",onAccept:function(){return c.deleteDisplayButton({pageId:t,buttonIndex:n})}});case 1:case"end":return e.stop()}}),e)}))),className:"absolute -top-3 -left-3 w-6 h-6 p-1 rounded-full bg-danger-600 hover:bg-danger-400 cursor-pointer"})]}),Object(S.jsxs)(v.b,{to:"/displaybutton/".concat(t,"/").concat(n),className:Object(P.a)("bg-opacity-0","flex items-center flex-col ",p&&"opacity-40"),children:[Object(S.jsx)(ye,{className:"shadow-xl mb-2",$ref:w,previewImage:o.previewImage}),Object(S.jsx)(ve,{page:i,displayIndex:n})]})]})},ke=n(345),Ie=n(346),Ce=n(347),Ne=n(348),Pe="w-6 h-6",Se=n(389),Ae=n(387),De=function(e){var t=e.entries,n=e.className,r=e.children;return Object(S.jsx)(Se.a,{children:Object(S.jsxs)("div",{className:Object(P.a)("flex justify-center",!(null!==n&&void 0!==n&&n.includes("absolute"))&&"relative",n),children:[Object(S.jsx)(Se.a.Button,{className:"overflow-hidden",children:r}),Object(S.jsx)("div",{className:"absolute top-full z-40",children:Object(S.jsx)(Ae.a,{as:x.Fragment,enter:"transition duration-75 ease-out",enterFrom:"transform scale-95 -translate-y-2 opacity-0",enterTo:"transform scale-100 -translate-y-0 opacity-100",leave:"transition duration-50 ease-out",leaveFrom:"transform scale-100 -translate-y-0  opacity-100",leaveTo:"transform scale-95 -translate-y-2 opacity-0",children:Object(S.jsx)(Se.a.Items,{children:Object(S.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[Object(S.jsx)("div",{className:"mt-1 arrow-up z-50"}),Object(S.jsx)("div",{className:"bg-gray-500 rounded-lg gap-1px p-2 z-50 border-2 border-primary-500",children:t.map((function(e,t){return Object(S.jsx)(Se.a.Item,{disabled:!!e.disabled,children:function(t){var n=t.active;return Object(S.jsxs)("div",{onClick:e.onClick,className:Object(P.a)("flex items-center px-4 py-2 rounded-lg whitespace-nowrap select-none",n&&"bg-gray-300"),children:[!!e.prefix&&Object(S.jsx)("span",{className:Object(P.a)("mr-4",e.disabled&&"text-gray-300"),children:e.prefix}),Object(S.jsx)("span",{className:Object(P.a)(e.disabled&&"text-gray-300"),children:e.title})]})}},t)}))})]})})})})]})})},Be=function(e){var t,n=e.pageId,r=Object(N.l)(),a=Object(x.useContext)(le),c=Object(x.useContext)($),s=Object(x.useContext)(Z),i=G().data;return Object(S.jsx)("div",{className:"flex items-center justify-center w-9 h-9  cursor-pointer shadow-lg",children:Object(S.jsxs)(de,{children:[Object(S.jsx)(De,{className:"z-20",entries:[{title:"Settings",prefix:Object(S.jsx)(ke.a,{className:Object(P.a)(Pe)}),onClick:function(){return r("/page/".concat(n))}},{title:"Delete",prefix:Object(S.jsx)(be.a,{className:Object(P.a)(Pe,"text-danger-400")}),onClick:function(){return a.openConfirm({title:"Delete this page?",text:"Do you want to delete this page? It will be gone forever",onAccept:function(){return c.deletePage(n)}})}},{title:"Make start page",prefix:Object(S.jsx)(Ie.a,{className:Object(P.a)(Pe)}),onClick:function(){return c.setStartPage({pageId:n})}},{title:s.pages.byId[n].publishData?(null===(t=s.pages.byId[n].publishData)||void 0===t?void 0:t.createdBy)===(null===i||void 0===i?void 0:i.user.id)?"Update":"Fork":"Publish",prefix:Object(S.jsx)(Ce.a,{className:Pe}),disabled:!0,onClick:function(){return r("/publishpage/".concat(n))}}],children:Object(S.jsx)(Ne.a,{className:"w-9 h-9 p-1.5 rounded-full bg-gray-400 hover:bg-gray-300"})}),Object(S.jsx)(be.a,{onClick:Object(d.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.deletePage(n);case 1:case"end":return e.stop()}}),e)}))),className:"w-9 h-9 p-1.5 rounded-full bg-danger-600 hover:bg-danger-400"})]})})},Fe=function(e){var t=e.pageId,n=Object(x.useContext)(Z),r=Object(x.useContext)($),a=r.renamePage,c=r.switchPages,s=n.pages.byId[t],i=0===n.pages.sorted.findIndex((function(e){return e===t})),o=Object(re.a)((function(){return{type:"page",item:{pageId:t,collectionId:s.isInCollection},collect:function(e){return{isDragging:e.isDragging()}}}})),u=Object(h.a)(o,2)[1],l=Object(k.a)({accept:"page",drop:function(e,t){!!t.getItem().collectionId===!!j&&c({pageAId:p,pageBId:t.getItem().pageId})},collect:function(){return{targetPageId:t,collectionId:s.isInCollection}}}),d=Object(h.a)(l,2),b=d[0],p=b.targetPageId,j=b.collectionId,f=d[1];return Object(S.jsxs)("div",{ref:u,id:"page_".concat(t),className:Object(P.a)("relative p-2 m-6 rounded-3xl bg-gray-700 shadow-lg",i&&"border-2 border-primary-400"),children:[Object(S.jsx)("div",{ref:f,children:Object(S.jsxs)("div",{className:"flex justify-between items-center pl-10 py-4 pr-4 h-16",children:[Object(S.jsxs)(de,{children:[Object(S.jsx)(ne,{onChange:function(e){return a({pageId:t,name:e})},value:s.name,placeholder:"".concat(t.slice(-4)," - Click to edit")}),Object(S.jsxs)(te,{className:"italic",children:[!!i&&"Start page | ",s.publishData?"published":"local page"]})]}),Object(S.jsx)(Be,{pageId:t})]})}),Object(S.jsx)("div",{className:Object(P.a)("p-10 pt-2","grid gap-x-8 gap-y-6","grid-cols-".concat(n.width),"grid-rows-".concat(n.height)),children:n.pages.byId[t].displayButtons.map((function(e,n){return Object(S.jsx)(we,{displayIndex:n,pageId:t},n)}))})]})},Te=function(e){var t=e.collectionId,n=Object(N.l)(),r=Object(x.useContext)($),a=Object(x.useContext)(le);return Object(S.jsx)("div",{className:"flex items-center justify-center w-9 h-9  cursor-pointer shadow-lg",children:Object(S.jsxs)(de,{children:[Object(S.jsx)(De,{className:"z-30",entries:[{title:"Settings",prefix:Object(S.jsx)(ke.a,{className:Object(P.a)(Pe)}),onClick:function(){n("/collection/".concat(t))}},{title:"Delete",prefix:Object(S.jsx)(be.a,{className:Object(P.a)(Pe,"text-danger-400")}),onClick:function(){return a.openConfirm({title:"Delete this collection?",text:"Do you want to delete this collection? It will be gone forever",onAccept:function(){return r.deleteCollection({collectionId:t})}})}},{title:"Publish",prefix:Object(S.jsx)(Ce.a,{className:Pe}),disabled:!0,onClick:function(){return n("/publishCollection/".concat(t))}}],children:Object(S.jsx)(Ne.a,{className:"w-9 h-9 p-1.5 rounded-full bg-gray-400 hover:bg-gray-300"})}),Object(S.jsx)(be.a,{onClick:Object(d.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.deleteCollection({collectionId:t});case 1:case"end":return e.stop()}}),e)}))),className:"w-9 h-9 p-1.5 rounded-full bg-danger-600 hover:bg-danger-400"})]})})},Ee=function(e){var t=e.collectionId,n=Object(x.useContext)(Z),r=Object(x.useContext)($),a=r.renameCollection,c=r.setPageCollection,s=n.collections.byId[t],i=Object(k.a)({accept:"page",drop:function(e,t){return s.pages.find((function(e){return e===t.getItem().pageId}))||c({pageId:t.getItem().pageId,collectionId:u}),{}},collect:function(){return{targetCollectionId:t}}}),o=Object(h.a)(i,2),u=o[0].targetCollectionId,l=o[1];return Object(S.jsxs)("div",{ref:l,className:"flex items-center flex-col bg-gray-500 p-6 rounded-3xl m-8",children:[Object(S.jsxs)("div",{className:"flex items-center justify-between w-full",children:[Object(S.jsx)(ne,{onChange:function(e){return a({collectionId:t,name:e})},value:s.name,placeholder:"".concat(t.slice(-4)," - Click to edit")}),Object(S.jsx)(Te,{collectionId:t})]}),Object(S.jsx)("div",{className:"flex flex-wrap justify-evenly items-center",children:s.pages.length?s.pages.map((function(e){return Object(S.jsx)(Fe,{pageId:e},e)})):Object(S.jsx)("div",{className:"flex flex-col p-8 w-80 h-40 justify-center items-center",children:Object(S.jsx)(ee,{hint:'Add pages to this collection by clicking their menu button -> "Settings"',children:"This collection is Empty"})})})]})},qe=function(e){e.children,e.className;var t=Object(x.useContext)(Z);return Object(S.jsx)("div",{className:"flex flex-col justify-center items-center p-12",children:Object(S.jsx)(A,{title:"Collections",center:!0,className:"w-full",children:Object(S.jsx)("div",{className:"flex flex-wrap justify-evenly items-center w-full h-full mb-16",children:Object.entries(t.collections.byId).map((function(e){var t=Object(h.a)(e,2),n=t[0];t[1];return Object(S.jsx)(Ee,{collectionId:n},n)}))})})})},Ue=function(e){return Object(S.jsx)("div",{id:"contentBody",className:Object(P.a)("flex-col justify-center items-center w-full h-full overflow-y-auto"),children:e.children})},Le=function(e){var t=e.className,n=e.disabled,r=void 0!==n&&n,a=e.size,c=void 0===a?2:a,s=e.type,i=void 0===s?"normal":s,o=e.onClick,u=e.children,l=e.prefix,d=e.suffix,b=e.title,p=Object(P.a)(1===c&&"px-3 py-0 space-x-2",2===c&&"px-4 py-1 space-x-2",3===c&&"px-5 py-2 space-x-2"),j=Object(P.a)("danger"===i&&"bg-danger-500 shadow-lg text-white hover:bg-danger-400 hover:shadow-xl","normal"===i&&(r?"text-gray-400 bg-gray-300":"bg-gray-400 shadow-lg text-white hover:bg-gray-300 hover:shadow-xl"),"success"===i&&(r?"text-gray-200 bg-success-400":"bg-success-600 shadow-lg text-white hover:bg-success-500 hover:shadow-xl"),"primary"===i&&(r?"text-gray-300 bg-primary-200":"bg-primary-600 shadow-lg text-white hover:bg-primary-500 hover:shadow-xl"),r&&"cursor-not-allowed");return Object(S.jsxs)("div",{onClick:r?function(){}:o,title:b,className:"cursor-pointer inline-flex items-center text-lg font-normal tracking-wider rounded-md select-none min-w-0 ".concat(p," ").concat(j," ").concat(t),children:[!!l&&Object(S.jsx)("span",{children:l}),Object(S.jsx)("span",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap",children:u}),!!d&&Object(S.jsx)("span",{children:d})]})},We=function(e){e.children,e.className;var t=Object(x.useContext)($);return Object(S.jsx)("div",{className:"flex flex-col justify-center h-full items-center",children:Object(S.jsx)(A,{title:"Create your first page",className:"mb-8",children:Object(S.jsx)("div",{className:"flex justify-center",children:Object(S.jsx)(Le,{prefix:Object(S.jsx)(w.a,{className:"w-6 h-6"}),size:3,type:"primary",onClick:function(){return t.addPage({startPage:!0})},children:"Add Page"})})})})},Re=n(354),Ve=n(355),He=n(351),Ge=n(356),_e=n(357),Me=n(358),Je=n(388),ze=n(350),Ke=function(e){var t,n=e.disabled,r=e.onChange,a=e.value,c=e.className,s=e.options;return Object(S.jsx)(Je.a,{value:a,onChange:r,disabled:n,children:Object(S.jsxs)("div",{className:"relative",children:[Object(S.jsxs)(Je.a.Button,{className:Object(P.a)("py-1 pl-3 pr-10 text-left bg-gray-400 rounded-md shadow-md","cursor-default focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-white focus-visible:ring-offset-orange-300 focus-visible:ring-offset-2 focus-visible:border-indigo-500",c),children:[Object(S.jsx)("span",{className:"block truncate",children:null===(t=s.find((function(e){return e.value===a})))||void 0===t?void 0:t.text}),Object(S.jsx)("span",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:Object(S.jsx)(ze.a,{className:"w-5 h-5 text-gray-50","aria-hidden":"true"})})]}),Object(S.jsx)(Ae.a,{as:x.Fragment,enter:"transition duration-100 ease-out",enterFrom:"transform -translate-y-2 opacity-0",enterTo:"transform -translate-y-0 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform -translate-y-0 opacity-100",leaveTo:"transform -translate-y-2 opacity-0",children:Object(S.jsx)(Je.a.Options,{className:"absolute mt-2 bg-gray-400 py-2 rounded-md select-none overflow-y-auto max-h-72 z-50 -trans",children:s.map((function(e,t){return Object(S.jsx)(Je.a.Option,{className:"",value:e.value,children:function(t){var n=t.selected,r=t.active;return Object(S.jsxs)("div",{className:Object(P.a)("flex items-center w-full p-2 pl-10 relative mr-4",!!r&&"bg-gray-300",!!n&&"bg-primary-600"),children:[!!n&&Object(S.jsx)(He.a,{className:"h-5 w-5 absolute top-3 left-3"}),e.text]})}},t)}))})})]})})},Qe=n(159),Xe=n(161),Ye=n(217),Ze=function(){var e=Object(d.a)(Object(l.a)().mark((function e(t){var r,a,c,s,i,o;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("__TAURI_IPC__"in window)){e.next=14;break}return e.next=3,n.e(5).then(n.bind(null,589));case 3:return r=e.sent,a=r.save,e.next=7,a({defaultPath:"config.bin"});case 7:if(c=e.sent){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,Object(Ye.a)(c,t);case 12:e.next=23;break;case 14:s=document.createElement("a"),document.body.appendChild(s),i=new Blob([t],{type:"octet/stream"}),o=window.URL.createObjectURL(i),s.href=o,s.download="config.bin",s.click(),window.URL.revokeObjectURL(o),s.remove();case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e=n(352),et=(n(353),function(){var e=Object(x.useContext)(Z),t=Object(x.useContext)(ue).hasJson,n=Object(x.useContext)(le),r=n.setHasJson,a=n.openAlert,c=n.setDevLog,s=e.pages,i=Object(x.useContext)($).setState,o=Object(x.useContext)(ue),u=o.serialApi,b=o.ctrlDown,p=o.availablePorts,j=o.connectedPortIndex,f=Object(N.l)(),g=Object(x.useState)(!1),m=Object(h.a)(g,2),O=m[0],v=m[1],y=Object(x.useState)(0),w=Object(h.a)(y,2),k=w[0],I=w[1],C=Object(x.useRef)(null),A=[{text:"Disconnected",value:-1}].concat(Object(D.a)(p.map((function(e,t){return{text:e.replace(";"," "),value:t}}))));return window.__TAURI_IPC__||A.push({text:"Connect new...",value:-2}),Object(S.jsxs)("div",{id:"header",className:Object(P.a)("border-b-2 border-gray-600 bg-gray-700 flex h-24 w-full items-center px-10 shadow-2xl"),children:[Object(S.jsxs)("div",{className:Object(P.a)("flex mr-12"),children:[Object(S.jsx)("div",{className:Object(P.a)("font-medium text-5xl text-white font-fd"),children:"Fresh's "}),Object(S.jsx)("div",{className:Object(P.a)("font-thin text-5xl text-white font-fd"),children:"Free"}),Object(S.jsx)("div",{className:Object(P.a)("font-medium text-5xl text-white font-fd"),children:"Deck"})]}),Object(S.jsxs)("div",{className:Object(P.a)("flex h-14 justify-between items-center w-full"),children:[Object(S.jsxs)("form",{className:"flex items-center space-x-4",onSubmit:function(e){e.preventDefault()},children:[Object(S.jsx)("input",{title:"loadConfig",className:Object(P.a)("hidden"),type:"file",id:"loadConfig",ref:C,onChange:function(e){e.currentTarget.files&&Object(Xe.a)(e.currentTarget.files,i)}}),Object(S.jsxs)("div",{className:Object(P.a)("flex items-center space-x-4"),children:[null!==u&&void 0!==u&&u.connected&&!b?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Le,{prefix:Object(S.jsx)(Re.a,{className:Pe}),size:3,disabled:!t||O,title:t?"Load config over serial":"Cannot load config. FreeDeck stores no JSON. Change it in Settings -> Device",onClick:Object(d.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,u.readConfigFromSerial((function(e,t,n){I(e/t),e===t&&c({path:"lastReceiveSpeed",data:Math.round(t/((new Date).getTime()-n.getTime()))+"kb/s"})})).then((function(e){return Object(Xe.a)(e,i)})).catch((function(e){return a({title:"Attention: Error",text:e.message})}));case 3:v(!1);case 4:case"end":return e.stop()}}),e)}))),children:"Load from FreeDeck"}),Object(S.jsx)(Le,{prefix:Object(S.jsx)(Ve.a,{className:Pe}),size:3,disabled:O,onClick:Object(d.a)(Object(l.a)().mark((function t(){return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return v(!0),t.next=3,u.writeConfigOverSerial(Object(Qe.a)(e,!1),(function(e,t,n){I(e/t),e===t&&c({path:"lastTransmitSpeed",data:Math.round(t/((new Date).getTime()-n.getTime()))+"kb/s"})})).then((function(){return r(e.saveJson)})).catch((function(e){return a({title:"Attention: Error",text:e.message})}));case 3:return t.next=5,v(!1);case 5:case"end":return t.stop()}}),t)}))),children:"Save to FreeDeck"}),Object(S.jsxs)(te,{className:"ml-4",children:[k>0&&k<1&&Object(S.jsxs)("div",{className:"w-24 flex justify-between items-center",title:"".concat(me.d?"Sorry, very slow on mac :(":"working"),children:[Object(S.jsx)("div",{className:"h-8 w-8 rounded-full animate-spin bg-primary-500",children:Object(S.jsx)("div",{className:"h-4 w-4  rounded-tl-full bg-primary-200 relative",children:Object(S.jsx)("div",{className:"absolute h-5 w-5 -bottom-2.5 -right-2.5 bg-primary-500 rounded-full"})})}),Object(S.jsx)("div",{children:"".concat((100*k).toFixed(0),"%")})]}),1===k&&Object(S.jsx)("div",{className:"bg-success-700 h-8 w-8 rounded-full flex justify-center items-center",children:Object(S.jsx)(He.a,{className:"h-6 w-6 text-gray-600"})})]})]}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Le,{prefix:Object(S.jsx)(Ge.a,{className:Pe}),size:3,onClick:function(){var e;null===(e=C.current)||void 0===e||e.click()},children:"Load Config"}),!!Object.keys(s).length&&Object(S.jsx)(Le,{prefix:Object(S.jsx)(_e.a,{className:Pe}),disabled:!Object.keys(s).length,size:3,onClick:function(){return function(){if(0!==Object.keys(s.byId).length){var t=Object(Qe.a)(e,!0);t&&Ze(t)}}()},children:"Save Config"})]}),u&&Object(S.jsx)(Ke,{options:A,value:null!==j&&void 0!==j?j:-1,onChange:function(e){switch(e){case-1:null===u||void 0===u||u.disconnect();break;case-2:null===u||void 0===u||u.requestNewPort().catch((function(e){return console.log(e)}));break;default:null===u||void 0===u||u.connect(e)}}})]})]}),Object(S.jsxs)("div",{className:Object(P.a)("flex items-center space-x-4"),children:[Object(S.jsx)(Le,{prefix:Object(S.jsx)(Me.a,{className:Pe}),onClick:function(){return f("/settings")},size:3,children:"Settings"}),!1,!1]})]})]})}),tt=function(e){e.children;var t=e.className,n=Object(x.useContext)(Z);return Object(S.jsx)("div",{children:Object(S.jsx)("div",{className:"flex flex-col justify-center items-center p-12",children:Object(S.jsx)(A,{title:"Pages",center:!0,className:"w-full",children:Object(S.jsx)("div",{className:Object(P.a)("flex flex-wrap justify-evenly items-center w-full h-full",t),children:n.pages.sorted.map((function(e){return!n.pages.byId[e].isInCollection&&Object(S.jsx)(Fe,{pageId:e},e)}))})})})})},nt=function(){var e=Object(N.l)(),t=Object(x.useContext)(Z),n=Object(x.useContext)($),r=n.createCollection,a=n.addPage,c=n.setPageCollection,s=Object(k.a)({accept:"page",drop:function(e,t){t.getItem().collectionId&&t.isOver()&&c({pageId:t.getItem().pageId,collectionId:t.getItem().collectionId})}}),i=Object(h.a)(s,2)[1];return Object(S.jsxs)("div",{ref:i,className:"flex flex-col h-full w-full",children:[Object(S.jsx)(et,{}),Object(S.jsxs)(Ue,{children:[!!Object.values(t.pages.byId).filter((function(e){return!e.isInCollection})).length&&Object(S.jsx)(tt,{}),!Object.values(t.pages.sorted).length&&Object(S.jsx)(We,{}),!!Object.keys(t.collections.sorted).length&&!!t.pages.sorted.length&&Object(S.jsx)(qe,{})]}),Object(S.jsx)(I.Toaster,{}),Object(S.jsx)("div",{className:"fixed bottom-5 left-6 z-30",children:Object(S.jsx)(Le,{prefix:Object(S.jsx)(y.a,{className:"w-6 h-6"}),className:"mr-4",size:3,type:"primary",onClick:function(){return e("/help")},children:"Help"})}),!!Object.keys(t.pages.sorted).length&&Object(S.jsxs)("div",{className:"fixed bottom-5 right-6 z-30",children:[Object(S.jsx)(Le,{prefix:Object(S.jsx)(w.a,{className:"w-6 h-6"}),className:"mr-4",size:3,type:"primary",onClick:function(){return r({})},children:"Add Collection"}),Object(S.jsx)(Le,{prefix:Object(S.jsx)(w.a,{className:"w-6 h-6"}),size:3,type:"primary",onClick:function(){return a({})},children:"Add Page"})]})]})},rt=n(76),at=function(e,t,n){var r;r=e<0?{currentPage:Math.abs(e+1),dontSwitchPage:!0}:e>=0?{currentPage:e,dontSwitchPage:!1}:{currentPage:null,dontSwitchPage:!1},n.current.deck=r,t.setDeck(r)},ct=function(e,t,n,r,a){switch(e){case 16:!function(e,t){var n=t.pages.sorted[e[0]],r=t.pages.byId[n].displayButtons[e[1]].button,a=e[2]?r.secondary.values.text:r.primary.values.text;Object(ae.a)("press_keys",{keyString:null!==a&&void 0!==a?a:"nothing"})}(t,n);break;case 32:at(t[0],r,a)}},st=n(218),it=n(26),ot=n(98),ut="",lt=function(e,t){for(var n=0;n<e.pages.sorted.length;n++){var r=e.pages.byId[e.pages.sorted[n]];if(!r.isInCollection)if(r.usePageNameAsWindowName){if(!r.name)continue;if(-1!==t.toLowerCase().indexOf(r.name.toLowerCase()))return n}else{if(!r.windowName)continue;var a,c=r.windowName.split(/[,\n]/).map((function(e){return e.trim().toLowerCase()})),s=Object(it.a)(c);try{for(s.s();!(a=s.n()).done;){var i=a.value;if(-1!==t.toLowerCase().indexOf(i))return n}}catch(o){s.e(o)}finally{s.f()}}}return-1},dt=function(e,t){for(var n=0;n<e.collections.sorted.length;n++){var r=e.collections.byId[e.collections.sorted[n]];if(r.useCollectionNameAsWindowName){if(!r.name)continue;if(t.toLowerCase().indexOf(r.name.toLowerCase()))return n}else{if(!r.windowName)continue;var a,c=r.windowName.split(/[,\n]/).map((function(e){return e.trim().toLowerCase()})),s=Object(it.a)(c);try{for(s.s();!(a=s.n()).done;){var i=a.value;if(-1!==t.toLowerCase().indexOf(i))return n}}catch(o){s.e(o)}finally{s.f()}}}return-1},bt=function(){var e=Object(d.a)(Object(l.a)().mark((function e(t,n,r){var a,c,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(a=r.serialApi)||void 0===a?void 0:a.getCurrentPage();case 2:if(s=e.sent,![void 0,n].includes(s)){e.next=5;break}return e.abrupt("return");case 5:if(!(s<0)){e.next=8;break}return ut="",e.abrupt("return");case 8:ut=t,null===(c=r.serialApi)||void 0===c||c.setCurrentPage(n);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),pt=function(){var e=Object(d.a)(Object(l.a)().mark((function e(t,n,r){var a,c,s,i,o,u,d;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==(s=dt(n,t))){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,null===(a=r.serialApi)||void 0===a?void 0:a.getCurrentPage();case 5:if(void 0!==(i=e.sent)){e.next=8;break}return e.abrupt("return");case 8:if(!(i<0)){e.next=11;break}return ut="",e.abrupt("return");case 11:if(o=n.pages.sorted[i],!(u=n.collections.byId[n.collections.sorted[s]]).pages.includes(o)){e.next=15;break}return e.abrupt("return");case 15:if(-1!==(d=n.pages.sorted.findIndex((function(e){return e===u.pages[0]})))){e.next=18;break}return e.abrupt("return");case 18:ut=t,null===(c=r.serialApi)||void 0===c||c.setCurrentPage(d);case 20:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),jt=function(){var e=Object(d.a)(Object(l.a)().mark((function e(t,n){var r,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ae.a)("get_current_window");case 3:if((r=e.sent)!==ut){e.next=6;break}return e.abrupt("return");case 6:if(-1!==(a=lt(t,r))){e.next=12;break}return e.next=10,pt(r,t,n);case 10:e.next=14;break;case 12:return e.next=14,bt(r,a,n);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}(),ft=function(e,t,n,r,a){!function(e,t){Object(x.useEffect)((function(){var n=function(){var n=Object(d.a)(Object(l.a)().mark((function n(){var r,a,c,s,i;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=localStorage.getItem("config"))){n.next=7;break}return a=JSON.parse(r),n.next=5,Object(J.a)(a);case 5:c=n.sent,e.setState(c);case 7:if(window.__TAURI_IPC__){n.next=9;break}return n.abrupt("return");case 9:return s=localStorage.getItem("autoPageSwitcherEnabled"),i=null===s||JSON.parse(s),t.toggleAutoPageSwitcher(i),n.next=14,Object(rt.a)("toggle_aps",(function(e){t.toggleAutoPageSwitcher(void 0)}));case 14:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[])}(t,r),function(e,t){Object(x.useEffect)((function(){if(!window.__TAURI_IPC__)return function(){};var n=!1,r=ot.setInterval(Object(d.a)(Object(l.a)().mark((function r(){return Object(l.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n||!t.autoPageSwitcherEnabled){r.next=5;break}return n=!0,r.next=4,jt(e,t);case 4:n=!1;case 5:case"end":return r.stop()}}),r)}))),80);return function(){r&&ot.clearInterval(r)}}),[e,t.serialApi,t.autoPageSwitcherEnabled])}(e,n),function(e,t,n,r){Object(x.useEffect)((function(){if(window.__TAURI_IPC__){var a,c=!1,s=function(){var s=Object(d.a)(Object(l.a)().mark((function s(){return Object(l.a)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(me.e)(250);case 2:if(!c){s.next=4;break}return s.abrupt("return");case 4:return s.next=6,Object(rt.a)("serial_command",Object(d.a)(Object(l.a)().mark((function a(){var c,s,i;return Object(l.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.serialApi.readSerialCommand();case 2:c=a.sent,s=c.command,i=c.args,ct(s,i,e,n,r);case 6:case"end":return a.stop()}}),a)}))));case 6:a=s.sent;case 7:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}}();return s(),function(){var e;c=!0,null===(e=a)||void 0===e||e()}}}),[e])}(e,n,r,a),Object(st.a)(e,n,a)},ht=n(360),gt=n(361),xt=function(e){var t=e.danger,n=e.primary,r=e.title,a=e.text;C()((function(e){return Object(S.jsx)("div",{className:"",children:!!r&&Object(S.jsxs)(A,{title:r,className:"mb-2",children:[Object(S.jsx)("div",{className:"mb-8",children:a}),Object(S.jsxs)("div",{className:"flex justify-end gap-2",children:[!!n&&n(e),t?t(e):Object(S.jsx)(Le,{prefix:Object(S.jsx)(ht.a,{className:"h-4 w-4"}),type:"danger",size:2,onClick:function(){return C.a.dismiss(e.id)},children:"Close"})]})]})})}),{duration:1/0,position:"bottom-right",style:{background:"#fff0"},className:"text-white border-0 p-0 m-0 border-white text-lg"})},mt=n(363),Ot=n(390),vt=function(e){var t=e.tabs,n=e.className,r=e.activeIndex,a=void 0===r?0:r,c=e.onChange;return Object(S.jsx)(Ot.a.Group,{vertical:!0,defaultIndex:a,onChange:function(e){return null===c||void 0===c?void 0:c(e)},children:Object(S.jsxs)("div",{className:Object(P.a)("flex",n),children:[Object(S.jsx)(Ot.a.List,{className:"flex flex-col gap-1 bg-gray-800 p-2",children:t.map((function(e,t){return Object(S.jsx)(Ot.a,{children:function(t){var n=t.selected;return Object(S.jsxs)("div",{className:Object(P.a)("w-60 inline-flex items-center font-normal text-lg tracking-wide rounded-lg  whitespace-nowrap  p-3  cursor-pointer select-none ",n?"text-white bg-primary-600 shadow-xl ":"text-white hover:bg-gray-400"),children:[Object(S.jsx)("span",{className:"mr-2",children:e.prefix}),e.title]})}},t)}))}),Object(S.jsx)(Ot.a.Panels,{as:x.Fragment,children:t.map((function(e,t){return Object(S.jsx)(Ot.a.Panel,{className:"w-full flex",children:e.content},t)}))})]})},a)},yt=n(383),wt=n(362),kt=function(e){var t=e.isOpen,n=e.onClose,r=e.title,a=e.text;return Object(S.jsx)(Ae.a,{show:t,as:x.Fragment,children:Object(S.jsxs)(yt.a,{className:"flex justify-center items-center fixed z-40 inset-0",onClose:function(){return n()},children:[Object(S.jsx)(Ae.a.Child,{as:x.Fragment,enter:"transition duration-50 ease-out",enterFrom:"transform opacity-0",enterTo:"transform opacity-100",leave:"transition duration-50 ease-out",leaveFrom:"transform opacity-100",leaveTo:"transform opacity-0",children:Object(S.jsx)(yt.a.Overlay,{className:"fixed inset-0 bg-black z-10 bg-opacity-70"})}),Object(S.jsx)(Ae.a.Child,{as:x.Fragment,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 translate-y-8 opacity-0",enterTo:"transform scale-100 translate-y-0 opacity-70",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-70",leaveTo:"transform scale-95 opacity-0",children:Object(S.jsx)("div",{className:"flex flex-col items-start justify-center z-50 rounded-xl shadow-2xl max-w-md break-words",children:Object(S.jsx)(yt.a.Title,{className:"mb-2",children:Object(S.jsxs)(A,{title:r,children:[Object(S.jsx)(yt.a.Description,{className:"text-lg mb-8",children:a}),Object(S.jsx)("div",{className:"flex w-full justify-end gap-2",children:Object(S.jsx)(Le,{onClick:function(){return n()},children:"Ok"})})]})})})})]})})},It=function(e){var t=e.isOpen,n=e.onClose,r=e.title,a=e.text;return Object(S.jsx)(Ae.a,{show:t,as:x.Fragment,children:Object(S.jsxs)(yt.a,{className:"flex justify-center items-center fixed z-40 inset-0",onClose:function(){},children:[Object(S.jsx)(Ae.a.Child,{as:x.Fragment,enter:"transition duration-50 ease-out",enterFrom:"transform opacity-0",enterTo:"transform opacity-100",leave:"transition duration-50 ease-out",leaveFrom:"transform opacity-100",leaveTo:"transform opacity-0",children:Object(S.jsx)(yt.a.Overlay,{className:"fixed inset-0 bg-black z-10 bg-opacity-70"})}),Object(S.jsx)(Ae.a.Child,{as:x.Fragment,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 translate-y-8 opacity-0",enterTo:"transform scale-100 translate-y-0 opacity-70",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-70",leaveTo:"transform scale-95 opacity-0",children:Object(S.jsx)("div",{className:"flex flex-col items-start justify-center z-50  max-w-md break-words",children:Object(S.jsx)(yt.a.Title,{className:"mb-2",children:Object(S.jsxs)(A,{title:r,children:[Object(S.jsx)(yt.a.Description,{className:"text-lg mb-8",children:a}),Object(S.jsxs)("div",{className:"flex w-full justify-end gap-2",children:[Object(S.jsx)(Le,{onClick:function(){return n(!1)},children:"Cancel"}),Object(S.jsx)(Le,{type:"danger",onClick:function(){return n(!0)},children:"OK"})]})]})})})})]})})},Ct=function(){var e=Object(x.useContext)(ue),t=Object(x.useContext)(le),n=t.closeAlert,r=t.openAlert,a=t.closeConfirm,c=t.openConfirm;return window.advancedAlert=function(e,t){return r({title:e,text:t})},window.advancedConfirm=function(e,t,n){return c({title:e,text:t,onAccept:n})},Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(kt,{isOpen:e.alert.isOpen,text:e.alert.text,title:e.alert.title,onClose:function(){return n(void 0)}}),Object(S.jsx)(It,{isOpen:e.confirm.isOpen,text:e.confirm.text,title:e.confirm.title,onClose:function(e){return a({value:e})}})]})},Nt=function(e){var t=e.visible,n=e.setClose,r=e.children,a=e.title,c=e.className;return Object(S.jsx)(Ae.a,{show:t,as:x.Fragment,appear:!0,children:Object(S.jsxs)(yt.a,{open:t,className:"flex justify-center items-center fixed z-40 inset-0 m-24",onClose:function(){return n()},children:[Object(S.jsx)(Ae.a.Child,{as:x.Fragment,enter:"transition duration-50 ease-out",enterFrom:"transform opacity-0",enterTo:"transform opacity-100",leave:"transition duration-50 ease-out",leaveFrom:"transform opacity-100",leaveTo:"transform opacity-0",children:Object(S.jsx)(yt.a.Overlay,{className:"fixed inset-0 bg-black z-10 bg-opacity-70"})}),Object(S.jsx)(Ae.a.Child,{as:x.Fragment,enter:"transition duration-50 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-50 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",children:Object(S.jsxs)("div",{className:Object(P.a)("relative bg-gray-900 rounded-2xl z-20 flex flex-col",c),children:[Object(S.jsx)("div",{className:Object(P.a)("h-10 flex  flex-shrink-0 items-center justify-center font-medium text-xl text-white bg-gray-700 rounded-t-2xl",!(null!==a&&void 0!==a&&a.length)&&"hidden"),children:a}),Object(S.jsx)("div",{className:"absolute top-0.5 right-1",children:Object(S.jsx)("div",{className:"box-content p-1 rounded-full flex items-center justify-center cursor-pointer",onClick:function(){return n()},children:Object(S.jsx)(wt.a,{className:"h-7 w-7 hover:text-danger-500"})})}),r,Object(S.jsx)(Ct,{})]})})]})})},Pt=function(e){var t=e.children,n=e.className,r=e.mode,a=void 0===r?"middle":r;return Object(S.jsx)("div",{className:Object(P.a)("flex justify-between my-4","middle"===a?"items-center":"items-start",n),children:t})},St=function(e){var t=e.className,n=e.value,r=e.onChange,a=e.disabled,c=void 0!==a&&a;return Object(S.jsx)("div",{onClick:function(){return!c&&r(!n)},className:Object(P.a)(t,"flex w-12 h-6 rounded-md items-center p-1",c?n?"bg-success-300":"bg-danger-300":n?"bg-success-600":"bg-danger-600"),children:Object(S.jsx)("div",{className:Object(P.a)("w-4 h-4 rounded bg-white transform transition ease-in-out duration-100",n?"translate-x-6":"translate-x-0")})})},At=function(e){var t=e.className,n=e.children,r=e.onChange,a=e.value,c=e.placeholder,s=e.disabled,i=e.onEnter;return Object(S.jsx)("textarea",{disabled:s,placeholder:c,className:Object(P.a)("text-base appearance-none py-1 px-2 placeholder-gray-100 resize-none rounded-md",s?"text-gray-50":"text-white",s?"bg-gray-200":"bg-gray-500",t),onChange:function(e){r(e.currentTarget.value)},onKeyDown:function(e){return"Enter"===e.key&&i&&i()},value:a,children:n})},Dt=function(e){var t=e.collectionId,n=Object(x.useContext)(Z),r=Object(x.useContext)($).setUseCollectionName,a=Object(x.useContext)($).changeCollectionWindowName,c=n.collections.byId[t];return Object(S.jsx)("div",{className:"w-full",children:Object(S.jsxs)(A,{title:"Auto page-switcher",children:[Object(S.jsxs)(Pt,{className:"h-8",children:[Object(S.jsx)(ee,{children:"Use Page name as window name"}),Object(S.jsx)(St,{onChange:function(e){return r({collectionId:t,value:e})},value:c.useCollectionNameAsWindowName})]}),Object(S.jsxs)(Pt,{mode:"top",children:[Object(S.jsx)(ee,{hint:"One window name per line or comma seperated",children:"Window name"}),Object(S.jsx)(At,{className:"w-64 h-64",placeholder:c.useCollectionNameAsWindowName?c.name:"Enter window name...",disabled:c.useCollectionNameAsWindowName,value:c.windowName,onChange:function(e){return a({collectionId:t,windowName:e})}})]})]})})},Bt=function(e){var t=e.className,n=e.children,r=e.onChange,a=e.onEnter,c=e.value,s=e.placeholder,i=e.disabled;return Object(S.jsx)("input",{type:"text",disabled:i,placeholder:s,className:Object(P.a)("text-base appearance-none py-1 px-2 placeholder-gray-100 resize-none rounded-md",i?"text-gray-50":"text-white",i?"bg-gray-200":"bg-gray-500",t),onChange:function(e){r(e.currentTarget.value)},onKeyDown:function(e){return"Enter"===e.key&&a&&a()},value:c,children:n})},Ft=function(e){var t=e.collectionId,n=Object(x.useContext)(Z),r=Object(x.useContext)($).renameCollection,a=n.collections.byId[t];return Object(S.jsx)("div",{className:"w-full",children:Object(S.jsx)(A,{title:"General collection settings",children:Object(S.jsxs)(Pt,{className:"h-8",children:[Object(S.jsx)(ee,{children:"Name"}),Object(S.jsx)(Bt,{className:"w-44",placeholder:"Enter page name",value:a.name,onChange:function(e){return r({collectionId:t,name:e})}})]})})})},Tt=function(){var e=Object(N.n)(),t=Object(N.l)(),n=Object(x.useContext)(Z),r=e.collectionId;if(void 0===r)return Object(S.jsx)(S.Fragment,{});var a=n.collections.byId[r];return void 0===a?Object(S.jsx)(S.Fragment,{}):Object(S.jsx)(Nt,{className:"w-dp-settings",title:"Collection ".concat(Object(me.b)(r,a)),visible:!0,setClose:function(){return t("/")},children:Object(S.jsx)(vt,{className:"h-dp-settings",tabs:[{title:"General",content:Object(S.jsx)(Ft,{collectionId:r}),prefix:Object(S.jsx)(ke.a,{className:Pe})},{title:"Auto Page Switcher",content:Object(S.jsx)(Dt,{collectionId:r}),prefix:Object(S.jsx)(mt.a,{className:Pe})}]})})},Et=function(){var e=Object(N.l)();return Object(S.jsx)(Nt,{className:"w-auto h-auto",visible:!0,setClose:function(){e("/"),localStorage.setItem("dontShow128Info","true")},title:"Important Info",children:Object(S.jsxs)("div",{className:"flex flex-col items-center space-y-4 p-8 text-xl",children:[Object(S.jsx)("div",{className:"text-danger-500 text-4xl pb-4",children:"Attention!"}),Object(S.jsx)("div",{children:"I've edited the entire build of this software side and hardware side."}),Object(S.jsx)("div",{children:"This software will ONLY work with JFresh's FreeDeck."}),Object(S.jsx)("div",{children:"If you have problems, click the help button and go to the discussion forum."}),Object(S.jsx)("div",{children:"Thank you for purchasing Fresh's FreeDeck!  ENJOY!"})]})})},qt=n(366),Ut=n(372),Lt=n(10),Wt=function(e){var t,n=e.values,r=e.previousPage,a=e.pages,c=e.previousDisplay,s=e.setValues,i=e.secondary,o=Object(x.useContext)($);return Object(S.jsxs)(S.Fragment,{children:[a.sorted.length?Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{children:"Page"}),Object(S.jsx)(Ke,{className:"w-48",value:null!==(t=n[L.b.changePage])&&void 0!==t?t:"",onChange:function(e){return s(Object(B.a)(Object(B.a)({},n),{},Object(Lt.a)({},L.b.changePage,e)))},options:[{text:"Select Page",value:""}].concat(Object(D.a)(a.sorted.map((function(e){var t=a.byId[e];return{value:e,text:"Go to ".concat(Object(me.c)(e,t))}}))))})]}):null,Object(S.jsx)("div",{className:"flex justify-center my-2",children:["",void 0].includes(n[L.b.changePage])?Object(S.jsx)(Le,{prefix:Object(S.jsx)(w.a,{className:"h-5 w-5"}),size:2,onClick:Object(d.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.addPage({previousPage:r,previousDisplay:c,secondary:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Add Page"}):Object(S.jsxs)(Le,{prefix:Object(S.jsx)($e.a,{className:"h-5 w-5"}),size:2,onClick:function(){return function(e){var t,n=document.getElementById("contentBody"),r=document.getElementById("page_".concat(e)),a=document.getElementById("header");r&&n&&n.scrollTo({top:r.offsetTop-(null!==(t=null===a||void 0===a?void 0:a.clientHeight)&&void 0!==t?t:150)+24})}(n[L.b.changePage])},children:["Scroll To"," ",Object(me.c)(n[L.b.changePage],a.byId[n[L.b.changePage]])]})})]})},Rt=function(e){e.children;var t=e.className,n=e.onChange,r=e.value,a=e.min,c=e.max,s=e.step,i=void 0===s?1:s,o=e.disabled,u=void 0!==o&&o;return Object(S.jsxs)(de,{children:[Object(S.jsxs)("div",{className:"relative group",children:[Object(S.jsx)("input",{className:Object(P.a)("rounded-md overflow-hidden appearance-none h-6 w-44 flex-shrink-0 p-1",u?"bg-primary-100":"bg-primary-500",t),type:"range",min:a,max:c,step:i,value:r,disabled:u,onChange:n,title:u?"This option only works with Text AND Image provided":"",alt:r.toString()}),Object(S.jsx)("div",{className:"absolute justify-center hidden group-hover:flex -top-1 right-full z-30",children:Object(S.jsxs)("div",{className:"flex items-center",children:[Object(S.jsx)("div",{className:"bg-gray-400 px-2 border-primary-600 border-2 rounded-md select-none text-lg",children:r}),Object(S.jsx)("div",{className:"fat-arrow-right z-50"})]})})]}),Object(S.jsx)(te,{children:r})]})},Vt=function(e){var t=e.values,n=e.setValues;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{children:"Setting"}),Object(S.jsx)(Ke,{className:"w-48",value:t[L.b.settings].setting,onChange:function(e){return n(Object(B.a)(Object(B.a)({},t),{},Object(Lt.a)({},L.b.settings,Object(B.a)(Object(B.a)({},t[L.b.settings]),{},{setting:e}))))},options:[{text:"Select Setting",value:-1},{text:"Decrease Brightness",value:L.e.change_brightness},{text:"Increase Brightness",value:L.e.change_brightness},{text:"Set Brightness",value:L.e.absolute_brightness}]})]}),t[L.b.settings].setting===L.e.absolute_brightness&&Object(S.jsxs)(Pt,{children:[Object(S.jsx)(Rt,{value:t[L.b.settings].value||128,min:1,max:255,onChange:function(e){return n(Object(B.a)(Object(B.a)({},t),{},Object(Lt.a)({},L.b.settings,Object(B.a)(Object(B.a)({},t[L.b.settings]),{},{value:e.target.valueAsNumber}))))}}),Object(S.jsxs)(te,{children:[((t[L.b.settings].value||128)/255*100).toFixed(0),"%"]})]})]})},Ht=n(47),Gt=function(e){var t=e.values,n=e.setKeys,r=xe(t);return Object(S.jsx)("div",{className:"flex flex-wrap gap-1",children:r.map((function(e,a){return Object(S.jsx)(Le,{size:1,onClick:function(){var e=Object(D.a)(t);e.splice(a,1),n(e.slice(0,7))},children:r.slice(0,a+1).filter((function(t){return t===e})).length%2?e:"^".concat(e)},"".concat(e,"-").concat(a))}))})},_t=function(e){var t=e.setValues,n=e.values,r=function(e){return e.length<=Ht.a/2-4&&t(Object(B.a)(Object(B.a)({},n),{},Object(Lt.a)({},L.b.hotkeys,e)))};return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{children:"Key"}),Object(S.jsx)(Ke,{className:"w-48",value:0,onChange:function(e){n[L.b.hotkeys].find((function(t){return t===e}))&&e>=224||r([].concat(Object(D.a)(n[L.b.hotkeys]),[parseInt(e)]))},options:[{text:"Choose key",value:0}].concat(Object(D.a)(Object.keys(fe).map((function(e){var t;return{text:e,value:null===(t=fe[e])||void 0===t?void 0:t.hid}}))))})]}),Object(S.jsx)(Pt,{children:Object(S.jsx)("div",{className:"bg-gray-400 px-2 py-1 w-full rounded text-center",tabIndex:0,onKeyDown:function(e){return function(e){if(!e.repeat){var t=Object.keys(fe).find((function(t){var n;return(null===(n=fe[t])||void 0===n?void 0:n.js)===e.nativeEvent.code}));t&&(42===fe[t].hid&&n[L.b.hotkeys].length>0?r(Object(D.a)(n[L.b.hotkeys].slice(0,n[L.b.hotkeys].length-1))):r([].concat(Object(D.a)(n[L.b.hotkeys]),[fe[t].hid])))}}(e)},children:"Click/Focus to scan"})}),Object(S.jsx)(Pt,{children:Object(S.jsx)("div",{children:Object(S.jsx)(Gt,{setKeys:r,values:n[L.b.hotkeys]})})})]})},Mt=function(e){var t=e.value,n=e.pages,r=e.setValue,a=(e.primary,n.sorted[0]);return Object(S.jsx)(S.Fragment,{children:n.sorted.length?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{children:"Change Page after press"}),Object(S.jsx)(St,{value:t.enabled,onChange:function(e){return r({enabled:e,pageId:t.pageId})}})]}),t.enabled&&Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{children:"Page"}),Object(S.jsx)(Ke,{className:"w-48",value:t.pageId||a,onChange:function(e){return r({enabled:!0,pageId:e})},options:[{text:"Select Page",value:""}].concat(Object(D.a)(n.sorted.map((function(e){var t=n.byId[e];return{value:e,text:"Go to ".concat(Object(me.c)(e,t))}}))))})]})]}):null})},Jt=function(e){var t,n=e.values,r=e.setValues;return Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{children:"Key"}),Object(S.jsx)(Ke,{className:"w-48",value:null!==(t=n[L.b.special_keys])&&void 0!==t?t:0,onChange:function(e){return r(Object(B.a)(Object(B.a)({},n),{},Object(Lt.a)({},L.b.special_keys,parseInt(e))))},options:[{text:"Choose key",value:0}].concat(Object(D.a)(ge.map((function(e){return{value:M[e],text:e}}))))})]})},zt=function(e){var t=e.values,n=e.setValues,r=function(e){return n(Object(B.a)(Object(B.a)({},t),{},Object(Lt.a)({},L.b.text,e)))};return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("textarea",{placeholder:"Enter your text here",className:"bg-gray-400 my-2 rounded-lg resize-none p-2 w-full h-60",rows:12,onChange:function(e){!function(e){r(e.target.value)}(e)},value:t[L.b.text]}),Object(S.jsx)("span",{children:"This only works with the configurator app installed and running. Check the help to find the download"})]})},Kt=function(e){var t=e.buttonSettings,n=e.title,r=e.pageId,a=e.buttonIndex,c=e.primary,s=Object(x.useContext)($),i=Object(x.useContext)(Z),o=c?"primary":"secondary",u=function(e){return s.setButtonSettings({pageId:r,buttonIndex:a,priOrSec:o,buttonSettings:Object(B.a)(Object(B.a)({},t),{},{values:Object(B.a)({},e)})})};return Object(S.jsx)("div",{className:"flex flex-col h-full",children:Object(S.jsx)(A,{title:n,className:"mb-2 h-full",children:Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{children:"Mode"}),Object(S.jsx)(Ke,{className:"w-48",value:t.mode,onChange:function(e){return n=e,void s.setButtonSettings({pageId:r,buttonIndex:a,priOrSec:o,buttonSettings:Object(B.a)(Object(B.a)({},t),{},{mode:n})});var n},options:[{value:L.b.noop,text:"Do nothing"},{value:L.b.changePage,text:"Change Page"},{value:L.b.hotkeys,text:"Hot Key"},{value:L.b.special_keys,text:"Special Keys"},{value:L.b.text,text:"Text (App only)"},{value:L.b.settings,text:"Settings"}]})]}),t.mode===L.b.hotkeys&&Object(S.jsx)(_t,{values:t.values,setValues:function(e){return u(e)}}),t.mode===L.b.changePage&&Object(S.jsx)(Wt,{values:t.values,previousPage:r,pages:i.pages,previousDisplay:a,setValues:function(e){return u(e)},secondary:!c}),t.mode===L.b.special_keys&&Object(S.jsx)(Jt,{values:t.values,setValues:function(e){return u(e)}}),t.mode===L.b.text&&Object(S.jsx)(zt,{values:t.values,setValues:function(e){return u(e)}}),t.mode===L.b.settings&&Object(S.jsx)(Vt,{values:t.values,setValues:function(e){return u(e)}}),t.mode!==L.b.changePage&&Object(S.jsx)(Mt,{primary:c,value:i.pages.byId[r].displayButtons[a].button[c?"primary":"secondary"].leavePage,pages:i.pages,setValue:function(e){return s.setLeavePage({buttonIndex:a,pageId:r,targetPageId:e.pageId,enabled:e.enabled,primary:c})}})]})})})},Qt=function(e){var t=e.pageId,n=e.displayIndex,r=Object(x.useContext)(Z).pages.byId[t].displayButtons[n].button;return Object(S.jsxs)("div",{className:"flex flex-col h-full w-full p-8",children:[Object(S.jsxs)("div",{className:"grid grid-cols-2 grid-rows-1 gap-2 h-full mb-4",children:[Object(S.jsx)("div",{className:"relative flex flex-col",children:Object(S.jsx)(Kt,{primary:!0,title:"Short press",pageId:t,buttonIndex:n,buttonSettings:r.primary})}),Object(S.jsx)("div",{className:"relative flex flex-col",children:Object(S.jsx)(Kt,{primary:!1,title:"Long press",pageId:t,buttonIndex:n,buttonSettings:r.secondary})})]}),("hotkeys"===r.primary.mode||"hotkeys"===r.secondary.mode)&&Object(S.jsxs)("div",{className:"mt-auto text-center",children:[Object(S.jsx)("div",{children:"Disclaimer for Firefox and Safari:"}),Object(S.jsx)("p",{children:"If you have a non-US keyboard, the buttons recognized will not show the buttons on your keyboard. But it will still work like expected :) I would love to show the buttons as they are on your keyboard, but that is not so easy as i hoped. If you can help, please feel free to contribute!"})]})]})},Xt=n(110),Yt=n(365),Zt=n(221),$t=function(e){var t=e.onDrop,n=e.pageId,r=e.displayIndex,a=Object(Zt.a)({onDrop:t,accept:[".jpg",".jpeg",".png"]}),c=a.getRootProps,s=a.getInputProps,i=a.isDragActive,o=Object(x.useContext)(Z),u="dbd"===n?o.defaultBackDisplay.display:o.pages.byId[n].displayButtons[r].display,l=Object(x.useContext)($),d=[];return"dbd"===n?d.push({title:"Reset to default",onClick:function(){return l.resetDefaultBackButton(void 0)},prefix:Object(S.jsx)(p.a,{className:Object(P.a)(Pe,"text-danger-400")})}):d.push({title:"Delete image",onClick:function(){return l.deleteImage({buttonIndex:r,pageId:n})},prefix:Object(S.jsx)(be.a,{className:Object(P.a)(Pe,"text-danger-400")})},{title:"Make back button",onClick:function(){return l.makeDefaultBackButton({buttonIndex:r,pageId:n})},prefix:Object(S.jsx)(p.a,{className:Object(P.a)(Pe)})}),Object(S.jsxs)("div",{className:"relative flex w-full justify-center mb-4 bg-gradient-to-b bg-gray-800 rounded-2xl shadow-2xl",children:[Object(S.jsxs)("div",Object(B.a)(Object(B.a)({className:"rounded-sm border-0"},c({style:{outline:"none"}})),{},{children:[Object(S.jsx)("input",Object(B.a)({},s())),i&&Object(S.jsxs)("div",{className:"flex text-2xl font-extrabold h-32 items-center justify-center",children:[Object(S.jsx)(Yt.a,{className:"h-12 w-12 m-4"}),"Drop Here",Object(S.jsx)(qt.a,{className:"h-12 w-12 m-4"})]}),!i&&(u.originalImage||u.textSettings.text)&&Object(S.jsx)(ye,{size:3,previewImage:u.previewImage}),!i&&!u.originalImage&&!u.textSettings.text&&Object(S.jsx)("div",{className:"h-32 flex items-center justify-center bg-black w-64 cursor-pointer",children:"Click me or Copy 'n paste"})]})),Object(S.jsx)(De,{className:"absolute top-0 right-0",entries:d,children:Object(S.jsx)("div",{className:"rounded-full bg-gray-400 hover:bg-gray-300 p-2 m-2",children:Object(S.jsx)(Ne.a,{className:"h-6 w-6"})})})]})},en=n(367),tn=n(369),nn=n(370),rn=n(371),an=n(373),cn=n(374),sn=n(368),on=n(60),un=function(e){var t,n,r=e.displayIndex,a=e.pageId,c=Object(x.useContext)(Z),s="dbd"===a?c.defaultBackDisplay.display:c.pages.byId[a].displayButtons[r].display,i=Object(x.useContext)($);return Object(S.jsxs)("div",{className:"grid grid-cols-2 gap-2 grid-rows-1 w-full h-full",children:[Object(S.jsxs)("div",{className:"relative flex flex-col bg-gray-800 rounded-xl",children:[Object(S.jsx)("div",{className:Object(P.a)("z-10 bg-gray-900 opacity-80 top-0 left-0 right-0 bottom-0 absolute rounded-xl",s.originalImage?"hidden":"block"),title:"These options are disabled. Load an image by clicking on the black box or just enter some text"}),Object(S.jsxs)(A,{title:"Image",className:"h-full",children:[Object(S.jsxs)(Pt,{className:"h-8",children:[Object(S.jsxs)(de,{children:[Object(S.jsx)(en.a,{className:"h-7 w-7"}),Object(S.jsx)(ee,{children:"Image mode"})]}),Object(S.jsxs)(de,{children:[Object(S.jsx)(Ke,{className:"w-56",value:s.imageSettings.imageMode,disabled:!s.originalImage,onChange:function(e){return t=e,s.imageSettings.imageMode=t,void i.setDisplaySettings({displaySettings:s,pageId:a,buttonIndex:r});var t},options:[{text:"Normal (simple icons)",value:L.c.normal},{text:"Dither (Pictures)",value:L.c.dither},{text:"Hybrid (complex icons)",value:L.c.hybrid}]}),Object(S.jsx)(te,{children:s.imageSettings.imageMode})]})]}),!(s.imageSettings.imageMode!==L.c.normal)&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(Pt,{className:"h-8",children:[Object(S.jsxs)(de,{children:[Object(S.jsx)(sn.a,{className:"h-7 w-7"}),Object(S.jsx)(ee,{children:"White Threshold"})]}),Object(S.jsx)(Rt,{disabled:!s.originalImage,className:"w-44",min:0,max:128,step:1,value:s.imageSettings.whiteThreshold,onChange:function(e){return t=e.currentTarget.valueAsNumber,s.imageSettings.whiteThreshold=t,void i.setDisplaySettings({displaySettings:s,pageId:a,buttonIndex:r});var t}})]}),Object(S.jsxs)(Pt,{className:"h-8",children:[Object(S.jsxs)(de,{children:[Object(S.jsx)(tn.a,{className:"h-7 w-7"}),Object(S.jsx)(ee,{children:"Black Threshold"})]}),Object(S.jsx)(Rt,{disabled:!s.originalImage,className:"w-44",min:128,max:255,step:1,value:s.imageSettings.blackThreshold,onChange:function(e){return t=e.currentTarget.valueAsNumber,s.imageSettings.blackThreshold=t,void i.setDisplaySettings({displaySettings:s,pageId:a,buttonIndex:r});var t}})]})]}),!(s.imageSettings.imageMode!==L.c.dither&&s.imageSettings.imageMode!==L.c.hybrid)&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(Pt,{className:"h-8",children:[Object(S.jsxs)(de,{children:[Object(S.jsx)(sn.a,{className:"h-7 w-7"}),Object(S.jsx)(ee,{children:"Brightness:"})]}),Object(S.jsx)(Rt,{disabled:!s.originalImage,min:-1,max:1,step:.02,value:s.imageSettings.brightness,onChange:function(e){return t=e.currentTarget.valueAsNumber,s.imageSettings.brightness=t,void i.setDisplaySettings({displaySettings:s,pageId:a,buttonIndex:r});var t}})]}),Object(S.jsxs)(Pt,{className:"h-8",children:[Object(S.jsxs)(de,{children:[Object(S.jsx)(nn.a,{className:"h-7 w-7"}),Object(S.jsx)(ee,{children:"Contrast:"})]}),Object(S.jsx)(Rt,{disabled:!s.originalImage,min:-1,max:1,step:.02,value:s.imageSettings.contrast,onChange:function(e){return t=e.currentTarget.valueAsNumber,s.imageSettings.contrast=t,void i.setDisplaySettings({displaySettings:s,pageId:a,buttonIndex:r});var t}})]})]}),Object(S.jsxs)(Pt,{className:"h-8",children:[Object(S.jsxs)(de,{children:[Object(S.jsx)(p.a,{className:"h-7 w-7"}),Object(S.jsx)(ee,{children:"Invert"})]}),Object(S.jsxs)(de,{children:[Object(S.jsx)(St,{disabled:!s.originalImage,onChange:function(e){return t=e,s.imageSettings.invert=t,void i.setDisplaySettings({displaySettings:s,pageId:a,buttonIndex:r});var t},value:s.imageSettings.invert}),Object(S.jsx)(te,{children:s.imageSettings.invert?"on":"off"})]})]}),Object(S.jsxs)(Pt,{className:"h-8",children:[Object(S.jsxs)(de,{children:[Object(S.jsx)(rn.a,{className:"h-7 w-7"}),Object(S.jsx)(ee,{children:"AutoCrop"})]}),Object(S.jsxs)(de,{children:[Object(S.jsx)(St,{disabled:!s.originalImage,onChange:function(e){return t=e,s.imageSettings.autoCrop=t,void i.setDisplaySettings({displaySettings:s,pageId:a,buttonIndex:r});var t},value:s.imageSettings.autoCrop}),Object(S.jsx)(te,{children:s.imageSettings.autoCrop?"on":"off"})]})]})]})]}),Object(S.jsx)("div",{className:"relative flex flex-col bg-gray-800 rounded-xl",children:Object(S.jsxs)(A,{title:"Text",className:"h-full",children:[Object(S.jsx)(Pt,{children:Object(S.jsx)(At,{className:"w-full",placeholder:"Enter text",value:null!==(t=s.textSettings.text)&&void 0!==t?t:"",onChange:function(e){return t=e,s.textSettings.text=t,void i.setDisplaySettings({displaySettings:s,pageId:a,buttonIndex:r});var t}})}),Object(S.jsxs)(Pt,{className:"h-8",children:[Object(S.jsxs)(de,{children:[Object(S.jsx)(Ut.a,{className:"h-7 w-7"}),Object(S.jsx)(ee,{children:"Position:"})]}),Object(S.jsxs)(de,{children:[Object(S.jsx)(Ke,{className:"w-44",value:s.textSettings.position,onChange:function(e){return t=e,s.textSettings.position=t,void i.setDisplaySettings({displaySettings:s,pageId:a,buttonIndex:r});var t},options:[{value:L.d.right,text:"right"},{value:L.d.bottom,text:"bottom"}]}),Object(S.jsx)(te,{children:s.textSettings.position})]})]}),Object(S.jsxs)(Pt,{className:"h-8",children:[Object(S.jsxs)(de,{children:[Object(S.jsx)(an.a,{className:"h-7 w-7"}),Object(S.jsx)(ee,{children:"Font:"})]}),Object(S.jsxs)(de,{children:[Object(S.jsx)(Ke,{className:"w-44",value:s.textSettings.font,onChange:function(e){return t=e,s.textSettings.font=t,void i.setDisplaySettings({displaySettings:s,pageId:a,buttonIndex:r});var t},options:[{value:on.d,text:"xs"},{value:on.c,text:"medium"},{value:on.b,text:"large"},{value:on.a,text:"xl"}]}),Object(S.jsx)(te,{children:s.textSettings.font})]})]}),Object(S.jsxs)(Pt,{className:"h-8",children:[Object(S.jsxs)(de,{children:[Object(S.jsx)(cn.a,{className:"h-7 w-7"}),Object(S.jsx)(ee,{children:"Icon width:"})]}),Object(S.jsx)(Rt,{disabled:!(null!==(n=s.textSettings.text)&&void 0!==n&&n.length)||s.textSettings.position===L.d.bottom,min:.1,max:.9,step:.01,value:s.textWithIconSettings.iconWidthMultiplier,onChange:function(e){return t=e.currentTarget.valueAsNumber,s.textWithIconSettings.iconWidthMultiplier=t,void i.setDisplaySettings({displaySettings:s,pageId:a,buttonIndex:r});var t}})]})]})})]})},ln=function(e){var t=e.pageId,n=e.displayIndex,r=Object(x.useContext)($),a=Object(x.useRef)(null);Object(x.useEffect)((function(){a.current&&(a.current.contentEditable="true",a.current.focus(),a.current.contentEditable="false")}),[]);var c=function(){var e=Object(d.a)(Object(l.a)().mark((function e(a){var c;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Xt.a)(a[0]);case 2:c=e.sent,r.setOriginalImage({pageId:t,buttonIndex:n,originalImage:c});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"w-full h-full flex flex-col justify-between focus:outline-none p-8",tabIndex:0,contentEditable:!1,ref:a,onPaste:function(){var e=Object(d.a)(Object(l.a)().mark((function e(a){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.t1=n,e.t2=t,e.next=5,Object(Xt.a)(a.clipboardData.files[0]);case 5:e.t3=e.sent,e.t4={buttonIndex:e.t1,pageId:e.t2,originalImage:e.t3},e.t0.setOriginalImage.call(e.t0,e.t4);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(S.jsx)($t,{onDrop:c,pageId:t,displayIndex:n}),Object(S.jsx)(un,{pageId:t,displayIndex:n})]})},dn=function(e){var t=e.children;return Object(S.jsx)("div",{className:"w-full flex flex-col gap-8 p-8 overflow-y-scroll",children:t})},bn=[{text:"None",value:"none"},{text:"CPU Temp",value:"cpu_temp"},{text:"CPU Temp Graph",value:"cpu_temp_graph"},{text:"CPU Temp Line",value:"cpu_temp_line"},{text:"GPU Temp",value:"gpu_temp"},{text:"GPU Temp Graph",value:"gpu_temp_graph"},{text:"GPU Temp Line",value:"gpu_temp_line"}],pn=function(e){var t=e.children;return Object(S.jsx)("div",{className:"bg-gray-400 rounded-md px-2 py-1",children:t})},jn=function(e){var t=e.pageId,n=e.displayIndex,r=Object(x.useContext)(Z),a=r.pages,c=r.defaultBackDisplay,s=Object(x.useContext)($).setLive,i=Object(x.useContext)(ue),o=i.system,u=i.serialApi,l="dbd"===t?c.live:a.byId[t].displayButtons[n].live,d=Object(x.useCallback)((function(e){var n=Object(B.a)(Object(B.a)({},l),{},Object(Lt.a)({},e.position,e.mode));s(e),"none"===n.top&&"none"===n.bottom&&u&&u.setCurrentPage(a.sorted.indexOf(t))}),[s,u,l,t,a.sorted]);return Object(S.jsxs)(dn,{children:[Object(S.jsx)(A,{title:"Sensors",children:Object(S.jsxs)("div",{className:"flex gap-8",children:[Object(S.jsxs)(pn,{children:[Object(S.jsx)("span",{children:"CPU temp: "}),Object(S.jsxs)("span",{children:[" ",o.cpuTemp[o.cpuTemp.length-1].toFixed(1)," C\xb0"]})]}),Object(S.jsxs)(pn,{children:[Object(S.jsx)("span",{children:"GPU temp: "}),Object(S.jsxs)("span",{children:[" ",o.gpuTemp[o.gpuTemp.length-1].toFixed(1)," C\xb0"]})]})]})}),Object(S.jsx)(A,{title:"Live data",children:Object(S.jsxs)("div",{className:"",children:[Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{children:"Top half"}),Object(S.jsx)(Ke,{className:"w-48",value:l.top,options:bn,onChange:function(e){return d({pageId:t,buttonIndex:n,mode:e,position:"top"})}})]}),Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{children:"Bottom half"}),Object(S.jsx)(Ke,{className:"w-48",value:l.bottom,options:bn,onChange:function(e){return d({pageId:t,buttonIndex:n,mode:e,position:"bottom"})}})]})]})}),Object(S.jsxs)(A,{title:"What you need for this to work",children:["On windows you need openhardwaremonitor installed and running. If something is not working, please save a report and send it to me (Discord or GitHub issue).",Object(S.jsx)("br",{}),Object(S.jsx)("br",{}),"On linux and macos there is nothing to do. It should work out of the box. If something is not working on linux, please send me the output of the following command:"," ",Object(S.jsx)("code",{className:"bg-gray-400 p-1 rounded-sm border-2",children:"sensors"})]})]})},fn=function(){var e=Object(N.n)(),t=Object(N.l)(),n=Object(x.useContext)(Z),r=e.pageId;if(void 0===r||void 0===e.displayIndex)return Object(S.jsx)(S.Fragment,{});var a=parseInt(e.displayIndex),c=n.pages.byId[r];return void 0===c?Object(S.jsx)(S.Fragment,{}):Object(S.jsx)(Nt,{className:"w-dp-settings",title:"Page ".concat(Object(me.c)(r,c)," Display ").concat(a+1),visible:!0,setClose:function(){return t("/")},children:Object(S.jsx)(vt,{className:"h-dp-settings",tabs:[{title:"Display Settings",prefix:Object(S.jsx)(qt.a,{className:"h-6 w-6"}),content:Object(S.jsx)(ln,{pageId:r,displayIndex:a})},{title:"Button Settings",prefix:Object(S.jsx)(Ut.a,{className:"h-6 w-6"}),content:Object(S.jsx)(Qt,{pageId:r,displayIndex:a})},{title:"Live Data Settings",prefix:Object(S.jsx)(Ie.a,{className:"h-6 w-6"}),content:Object(S.jsx)(jn,{pageId:r,displayIndex:a})}]})})},hn=(n(376),n(375),n(377)),gn=n(378),xn=n(379),mn=n(380),On=n(381),vn=n(71),yn=function(){return Object(S.jsx)(dn,{children:Object(S.jsxs)(A,{title:"Fresh's FreeDeck Configurator",children:[Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{children:"Software Version:"}),Object(S.jsx)(te,{children:vn.version})]}),Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{children:"Build:"}),Object(S.jsx)(te,{children:1737908824855})]}),Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{children:"Commit:"}),Object(S.jsx)(te,{children:"N/A"})]}),Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{children:"Software Repackaged by:"}),Object(S.jsx)(te,{children:"JFresh @ FreshLabs Interactive 2025"})]})]})})},wn=function(){return Object(S.jsx)(jn,{displayIndex:-1,pageId:"dbd"})},kn=function(){return Object(S.jsx)(ln,{displayIndex:-1,pageId:"dbd"})},In=function(){var e=Object(x.useContext)(ue),t=e.serialApi,n=e.devLog,r=Object(x.useContext)(le);return Object(S.jsx)(dn,{children:Object(S.jsxs)(A,{title:"FreeDeck Developer Settings",children:[Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{children:"Send text to screen:"}),Object(S.jsx)(Bt,{onChange:function(e){return null===t||void 0===t?void 0:t.writeToScreen(e)}})]}),Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{children:"Make toast:"}),Object(S.jsx)(Le,{onClick:function(){return xt({title:"Title",text:"Text"})},children:"Toast!"})]}),Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{children:"call get_current_window"}),Object(S.jsx)(Le,{onClick:function(){return Object(ae.a)("get_current_window").then((function(e){return r.openAlert({text:e,title:"debug"})}))},children:"invoke"})]}),Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{children:"List sensors"}),Object(S.jsx)(Le,{onClick:function(){return Object(ae.a)("list_sensors").then((function(e){return r.openAlert({text:e.join(", "),title:"sensors"})}))},children:"invoke"})]}),Object(S.jsx)(Pt,{children:JSON.stringify(n,void 0,2)})]})})},Cn="please connect serial",Nn=function(e){var t=e.onChange,n=e.options,r=e.value;return Object(S.jsx)(Ke,{className:"w-16",value:r,onChange:function(e){return t(parseInt(e,10))},options:n.map((function(e){return{text:e.toString(),value:e}}))})},Pn=function(){var e=Object(x.useContext)(ue).serialApi,t=Object(x.useContext)(Z),n=Object(x.useContext)($),r=Object(x.useState)([]),a=Object(h.a)(r,2),c=a[0],s=a[1],i=Object(x.useState)([]),o=Object(h.a)(i,2),u=o[0],b=o[1],p=Object(x.useState)(Cn),j=Object(h.a)(p,2),f=j[0],g=j[1];return Object(x.useEffect)((function(){if(e){var t=e.registerOnPortsChanged(function(){var t=Object(d.a)(Object(l.a)().mark((function t(n){var r;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.connected){t.next=7;break}return t.next=3,e.getFirmwareVersion();case 3:r=t.sent,g(r),t.next=8;break;case 7:g(Cn);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return function(){return e.clearOnPortsChanged(t)}}}),[null===e||void 0===e?void 0:e.connected]),Object(x.useEffect)((function(){for(var e=[],n=1;t.height*n<=16;)e.push(n++);for(var r=[],a=1;t.width*a<=16;)r.push(a++);s(e),b(r)}),[t.width,t.height]),Object(S.jsxs)(dn,{children:[Object(S.jsxs)(A,{title:"Device Settings",children:[Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{children:"FreeDeck Layout:"}),Object(S.jsxs)("div",{className:"flex items-center",children:[Object(S.jsx)(Nn,{onChange:function(e){e<t.width?window.advancedConfirm("Warning","If you accept, we will delete all displays that won't fit into the lesser amount of screens",(function(){return n.setDimensions({width:e})})):n.setDimensions({width:e})},value:t.width,options:c}),Object(S.jsx)(ht.a,{className:"w-5 h-5 mx-2"}),Object(S.jsx)(Nn,{onChange:function(e){return n.setDimensions({height:e})},value:t.height,options:u})]})]}),Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{hint:"Disable this to massively reduce save times but you will not be able to 'load from freedeck'",children:"Save JSON:"}),Object(S.jsx)(St,{onChange:function(e){return n.setSaveJson(e)},value:t.saveJson})]})]}),Object(S.jsxs)(A,{title:"Device Info",children:[Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{children:"Firmware version:"}),Object(S.jsx)(te,{children:f})]}),Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{children:"Config version:"}),Object(S.jsx)(te,{children:t.configVersion||"1.0.0"})]})]})]})},Sn=function(){var e=Object(x.useContext)(Z),t=Object(x.useContext)($),n=Object(x.useContext)(ue);return Object(S.jsxs)(dn,{children:[Object(S.jsxs)(A,{title:"Displays",children:[Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{children:"Brightness:"}),Object(S.jsx)(Rt,{min:0,max:255,value:e.brightness,onChange:function(e){return t.setBrightness(e.currentTarget.valueAsNumber)}})]}),Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{children:"Screen saver timeout:"}),Object(S.jsx)(Ke,{className:"w-44",onChange:function(e){return t.setScreenSaver(e)},value:e.screenSaverTimeout,options:[{text:"never",value:0},{text:"5s",value:5},{text:"10s",value:10},{text:"30s",value:30},{text:"1min",value:60},{text:"2min",value:120},{text:"5min",value:300},{text:"15min",value:900}]})]})]}),Object(S.jsxs)(A,{title:"Advanced",children:[Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{hint:"only for freedeck-pico, if too high the freedeck crashes. try lower values after restarting the freedeck, default 50",children:"OLED speed:"}),Object(S.jsx)(Rt,{min:1,max:255,value:e.oledSpeed,onChange:function(e){return t.setOledSpeed(e.currentTarget.valueAsNumber)}})]}),Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{hint:"only for freedeck-micro, if too low the freedeck crashes. try higher values after restarting the freedeck, default 2",children:"OLED delay:"}),Object(S.jsx)(Rt,{min:1,max:10,value:e.oledDelay,onChange:function(e){return t.setOledDelay(e.currentTarget.valueAsNumber)}})]}),Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{hint:"just play with this value to reduce noise, default 17",children:"Pre charge period:"}),Object(S.jsx)(Rt,{min:0,max:255,value:e.preChargePeriod,onChange:function(e){return t.setPreChargePeriod(e.currentTarget.valueAsNumber)}})]}),Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{hint:"just play with this value to reduce flickering, higher is better, default 15",children:"Clock frequency:"}),Object(S.jsx)(Rt,{min:0,max:15,value:e.clockFreq,onChange:function(e){return t.setClockFreq(e.currentTarget.valueAsNumber)}})]}),Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{hint:"just play with this value to reduce flickering, lower is better, default 2",children:"Clock divider:"}),Object(S.jsx)(Rt,{min:0,max:15,value:e.clockDiv,onChange:function(e){return t.setClockDiv(e.currentTarget.valueAsNumber)}})]}),Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{hint:"this is only temporary, you still need to save",children:"Try it out:"}),Object(S.jsx)(Le,{onClick:function(){var t;return null===(t=n.serialApi)||void 0===t?void 0:t.testOledParameters(e.oledSpeed,e.oledDelay,e.preChargePeriod,e.clockFreq,e.clockDiv)},children:"Try"})]})]})]})},An=function(){var e=Object(x.useContext)($),t=Object(N.l)(),n=[{title:"Default back button",prefix:Object(S.jsx)(hn.a,{className:"h-6 w-6"}),content:Object(S.jsx)(kn,{})},{title:"Back button live data",prefix:Object(S.jsx)(gn.a,{className:"h-6 w-6"}),content:Object(S.jsx)(wn,{})},{title:"Displays",prefix:Object(S.jsx)(tn.a,{className:"h-6 w-6"}),content:Object(S.jsx)(Sn,{})},{title:"Device",prefix:Object(S.jsx)(xn.a,{className:"h-6 w-6"}),content:Object(S.jsx)(Pn,{})},{title:"Developer settings",prefix:Object(S.jsx)(mn.a,{className:"h-6 w-6"}),content:Object(S.jsx)(In,{})},{title:"About",prefix:Object(S.jsx)(On.a,{className:"h-6 w-6"}),content:Object(S.jsx)(yn,{})}];return Object(S.jsx)(Nt,{className:"w-dp-settings",visible:!0,setClose:function(){t("/"),e.updateAllDefaultBackImages(void 0)},title:"General settings",children:Object(S.jsx)(vt,{tabs:n,className:"h-settings"})})},Dn="__TAURI_IPC__"in window,Bn=function(e){var t=e.children,r=e.href,a=e.newTab,c=void 0!==a&&a,s=e.className;return Dn&&c?Object(S.jsx)("span",{className:Object(P.a)("cursor-pointer text-primary-400",s),onClick:function(){return n.e(6).then(n.bind(null,590)).then((function(e){return(0,e.open)(r)}))},children:t}):Object(S.jsx)("a",{className:Object(P.a)("cursor-pointer text-primary-400",s),target:c?"_blank":void 0,rel:"noreferrer",href:r,children:t})},Fn=function(){var e=Object(N.l)();return Object(S.jsx)(Nt,{className:"w-help h-full",visible:!0,setClose:function(){e("/")},title:"Help",children:Object(S.jsxs)("div",{className:"space-y-4 p-8 text-xl overflow-y-scroll",children:[Object(S.jsxs)(A,{title:"Tips and tricks",children:[Object(S.jsxs)("p",{children:["You can hold ",Object(S.jsx)("b",{children:"ctrl"})," (",Object(S.jsx)("b",{children:"cmd"})," on mac) to show more detailed information or advanced functionality on almost any screen."]}),Object(S.jsxs)(de,{children:[Object(S.jsx)("p",{children:"Try it out!"}),Object(S.jsx)("p",{children:"Yaaaaay you did it! \ud83d\udc4d"})]})]}),Object(S.jsxs)(A,{title:"FreeDeck Discussion",children:["You can find all info here"," ",Object(S.jsx)(Bn,{newTab:!0,href:"https://discord.gg/psCy3QkjwA",children:"here"})]})]})})},Tn=function(e){var t=e.pageId,n=Object(x.useContext)(Z),r=Object(x.useContext)($).setUsePageName,a=Object(x.useContext)($).changePageWindowName,c=n.pages.byId[t];return Object(S.jsx)(dn,{children:Object(S.jsxs)(A,{title:"Auto page-switcher",children:[Object(S.jsxs)(Pt,{className:"h-8",children:[Object(S.jsx)(ee,{hint:"This will be ignored if this page is in a collection",children:"Use Page name as window name"}),Object(S.jsx)(St,{onChange:function(e){return r({pageId:t,value:e})},value:c.usePageNameAsWindowName})]}),Object(S.jsxs)(Pt,{mode:"top",children:[Object(S.jsx)(ee,{hint:"One window name per line or comma seperated",children:"Window name"}),Object(S.jsx)(At,{className:"w-64 h-64",placeholder:c.usePageNameAsWindowName?c.name:"Enter window name...",disabled:c.usePageNameAsWindowName,value:c.windowName,onChange:function(e){return a({pageId:t,windowName:e})}})]})]})})},En=function(e){var t=e.pageId,n=Object(x.useContext)(Z),r=n.collections,a=Object(x.useContext)($),c=a.renamePage,s=a.setPageCollection,i=n.pages.byId[t];return Object(S.jsx)(dn,{children:Object(S.jsxs)(A,{title:"General page settings",children:[Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{children:"Name"}),Object(S.jsx)(Bt,{className:"w-44",placeholder:"Enter page name",value:i.name,onChange:function(e){return c({pageId:t,name:e})}})]}),Object(S.jsxs)(Pt,{children:[Object(S.jsx)(ee,{children:"Collection"}),Object(S.jsx)(Ke,{className:"w-44",value:i.isInCollection,onChange:function(e){return s({pageId:t,collectionId:e})},options:[{text:"no collection",value:void 0}].concat(Object(D.a)(r.sorted.map((function(e){return{text:Object(me.b)(e,r.byId[e]),value:e}}))))})]})]})})},qn=function(){var e=Object(N.n)(),t=Object(N.l)(),n=Object(x.useContext)(Z),r=e.pageId;if(void 0===r)return Object(S.jsx)(S.Fragment,{});var a=n.pages.byId[r];return void 0===a?Object(S.jsx)(S.Fragment,{}):Object(S.jsx)(Nt,{className:"w-dp-settings",title:"Page ".concat(Object(me.c)(r,a)),visible:!0,setClose:function(){return t("/")},children:Object(S.jsx)(vt,{className:"h-dp-settings",tabs:[{title:"General",content:Object(S.jsx)(En,{pageId:r}),prefix:Object(S.jsx)(ke.a,{className:Pe})},{title:"Auto Page Switcher",content:Object(S.jsx)(Tn,{pageId:r}),prefix:Object(S.jsx)(mt.a,{className:Pe})}]})})},Un=function(){var e=Object(N.l)();return Object(x.useEffect)((function(){null===localStorage.getItem("dontShow128Info")&&e("/deprecated-info")}),[]),Object(S.jsxs)(N.c,{children:[Object(S.jsx)(N.a,{path:"/",element:Object(S.jsx)(Ct,{})}),Object(S.jsx)(N.a,{path:"/help",element:Object(S.jsx)(Fn,{})}),Object(S.jsx)(N.a,{path:"/deprecated-info",element:Object(S.jsx)(Et,{})}),Object(S.jsx)(N.a,{path:"/displaybutton/:pageId/:displayIndex",element:Object(S.jsx)(fn,{})}),Object(S.jsx)(N.a,{path:"/page/:pageId",element:Object(S.jsx)(qn,{})}),Object(S.jsx)(N.a,{path:"/collection/:collectionId",element:Object(S.jsx)(Tt,{})}),Object(S.jsx)(N.a,{path:"/settings",element:Object(S.jsx)(An,{})}),!1]})},Ln=function(e){var t=e.defaultConfigState,n=e.defaultAppState,r=Object(g.useSimpleReducer)(t,Y),a=Object(h.a)(r,2),c=a[0],s=a[1],i=Object(g.useSimpleReducer)(n,oe),o=Object(h.a)(i,2),u=o[0],l=o[1],d=Object(x.useRef)({deck:u.deck,system:u.system});return function(e,t,n){var r=e.serialApi;Object(x.useEffect)((function(){if("__TAURI_IPC__"in window&&Object(rt.a)("system_temps",(function(e){t.setTemps(e.payload)})),r){var e=r.registerOnPortsChanged((function(e,a){t.setAvailablePorts(e),t.setConnectedPortIndex(a),t.setDevLog({path:"connectedPortIndex",data:a}),a>-1&&(r.getHasJson().then((function(e){return t.setHasJson(e)})),r.getCurrentPage().then((function(e){console.log(e),at(e,t,n)})))}));return function(){r.clearOnPortsChanged(e)}}}),[])}(u,l,d),ft(c,s,u,l,d),function(e){var t=e.appDispatchContext.setCtrl;Object(x.useEffect)((function(){window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),localStorage.getItem("closedPWACTA")||xt({text:"You can install the configurator to have it offline! Click here to install",danger:function(e){return Object(S.jsx)(Le,{onClick:function(){localStorage.setItem("closedPWACTA","true"),C.a.dismiss(e.id)},prefix:Object(S.jsx)(ht.a,{className:"h-4 w-4"}),children:"Close"})},primary:function(t){return Object(S.jsx)(Le,{type:"primary",onClick:function(){localStorage.setItem("closedPWACTA","true"),C.a.dismiss(t.id),e.prompt()},prefix:Object(S.jsx)(gt.a,{className:"h-4 w-4"}),children:"Install"})}})})),document.addEventListener("keydown",(function(e){(me.d&&"Meta"===e.key||"Control"===e.key)&&t(!0)})),document.addEventListener("keyup",(function(e){(me.d&&"Meta"===e.key||"Control"===e.key)&&t(!1)})),window.onblur=function(){return t(!1)}}),[])}({appDispatchContext:l}),Object(S.jsx)(v.a,{children:Object(S.jsx)(m.a,{backend:O.a,children:Object(S.jsx)(Z.Provider,{value:c,children:Object(S.jsx)($.Provider,{value:s,children:Object(S.jsx)(ue.Provider,{value:u,children:Object(S.jsxs)(le.Provider,{value:l,children:[Object(S.jsx)(nt,{}),Object(S.jsx)(Un,{})]})})})})})})},Wn=function(e){e&&e instanceof Function&&n.e(7).then(n.bind(null,591)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},Rn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Vn(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Hn=function(){var e=Object(d.a)(Object(l.a)().mark((function e(){var t,n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:return t=e.sent,e.next=5,se();case 5:n=e.sent,he=new b.ApolloClient({cache:new b.InMemoryCache,uri:"https://fddevapi.gosewis.ch/graphql",credentials:"include"}),f.a.render(Object(S.jsx)(b.ApolloProvider,{client:he,children:Object(S.jsx)(Ln,{defaultConfigState:t,defaultAppState:n})}),document.getElementById("root"));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Hn(),function(e){if("serviceWorker"in navigator&&!window.__TAURI_IPC__){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");Rn?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Vn(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Vn(t,e)}))}}({onUpdate:function(e){xt({primary:function(t){return Object(S.jsx)(Le,{prefix:Object(S.jsx)(p.a,{className:"h-4 w-4"}),type:"primary",size:2,onClick:Object(d.a)(Object(l.a)().mark((function t(){var n;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null===(n=e.waiting)||void 0===n||n.postMessage({type:"SKIP_WAITING"}),window.onbeforeunload=function(){},window.location.reload();case 3:case"end":return t.stop()}}),t)}))),children:"Refresh"})},text:"Refresh to load the newest version!",title:"Update available!"})}}),Wn()},47:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=128,a=128},53:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.disconnect=0]="disconnect",e[e.connect=1]="connect"}(r||(r={}))},59:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return j})),n.d(t,"c",(function(){return f}));var r=n(3),a=n(4),c=n(6),s=n(129),i=n(83),o=n(78),u=n(136),l=n(92),d=n(79),b=n(47),p=function(){var t=Object(c.a)(Object(r.a)().mark((function t(n){var c;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(c=Object(a.a)(Object(a.a)({},Object(o.a)()),{},{imageSettings:n.imageSettings,isGeneratedFromDefaultBackImage:n.isGeneratedFromDefaultBackImage,textSettings:n.textSettings,textWithIconSettings:n.textWithIconSettings,originalImage:n.originalImage&&e.from(n.originalImage)})).originalImage){t.next=7;break}return t.next=4,Object(d.a)(c);case 4:t.t0=t.sent,t.next=10;break;case 7:return t.next=9,Object(d.b)(c.textSettings);case 9:t.t0=t.sent;case 10:return c.convertedImage=t.t0,c.previewImage=Object(l.a)(c.convertedImage),t.abrupt("return",c);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=function(){var e=Object(c.a)(Object(r.a)().mark((function e(t){var c,s,o,l,d,b,j,f,h,g,x,m,O;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c=[],s=0;s<t.pages.sorted.length;s++)for(o=t.pages.sorted[s],l=t.pages.byId[o],d=0;d<l.displayButtons.length;d++)console.log(s,d,c.length),c.push(p(Object(a.a)({},l.displayButtons[d].display)));return e.next=4,Promise.all(c);case 4:for(b=e.sent,j=0;j<t.pages.sorted.length;j++)for(f=t.pages.sorted[j],h=t.pages.byId[f],g=0;g<h.displayButtons.length;g++)h.displayButtons[g].display=b[j*h.displayButtons.length+g],console.log(j*h.displayButtons.length+g);if(e.t0=t.defaultBackDisplay.live,!t.defaultBackDisplay.display){e.next=13;break}return e.next=10,p(t.defaultBackDisplay.display);case 10:e.t1=e.sent,e.next=16;break;case 13:return e.next=15,Object(i.a)();case 15:e.t1=e.sent;case 16:if(e.t2=e.t1,x={live:e.t0,display:e.t2},!(m=u.a.validate(Object(a.a)(Object(a.a)({},t),{},{defaultBackDisplay:x}),{stripUnknown:!0})).error){e.next=21;break}throw new Error(m.error.message);case 21:return O=m.value,e.next=24,Promise.resolve().then(n.t.bind(null,71,3));case 24:return O.configVersion=e.sent.configFileVersion,e.abrupt("return",O);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(c.a)(Object(r.a)().mark((function e(t){var a,c,i,o,u,l;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.readUInt16LE(2)-1,c=b.a*(a+1),i=c+1025*a,t.length!==i){e.next=6;break}throw alert("config too old. not compatible yet. please create a new one"),new Error("config too old. not compatible (yet). please create a new one");case 6:if(o=t.slice(i),console.log(o.length),(u=JSON.parse(Object(s.b)(o,{to:"string"}))).configVersion){e.next=11;break}throw new Error("legacy config. not compatible");case 11:return e.next=13,j(u);case 13:return l=e.sent,e.next=16,Promise.resolve().then(n.t.bind(null,71,3));case 16:return l.configVersion=e.sent.configFileVersion,e.abrupt("return",l);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}).call(this,n(54).Buffer)},60:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return s}));var r="fonts/smaller.fnt",a="fonts/small.fnt",c="fonts/medium.fnt",s="fonts/large.fnt"},71:function(e){e.exports=JSON.parse('{"name":"freedeck-configurator","version":"2.13.7","configFileVersion":"1.3.0","minFWVersion":"2.7.0","private":true,"homepage":"./","type":"commonjs","dependencies":{"@apollo/client":"3.3.15","@bitovi/use-simple-reducer":"^0.0.1","@headlessui/react":"^1.4.1","@heroicons/react":"^2.0.11","@tauri-apps/api":"^1.0.2","clsx":"^1.1.1","floyd-steinberg":"^1.0.6","jimp":"^0.16.0","joi":"^17.5.0","joi-to-typescript":"^2.3.0","lodash":"^4.17.20","pako":"^2.0.4","preval.macro":"^5.0.0","react":"^17.0.2","react-dnd":"^16.0.1","react-dnd-html5-backend":"^16.0.1","react-dom":"^17.0.2","react-dropzone":"^10.2.2","react-hot-toast":"^2.1.1","react-router-dom":"^6.0.2","react-terminal-logger":"^1.3.8","uuid":"^8.3.2","web-vitals":"^2.1.2","worker-interval":"^1.0.6"},"overrides":{"react-error-overlay":"6.0.9"},"scripts":{"start":"cross-env TAILWIND_MODE=watch craco start","build":"craco build","check:clean":"unimported; ts-unused-exports ./tsconfig.json --allowUnusedTypes --ignoreFiles=\\"generated/.*|_Boilerplate.*\\"","eject":"react-scripts eject","codegen":"graphql-codegen --config codegen.yml","typegen":"pwd; ts-node -P tsconfig.common.json src/scripts/joiTypes.ts","tauri:dev":"tauri dev","tauri:build":"tauri build","prebuild":"npm i"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@craco/craco":"^6.4.3","@graphql-codegen/cli":"1.21.4","@graphql-codegen/introspection":"1.18.2","@graphql-codegen/typescript":"1.22.0","@graphql-codegen/typescript-operations":"^1.17.16","@graphql-codegen/typescript-react-apollo":"^2.2.4","@graphql-codegen/typescript-react-query":"^3.0.3","@tauri-apps/cli":"^1.0.5","@types/lodash":"^4.14.160","@types/node":"^12.12.29","@types/pako":"^2.0.0","@types/preval.macro":"^3.0.0","@types/react":"^17.0.2","@types/react-dom":"^17.0.2","@types/uuid":"^8.3.3","@types/w3c-web-serial":"^1.0.2","autoprefixer":"^9.8.8","cross-env":"^7.0.3","postcss":"^7.0.39","react-scripts":"^4.0.3","tailwindcss":"npm:@tailwindcss/postcss7-compat@^2.2.16","ts-node":"^10.4.0","ts-unused-exports":"^7.0.3","typescript":"^4.5.2","unimported":"^1.19.1"},"optionalDependencies":{"@tauri-apps/cli-darwin-x64":"^1.0.4","@tauri-apps/cli-win32-x64-msvc":"^1.0.4"}}')},78:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return j}));var r=n(3),a=n(6),c=n(10),s=n(92),i=n(83),o=n(84),u=n(60),l=n(8),d=function(){var e,t;return{primary:{mode:l.b.noop,values:(e={},Object(c.a)(e,l.b.changePage,""),Object(c.a)(e,l.b.hotkeys,[]),Object(c.a)(e,l.b.settings,{setting:0,value:128}),Object(c.a)(e,l.b.special_keys,0),Object(c.a)(e,l.b.text,""),e),leavePage:{enabled:!1}},secondary:{mode:l.b.noop,values:(t={},Object(c.a)(t,l.b.changePage,""),Object(c.a)(t,l.b.hotkeys,[]),Object(c.a)(t,l.b.settings,{setting:0,value:128}),Object(c.a)(t,l.b.special_keys,0),Object(c.a)(t,l.b.text,""),t),leavePage:{enabled:!1}}}},b=function(){return{originalImage:void 0,convertedImage:Object(o.a)(),previewImage:Object(s.a)(Object(o.a)()),imageSettings:{brightness:0,contrast:0,whiteThreshold:64,blackThreshold:192,imageMode:l.c.normal,invert:!0,autoCrop:!0},textSettings:{font:u.b,text:"",position:l.d.right},textWithIconSettings:{iconWidthMultiplier:.35},isGeneratedFromDefaultBackImage:!1}},p=function(){var e=Object(a.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{button:d(),display:b(),live:{bottom:"none",top:"none"}});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(a.a)(Object(r.a)().mark((function e(t,n){var a,c;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={name:"",usePageNameAsWindowName:!0,displayButtons:[]},c=0;case 2:if(!(c<t)){e.next=11;break}return e.t0=a.displayButtons,e.next=6,p();case 6:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 8:c++,e.next=2;break;case 11:if(void 0===n){e.next=17;break}return a.displayButtons[0].button.primary.mode=l.b.changePage,a.displayButtons[0].button.primary.values[l.b.changePage]=n,e.next=16,Object(i.a)(n);case 16:a.displayButtons[0].display=e.sent;case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},79:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return b}));var r=n(3),a=n(6),c=n(156),s=n.n(c),i=n(157),o=n.n(i),u=n(8),l=n(109),d=function(){var e=Object(a.a)(Object(r.a)().mark((function e(t){var c,i,o,d,b,p,j,f,h,g,x,m,O,v,y,w,k,I,C,N,P,S=arguments;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=S.length>1&&void 0!==S[1]?S[1]:128,o=S.length>2&&void 0!==S[2]?S[2]:64,e.next=4,Promise.all([n.e(0),n.e(1)]).then(n.t.bind(null,116,7));case 4:if(d=e.sent.default,b=t.imageSettings,p=t.textWithIconSettings,j=t.textSettings,f=t.originalImage){e.next=8;break}throw new Error("no original image");case 8:return e.prev=8,e.next=11,d.read(f);case 11:h=e.sent,e.next=20;break;case 14:return e.prev=14,e.t0=e.catch(8),console.log("image is corrupted"),e.next=19,d.create(i,o,"black");case 19:h=e.sent;case 20:if(b.imageMode!==u.c.dither){e.next=31;break}return g=b.invert?-.4:.4,e.next=24,h.contrast(b.contrast*g*-1);case 24:return e.next=26,h.brightness(b.brightness*g);case 26:h.scaleToFit(i,o),h.bitmap=s()(h.bitmap),b.invert&&h.invert(),e.next=66;break;case 31:if(b.imageMode!==u.c.hybrid){e.next=62;break}return x=b.invert?-.4:.4,e.next=35,d.create(h);case 35:return m=e.sent,e.next=38,m.contrast(b.contrast*x*-2.5);case 38:return e.next=40,m.brightness(b.brightness*x);case 40:return m.scaleToFit(i,o),m.bitmap=s()(m.bitmap),b.invert&&m.invert(),e.next=45,h.grayscale();case 45:return e.next=47,h.scaleToFit(i,o);case 47:return e.next=49,h.contrast(b.contrast);case 49:return e.next=51,h.brightness(b.brightness);case 51:return O=50,e.next=54,d.create(i+3,o+3,b.invert?"white":"black");case 54:return v=e.sent,h=v.composite(h,(i-h.getWidth())/2+3,(o-h.getHeight())/2+3),e.next=58,h.convolute([[0,O,0],[O,4*O*-1,O],[0,O,0]]);case 58:h.crop(3,3,h.getWidth()-3,h.getHeight()-3),h.composite(m,(i-m.getWidth())/2,(o-m.getHeight())/2,{mode:d.BLEND_ADD,opacityDest:1,opacitySource:1}),e.next=66;break;case 62:if(b.imageMode!==u.c.normal){e.next=66;break}return e.next=65,h.threshold({max:b.whiteThreshold,replace:b.blackThreshold,autoGreyscale:!1});case 65:b.invert&&h.invert();case 66:if(!b.autoCrop){e.next=69;break}return e.next=69,h.autocrop();case 69:if(y=new d(i,o,"black"),null===(c=j.text)||void 0===c||!c.length){e.next=84;break}return e.next=73,d.loadFont(j.font);case 73:return w=e.sent,k=w.common.lineHeight-2,I=j.text.split(/\r?\n/).filter((function(e){return e})),j.position===u.d.right?h.scaleToFit(i*p.iconWidthMultiplier,o):h.scaleToFit(i,o-k*I.length),C=I.length*k+1*(I.length-1),N=(o-C)/2,e.next=81,Promise.all(I.map(function(){var e=Object(a.a)(Object(r.a)().mark((function e(t,n){var a,c;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j.position!==u.d.bottom){e.next=5;break}return e.next=3,y.print(w,(i-k/2*t.length)/2,o-k*(I.length-n),t);case 3:e.next=9;break;case 5:return a=N+k*n,c=h.getWidth()+1,e.next=9,y.print(w,(i-c-k/2*t.length)/2+c,a,t);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 81:j.position===u.d.bottom?y.composite(h,i/2-h.getWidth()/2,0):y.composite(h,0,o/2-h.getHeight()/2),e.next=86;break;case 84:h.scaleToFit(i,o),y.composite(h,i/2-h.getWidth()/2,o/2-h.getHeight()/2);case 86:return e.next=88,y.getBufferAsync("image/bmp");case 88:return P=e.sent,e.next=91,Object(l.a)(P,i,o);case 91:return e.abrupt("return",e.sent);case 92:case"end":return e.stop()}}),e,null,[[8,14]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(a.a)(Object(r.a)().mark((function e(t){var c,s,i,o,u,d,b,p,j,f,h,g,x,m=arguments;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=m.length>1&&void 0!==m[1]?m[1]:128,o=m.length>2&&void 0!==m[2]?m[2]:64,e.next=4,Promise.all([n.e(0),n.e(1)]).then(n.t.bind(null,116,7));case 4:return u=e.sent.default,e.next=7,u.create(i,o,"black");case 7:return d=e.sent,e.next=10,u.loadFont(t.font);case 10:return b=e.sent,p=b.common.lineHeight-2,j=null!==(c=null===(s=t.text)||void 0===s?void 0:s.split(/\r?\n/).filter((function(e){return e})))&&void 0!==c?c:[],f=j.length*p+1*(j.length-1),h=(o-f)/2,e.next=17,Promise.all(j.map(function(){var e=Object(a.a)(Object(r.a)().mark((function e(t,n){var a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h+p*n,e.next=3,d.print(b,(i-t.length*p/2)/2,a,t);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 17:return e.next=19,u.create(i,o,"black");case 19:return(g=e.sent).composite(d,(i-d.getWidth())/2,(o-d.getHeight())/2),e.next=23,g.getBufferAsync("image/bmp");case 23:return x=e.sent,e.next=26,Object(l.a)(x,i,o);case 26:return e.abrupt("return",e.sent);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();o()(d,1,{leading:!0,maxWait:16}),o()((function(e){return b(e.textSettings)}),1,{leading:!0,maxWait:16})},8:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return o}));var r,a,c=n(10);!function(e){e.hotkeys="hotkeys",e.changePage="changePage",e.noop="noop",e.special_keys="special_keys",e.text="text",e.settings="settings"}(a||(a={}));var s,i,o,u=(r={},Object(c.a)(r,a.hotkeys,0),Object(c.a)(r,a.changePage,1),Object(c.a)(r,a.noop,2),Object(c.a)(r,a.special_keys,3),Object(c.a)(r,a.settings,5),Object(c.a)(r,a.text,6),r);!function(e){e[e.absolute_brightness=0]="absolute_brightness",e[e.change_brightness=1]="change_brightness"}(s||(s={})),function(e){e.right="right",e.bottom="bottom"}(i||(i={})),function(e){e.normal="normal",e.dither="dither",e.hybrid="hybrid"}(o||(o={}))},83:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var r=n(3),a=n(4),c=n(6),s=n(206),i=n(78),o=n(59),u=n(110),l=function(){var t=Object(c.a)(Object(r.a)().mark((function t(n){var c,l;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=JSON.parse(localStorage.getItem("defaultBackDisplay")||"{}"),l=Object(i.a)(),!Object.keys(c).length||"dbd"===n){t.next=8;break}c.convertedImage=e.from(c.convertedImage),c.originalImage=e.from(c.originalImage),l=c,t.next=17;break;case 8:return t.t0=a.a,t.t1=Object(a.a)({},l),t.t2={},t.t3=Object(a.a)(Object(a.a)({},l.imageSettings),{},{invert:!0}),t.next=14,Object(u.b)(s.a);case 14:t.t4=t.sent,t.t5={imageSettings:t.t3,originalImage:t.t4,isGeneratedFromDefaultBackImage:!0},l=(0,t.t0)(t.t1,t.t2,t.t5);case 17:return t.next=19,Object(o.b)(l);case 19:return l=t.sent,t.abrupt("return",l);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}).call(this,n(54).Buffer)},84:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n(93),a=function(){var t=new e(Object(r.a)());return e.concat([t,new e(1024)])}}).call(this,n(54).Buffer)},92:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return"data:image/bmp;base64,"+function(e){for(var t,n,r,a,c,s,i,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",l=0;l<e.length;)a=(t=e[l++])>>2,c=(3&t)<<4|(n=l<e.length?e[l++]:Number.NaN)>>4,s=(15&n)<<2|(r=l<e.length?e[l++]:Number.NaN)>>6,i=63&r,isNaN(n)?s=i=64:isNaN(r)&&(i=64),u+=o.charAt(a)+o.charAt(c)+o.charAt(s)+o.charAt(i);return u}(e)}},93:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){return[66,77,130,4,0,0,0,0,0,0,130,0,0,0,108,0,0,0,128,0,0,0,192,255,255,255,1,0,1,0,0,0,0,0,0,4,0,0,35,46,0,0,35,46,0,0,2,0,0,0,2,0,0,0,66,71,82,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,0]}}},[[337,3,4]]]);
//# sourceMappingURL=main.97572bab.chunk.js.map